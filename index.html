<!-- 

///////////////////////////////////////////////
/////Code được viết bởi Chauhuynh0104/////////
////http://fb.com/chauhuynh0104//////////////
/////////////079.567.9350///////////////////
///Vui lòng tôn trọng bản quyền tác giả////
/////////Không xoá dòng này //////////////
/////////////////////////////////////////

!-->
<!DOCTYPE html>
<html lang="vi">
<head><meta charset="UTF-8"><title>Thủ Thuật</title></head>
<body>
<script>
  const base64 = "PCEtLSANCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vLy9Db2RlIMSRxrDhu6NjIHZp4bq/dCBi4bufaSBDaGF1aHV5bmgwMTA0Ly8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vL2h0dHA6Ly9mYi5jb20vY2hhdWh1eW5oMDEwNC8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzA3OS41NjcuOTM1MC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQovLy8vLy8vLy8vLy9WdWkgbMOybmcgdMO0biB0cuG7jW5nIGLhuqNuIHF1eeG7gW4gdMOhYyBnaeG6oy8vLy8vLy8vLy8vDQovLy8vLy8vLy8vLy8vLy8vLy9LaMO0bmcgeG/DoSBkw7JuZyBuw6B5IC8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KIS0tPg0KPCFET0NUWVBFIGh0bWw+DQoNCjxodG1sIGxhbmc9InZpIj4NCjxoZWFkPg0KPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1JbnRlcjp3Z2h0QDQwMDs2MDA7NzAwJmFtcDtkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCIvPg0KPGxpbmsgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZm9udC1hd2Vzb21lLzYuNC4wL2Nzcy9hbGwubWluLmNzcyIgcmVsPSJzdHlsZXNoZWV0Ii8+DQo8bWV0YSBjaGFyc2V0PSJ1dGYtOCIvPg0KPG1ldGEgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCIgbmFtZT0idmlld3BvcnQiLz4NCjx0aXRsZT5LaeG7g20gVHJhIFRo4bunIFRodeG6rXQgWSBU4bq/PC90aXRsZT4NCjxzdHlsZT4NCiAgICAgICAgKiB7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBwYWRkaW5nOiAwOw0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KICAgICAgICBib2R5IHsNCiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgcGFkZGluZzogMmNtOw0KICAgICAgICAgICAgbWluLWhlaWdodDogMTAwdmg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICB9DQogICAgICAgIGgxLCBoMiB7DQogICAgICAgICAgICBjb2xvcjogIzJjM2U1MDsNCiAgICAgICAgfQ0KICAgICAgICAuY29udGFpbmVyIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgZ2FwOiAyMHB4Ow0KICAgICAgICB9DQogICAgICAgIC50YWJsZS1jb250YWluZXIgew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIG92ZXJmbG93OiBhdXRvOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOw0KICAgICAgICB9DQogICAgICAgIC51cGxvYWQtc2VjdGlvbiB7DQogICAgICAgICAgICBib3JkZXI6IDJweCBkYXNoZWQgIzM0OThkYjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgICAgICB9DQogICAgICAgIHRhYmxlIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICAgICAgfQ0KICAgICAgICB0aCwgdGQgew0KICAgICAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDsNCiAgICAgICAgICAgIG1heC13aWR0aDogMjAwcHg7DQogICAgICAgIH0NCiAgICAgICAgdGggew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2YyZjJmMjsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBzdGlja3k7DQogICAgICAgICAgICB0b3A6IDA7DQogICAgICAgIH0NCiAgICAgICAgLmNvbmZsaWN0IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmRkZGQ7DQogICAgICAgIH0NCg0KICAgICAgICAud2FybmluZyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmM2NkOw0KICAgICAgICB9DQogICAgICAgIC5lcnJvciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhkN2RhOw0KICAgICAgICAgICAgY29sb3I6ICM3MjFjMjQ7DQogICAgICAgIH0NCiAgICAgICAgLmJ0biB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzQ5OGRiOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweCAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4Ow0KICAgICAgICB9DQogICAgICAgIC5idG46aG92ZXIgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI5ODBiOTsNCiAgICAgICAgfQ0KICAgICAgICAuYnRuOmRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNjY2NjY2M7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkOw0KICAgICAgICB9DQogICAgICAgIC5sb2dpbi1wYWdlIC5wcm9jZWR1cmUtaW5mbyB7DQogICAgICAgIA0KICAgICAgICAgICAgcGFkZGluZzogNDVweDsNCiAgICAgICAgICAgIG1hcmdpbjogMHB4IGF1dG87DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjOTk5OTk5Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDMwcHggcmdiYSgwLCAwLCAwLCAwLjIpOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7DQogICAgICAgIH0NCiAgICAgICAgLnByb2NlZHVyZS1pbmZvIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY5ZmE7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNjY2M7DQogICAgICAgICAgICB3aWR0aDogYXV0bzsNCiAgICAgICAgICAgIG1heC13aWR0aDogbm9uZTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7DQogICAgICAgIH0NCiAgICAgICAgI2Vycm9yTG9nIHsNCiAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87DQogICAgICAgIH0NCiAgICAgICAgLmVycm9yLWl0ZW0gew0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7DQogICAgICAgIH0NCiAgICAgICAgLmVycm9yLWl0ZW06bGFzdC1jaGlsZCB7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiBub25lOw0KICAgICAgICB9DQogICAgICAgIC5maWxlLXJlcXVpcmVtZW50cyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTdmNGZmOw0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOw0KICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5maWxlLXJlcXVpcmVtZW50cy5oaWRkZW4gew0KICAgICAgICAgICAgb3BhY2l0eTogMDsNCiAgICAgICAgICAgIGhlaWdodDogMDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDA7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgIH0NCiAgICAgICAgLmNvbmZsaWN0LXJvdyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBmN2ZhOw0KICAgICAgICB9DQogICAgICAgIC5jb25mbGljdC1kZXRhaWwgew0KICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vcm1hbCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDhweDsNCiAgICAgICAgfQ0KICAgICAgICAuY29uZmxpY3QtZGV0YWlsIGJyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2dpbi1zZWN0aW9uIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7DQogICAgICAgICAgICBwYWRkaW5nOiAzMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAyMHB4IGF1dG87DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDQyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzk5OTk5OTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMTBweCAzMHB4IHJnYmEoMCwgMCwgMCwgMC4yKTsNCiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgICAgICAgIHotaW5kZXg6IDEwOw0KICAgICAgICB9DQogICAgICAgIC5sb2dpbi1pbnB1dCB7DQogICAgICAgICAgICBwYWRkaW5nOiAxMHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDIwMHB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2dpbi1lcnJvciB7DQogICAgICAgICAgICBjb2xvcjogI2Q5NTM0ZjsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgICAgICB9DQogICAgICAgIC5tYWluLWNvbnRlbnQgew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgfQ0KICAgICAgICAubG9naW4tdGl0bGUgew0KICAgICAgICAgICAgY29sb3I6ICMyYzNlNTA7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2dvdXQtYnRuIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRvcDogMjBweDsNCiAgICAgICAgICAgIHJpZ2h0OiAyMHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U3NGMzYzsNCiAgICAgICAgfQ0KICAgICAgICAubG9nb3V0LWJ0bjpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzAzOTJiOw0KICAgICAgICB9DQogICAgICAgIC5vcHRpb24tc2VjdGlvbiB7DQogICAgICAgICAgICBtYXJnaW46IDE1cHggMDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgICAgICB9DQogICAgICAgICNvcGVyYXRvckZpbHRlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgIH0NCiAgICAgICAgI29wZXJhdG9yRmlsdGVyIGxhYmVsIHsNCiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMTBweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQogICAgICAgICNvcGVyYXRvclNlbGVjdCB7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDI1MHB4Ow0KICAgICAgICB9DQogICAgICAgIC50aW1lLXN1Z2dlc3Rpb24gew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U4ZjVlOTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDVweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDVweDsNCiAgICAgICAgfQ0KICAgICAgICAubm8tc3VnZ2VzdGlvbiB7DQogICAgICAgICAgICBjb2xvcjogI2QzMmYyZjsNCiAgICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsNCiAgICAgICAgfQ0KICAgICAgICAudGltZS1vcHRpb25zIHsNCiAgICAgICAgICAgIG1hcmdpbjogMTBweCAwOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7DQogICAgICAgIH0NCiAgICAgICAgLnRpbWUtb3B0aW9ucyBsYWJlbCB7DQogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgIH0NCiAgICAgICAgLmdyb3VwLXNlcGFyYXRvciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRkZGOw0KICAgICAgICAgICAgaGVpZ2h0OiA1cHg7DQogICAgICAgIH0NCgkJLyogUGjhuqduIGNo4buvIGPDsyBjaMO6IHRow61jaCAqLw0KICAgICAgICAuY2h1LXRoaWNoIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAwMDAwOw0KICAgIA0KICAgICAgICB9IA0KICAgICAgICAvKiBLaHVuZyBjaMO6IHRow61jaCDhuqluICovDQogICAgICAgIC5jaHUtdGhpY2ggLm5vaS1kdW5nIHsNCiAgICAgICAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjsNCiAgICAgICAgICAgIHdpZHRoOiAyMDBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmY2M7DQogICAgICAgICAgICBjb2xvcjogIzMzMzsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICB6LWluZGV4OiAxOw0KICAgICAgICAgICAgYm90dG9tOiAxMjUlOw0KICAgICAgICAgICAgbGVmdDogNTAlOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOw0KICAgICAgICAgICAgb3BhY2l0eTogMDsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zczsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNmZmNjMDA7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjIpOw0KICAgICAgICB9DQogICAgICAgIC8qIEhp4buDbiB0aOG7iyBjaMO6IHRow61jaCBraGkgZGkgY2h14buZdCB2w6BvICovDQogICAgICAgIC5jaHUtdGhpY2g6aG92ZXIgLm5vaS1kdW5nIHsNCiAgICAgICAgICAgIHZpc2liaWxpdHk6IHZpc2libGU7DQogICAgICAgICAgICBvcGFjaXR5OiAxOw0KICAgICAgICB9DQogICAgICAgIC8qIE3FqWkgdMOqbiBuaOG7jyBwaMOtYSBkxrDhu5tpIGNow7ogdGjDrWNoICovDQogICAgICAgIC5jaHUtdGhpY2ggLm5vaS1kdW5nOjphZnRlciB7DQogICAgICAgICAgICBjb250ZW50OiAiIjsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRvcDogMTAwJTsNCiAgICAgICAgICAgIGxlZnQ6IDUwJTsNCiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAtNXB4Ow0KICAgICAgICAgICAgYm9yZGVyLXdpZHRoOiA1cHg7DQogICAgICAgICAgICBib3JkZXItc3R5bGU6IHNvbGlkOw0KICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjZmZmZmNjIHRyYW5zcGFyZW50IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50Ow0KICAgICAgICB9DQoJCSAgICAvKiBUaMOqbSBDU1MgbeG7m2kgY2hvIGLhuqNuZyBs4buXaSAyIGPhu5l0ICovDQogIC5lcnJvci10YWJsZSB7DQogICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgIG1hcmdpbi10b3A6IDIwcHg7DQogICAgfQ0KICAgIC5lcnJvci10YWJsZSB0aCwgLmVycm9yLXRhYmxlIHRkIHsNCiAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDsNCiAgICB9DQogICAgLmVycm9yLXRhYmxlIHRoIHsNCiAgICAgICAgYmFja2dyb3VuZDogI2YyZjJmMjsNCiAgICAgICAgcG9zaXRpb246IHN0aWNreTsNCiAgICAgICAgdG9wOiAwOw0KICAgIH0NCiAgICAuZXJyb3ItdGFibGUgLmVycm9yLXJvdyB7DQogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGY3ZmE7DQogICAgfQ0KICAgIC5lcnJvci10YWJsZSAuZXJyb3ItZGV0YWlsIHsNCiAgICAgICAgd2hpdGUtc3BhY2U6IG5vcm1hbCAhaW1wb3J0YW50Ow0KICAgICAgICBsaW5lLWhlaWdodDogMS41Ow0KICAgICAgICBwYWRkaW5nOiA4cHg7DQogICAgfQ0KICAgICNvcGVyYXRvckZpbHRlckVycm9yIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOw0KICAgIHBhZGRpbmc6IDEwcHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIG1hcmdpbi10b3A6IDEwcHg7DQp9DQojb3BlcmF0b3JGaWx0ZXJFcnJvciBsYWJlbCB7DQogICAgbWFyZ2luLXJpZ2h0OiAxMHB4Ow0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KDQojb3BlcmF0b3JGaWx0ZXJFcnJvciBzZWxlY3Qgew0KICAgIHBhZGRpbmc6IDhweDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICB3aWR0aDogMjUwcHg7DQp9DQovKiA9PT09PT09PT09PT09PT09PT09IFRSQU5HIFRSw40gTsOCTkcgQ+G6pFAgPT09PT09PT09PT09PT09PT09PSAqLw0KDQovKiBOw7p0IGLhuqVtIGNodW5nICovDQouYnRuIHsNCiAgYm9yZGVyLXJhZGl1czogNnB4ICFpbXBvcnRhbnQ7DQogIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2UtaW4tb3V0ICFpbXBvcnRhbnQ7DQp9DQouYnRuOmhvdmVyIHsNCiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpOw0KICBib3gtc2hhZG93OiAwIDRweCAxMHB4IHJnYmEoMCwwLDAsMC4yKTsNCn0NCi8qIELhuqNuZyBk4buvIGxp4buHdSAqLw0KdGFibGUsIC5lcnJvci10YWJsZSB7DQogIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwwLDAsMC4xKTsNCn0NCnRoIHsNCiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMzQ5OGRiLCAjMjk4MGI5KSAhaW1wb3J0YW50Ow0KICBjb2xvcjogI2ZmZiAhaW1wb3J0YW50Ow0KICBmb250LXdlaWdodDogYm9sZDsNCn0NCnRkIHsNCiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzIGVhc2UtaW4tb3V0Ow0KfQ0KdHI6aG92ZXIgdGQgew0KICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuMDMpOw0KfQ0KDQovKiBMaWdodCBNb2RlOiBM4buNYyBuZ8aw4budaSB0aOG7sWMgaGnhu4duICovDQojb3BlcmF0b3JGaWx0ZXIsICNvcGVyYXRvckZpbHRlckVycm9yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsNCiAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICBwYWRkaW5nOiAxMHB4Ow0KICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOw0KICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjEpOw0KICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLWluLW91dDsNCn0NCiNvcGVyYXRvckZpbHRlcjpob3ZlciwgI29wZXJhdG9yRmlsdGVyRXJyb3I6aG92ZXIgew0KICBib3JkZXItY29sb3I6ICMzNDk4ZGI7DQogIGJveC1zaGFkb3c6IDAgMCA4cHggcmdiYSg1MiwxNTIsMjE5LDAuNSk7DQp9DQojb3BlcmF0b3JTZWxlY3QsICNvcGVyYXRvclNlbGVjdEVycm9yIHsNCiAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOw0KICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLWluLW91dDsNCn0NCiNvcGVyYXRvclNlbGVjdDpob3ZlciwgI29wZXJhdG9yU2VsZWN0RXJyb3I6aG92ZXIgew0KICBib3JkZXItY29sb3I6ICMzNDk4ZGI7DQogIGJveC1zaGFkb3c6IDAgMCA2cHggcmdiYSg1MiwxNTIsMjE5LDAuNCk7DQp9DQovKiBEYXJrIE1vZGUgbsOibmcgY+G6pXAgKi8NCmJvZHkuZGFyay1tb2RlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzEyMTIxMiAhaW1wb3J0YW50Ow0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ow0KfQ0KYm9keS5kYXJrLW1vZGUgI29wZXJhdG9yRmlsdGVyLA0KYm9keS5kYXJrLW1vZGUgI29wZXJhdG9yRmlsdGVyRXJyb3Igew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmMyYzJjICFpbXBvcnRhbnQ7DQogIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7DQogIGJvcmRlcjogMXB4IHNvbGlkICM1NTUgIWltcG9ydGFudDsNCiAgYm9yZGVyLXJhZGl1czogOHB4ICFpbXBvcnRhbnQ7DQogIHBhZGRpbmc6IDEycHggIWltcG9ydGFudDsNCiAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuNCkgIWltcG9ydGFudDsNCiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZS1pbi1vdXQgIWltcG9ydGFudDsNCn0NCmJvZHkuZGFyay1tb2RlICNvcGVyYXRvckZpbHRlcjpob3ZlciwNCmJvZHkuZGFyay1tb2RlICNvcGVyYXRvckZpbHRlckVycm9yOmhvdmVyIHsNCiAgYm9yZGVyLWNvbG9yOiAjMDBiY2Q0ICFpbXBvcnRhbnQ7DQogIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwgMTg4LCAyMTIsIDAuNikgIWltcG9ydGFudDsNCn0NCmJvZHkuZGFyay1tb2RlICNvcGVyYXRvclNlbGVjdCwNCmJvZHkuZGFyay1tb2RlICNvcGVyYXRvclNlbGVjdEVycm9yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUxZSAhaW1wb3J0YW50Ow0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ow0KICBib3JkZXI6IDFweCBzb2xpZCAjNTU1ICFpbXBvcnRhbnQ7DQogIGJvcmRlci1yYWRpdXM6IDVweCAhaW1wb3J0YW50Ow0KICBwYWRkaW5nOiA4cHggMTBweCAhaW1wb3J0YW50Ow0KICBmb250LXdlaWdodDogYm9sZCAhaW1wb3J0YW50Ow0KICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLWluLW91dCAhaW1wb3J0YW50Ow0KfQ0KYm9keS5kYXJrLW1vZGUgI29wZXJhdG9yU2VsZWN0OmhvdmVyLA0KYm9keS5kYXJrLW1vZGUgI29wZXJhdG9yU2VsZWN0RXJyb3I6aG92ZXIgew0KICBib3JkZXItY29sb3I6ICMwMGJjZDQgIWltcG9ydGFudDsNCiAgYm94LXNoYWRvdzogMCAwIDhweCByZ2JhKDAsIDE4OCwgMjEyLCAwLjUpICFpbXBvcnRhbnQ7DQp9DQpib2R5LmRhcmstbW9kZSAubGlzdDEgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICMyYzNlNTA7DQogICAgYm9yZGVyLWNvbG9yOiAjMzQ0OTVlOw0KICAgIGNvbG9yOiAjZWNmMGYxOw0KfQ0KLmRvY3Rvci1jb2x1bW4gew0KICAgIGRpc3BsYXk6IG5vbmU7IC8qIE3hurdjIMSR4buLbmgg4bqpbiAqLw0KfQ0KDQouc2hvdy1kb2N0b3IgLmRvY3Rvci1jb2x1bW4gew0KICAgIGRpc3BsYXk6IHRhYmxlLWNlbGw7IC8qIEhp4buDbiB0aOG7iyBraGkgY8OzIGNsYXNzIHNob3ctZG9jdG9yICovDQp9DQogICAgaHRtbCB7DQogICAgICAgIHNjcm9sbC1iZWhhdmlvcjogc21vb3RoOw0KICAgIH0NCiAgICAvKiBIaeG7h3Ug4bupbmcgaGlnaGxpZ2h0IGtoaSBjdeG7mW4gdOG7m2kgKi8NCiAgICAuaGlnaGxpZ2h0LWVycm9yLXNlY3Rpb24gew0KICAgICAgICBhbmltYXRpb246IGhpZ2hsaWdodC1mYWRlIDJzIGVhc2Utb3V0Ow0KICAgIH0NCiAgICBAa2V5ZnJhbWVzIGhpZ2hsaWdodC1mYWRlIHsNCiAgICAgICAgMCUgew0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgNHB4IHJnYmEoNTIsIDE1MiwgMjE5LCAwLjcpOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg1MiwgMTUyLCAyMTksIDAuMSk7DQogICAgICAgIH0NCiAgICAgICAgMTAwJSB7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMCA0cHggcmdiYSg1MiwgMTUyLCAyMTksIDApOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg1MiwgMTUyLCAyMTksIDApOw0KICAgICAgICB9DQogICAgfQ0KCS8qIEPEg24gY2jhu4luaCBpY29uIHbDoCB0ZXh0IHRyb25nIHRpw6p1IMSR4buBICovDQp0aCBpIHsNCiAgICBtYXJnaW4tcmlnaHQ6IDhweDsNCiAgICBjb2xvcjogd2hpdGU7IC8qIE3DoHUgaWNvbiAqLw0KICAgIHdpZHRoOiAxNnB4Ow0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi8qIERhcmsgbW9kZSAqLw0KYm9keS5kYXJrLW1vZGUgdGggaSB7DQogICAgY29sb3I6ICMwMGJjZDQ7DQp9DQovKiBIaeG7h3Ug4bupbmcga2hpIGhvdmVyICovDQp0aDpob3ZlciBpIHsNCiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7DQogICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnMgZWFzZTsNCn0NCiAgLyogVGjDqm0gdsOgbyBwaOG6p24gc3R5bGUgKi8NCiAgICAuZmEtc3Bpbi1jb250aW51b3VzIHsNCiAgICAgICAgYW5pbWF0aW9uOiBmYS1zcGluIDJzIGluZmluaXRlIGxpbmVhcjsNCiAgICB9DQogICAgQGtleWZyYW1lcyBmYS1zcGluIHsNCiAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfQ0KICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfQ0KICAgIH0NCgkudGltZS1zdWdnZXN0aW9uIHN0cm9uZyB7DQogICAgY29sb3I6ICMyYzNlNTA7DQogICAgZm9udC13ZWlnaHQ6IDYwMDsNCn0NCg0KLmRhcmstbW9kZSAudGltZS1zdWdnZXN0aW9uIHN0cm9uZyB7DQogICAgY29sb3I6ICMwMGJjZDQ7DQp9DQoudGltZS1zdWdnZXN0aW9uIHsNCiAgICBsaW5lLWhlaWdodDogMS42Ow0KfQ0KLyogPT09PT09PSBUT0FTVCAmIERBU0hCT0FSRCA9PT09PT09ICovDQoudG9hc3Qgew0KICB2aXNpYmlsaXR5OiBoaWRkZW47DQogIG1pbi13aWR0aDogMjUwcHg7DQogIG1hcmdpbi1sZWZ0OiAtMTI1cHg7DQogIGJhY2tncm91bmQtY29sb3I6ICMzMzM7DQogIGNvbG9yOiAjZmZmOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgcGFkZGluZzogMTRweDsNCiAgcG9zaXRpb246IGZpeGVkOw0KICB6LWluZGV4OiA5OTk5Ow0KICBsZWZ0OiA1MCU7DQogIGJvdHRvbTogMzBweDsNCiAgZm9udC1zaXplOiAxNnB4Ow0KICBvcGFjaXR5OiAwOw0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNXMsIGJvdHRvbSAwLjVzOw0KfQ0KLnRvYXN0LnNob3cgew0KICB2aXNpYmlsaXR5OiB2aXNpYmxlOw0KICBvcGFjaXR5OiAxOw0KICBib3R0b206IDUwcHg7DQp9DQouZGFzaGJvYXJkIHsNCiAgZGlzcGxheTogZmxleDsNCiAgZ2FwOiAxMHB4Ow0KICBtYXJnaW46IDEwcHggMDsNCn0NCi5kYXNoYm9hcmQgLmNhcmQgew0KICBmbGV4OiAxOw0KICBiYWNrZ3JvdW5kOiAjZjhmOWZhOw0KICBib3JkZXItcmFkaXVzOiA2cHg7DQogIHBhZGRpbmc6IDEwcHg7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgZm9udC13ZWlnaHQ6IGJvbGQ7DQp9DQoNCiAgYm9keS5kYXJrLW1vZGUgI3BhdGllbnRDb3VudGVyIHsNCiAgICBjb2xvcjogIzAwYmNkNDsNCiAgfQ0KI2hlcmJPdXRsaWVyTW9kYWxbc3R5bGUqPSJkaXNwbGF5Il0gKyBiciwNCiNoZXJiT3V0bGllck1vZGFsW3N0eWxlKj0iZGlzcGxheSJdICsgYnIgKyBiciB7DQogIGRpc3BsYXk6IG5vbmU7DQp9DQoNCi5oZXJiLW91dGxpZXIgdGQgew0KICAgIGJhY2tncm91bmQtY29sb3I6I2ZmZGRkZCAhaW1wb3J0YW50Ow0KICAgIGNvbG9yOiNiNzFjMWMgIWltcG9ydGFudDsNCiAgICBmb250LXdlaWdodDo2MDA7DQogIH0NCiAgDQogDQovKiBEYXJrIG1vZGUgY2hvIGtodSB24buxYyBtYWluYmxvayAodXBsb2FkICsgdMO5eSBjaOG7jW4pICovDQpib2R5LmRhcmstbW9kZSAubWFpbmJsb2sgew0KICBiYWNrZ3JvdW5kOiAjMWUxZTFlICFpbXBvcnRhbnQ7DQogIGJvcmRlcjogMnB4IHNvbGlkICM1NTUgIWltcG9ydGFudDsNCiAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDsNCiAgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLDE4OCwyMTIsMC4yNSk7IC8qIG5o4bq5LCDEkeG7k25nIGLhu5kgdGhlbWUgKi8NCiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzIGVhc2UsIGJvcmRlci1jb2xvciAwLjJzIGVhc2U7DQp9DQoNCi8qIEPDoWMgY29udHJvbCBiw6puIHRyb25nIG1haW5ibG9rICovDQpib2R5LmRhcmstbW9kZSAubWFpbmJsb2sgaW5wdXQsDQpib2R5LmRhcmstbW9kZSAubWFpbmJsb2sgc2VsZWN0LA0KYm9keS5kYXJrLW1vZGUgLm1haW5ibG9rIGJ1dHRvbiB7DQogIGJhY2tncm91bmQ6ICMyYzJjMmMgIWltcG9ydGFudDsNCiAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDsNCiAgYm9yZGVyOiAxcHggc29saWQgIzY2NiAhaW1wb3J0YW50Ow0KfQ0KDQovKiBEYXJrIG1vZGU6IHRvb2x0aXAg4bufIG3hu41pIG7GoWkgKHRpw6p1IMSR4buBICYgbuG7mWkgZHVuZykgKi8NCmJvZHkuZGFyay1tb2RlIC5jaHUtdGhpY2ggLm5vaS1kdW5nIHsNCiAgYmFja2dyb3VuZDogIzJjM2U1MCAhaW1wb3J0YW50OyAgLyogxJHhu5VpIHNhbmcgbuG7gW4gdOG7kWkgZOG7hSDEkeG7jWM7IG114buRbiBnaeG7ryBu4buBbiB2w6BuZyB0aMOsIHjDs2EgZMOybmcgbsOgeSAqLw0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50OyAgICAgICAgLyogbuG6v3UgZ2nhu68gbuG7gW4gdsOgbmcsIMSR4buVaSB0aMOgbmggIzAwMCAhaW1wb3J0YW50ICovDQogIGJvcmRlcjogMXB4IHNvbGlkICMwMGJjZDQgIWltcG9ydGFudDsNCn0NCg0KIDwvc3R5bGU+DQo8c2NyaXB0Pg0KICAgIGFzeW5jIGZ1bmN0aW9uIGNoZWNrQWNjZXNzKCkgew0KICAgICAgICBjb25zdCBqc29uVXJsID0gJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9jaGF1aHV5bmgwMTA0L2NoYXVodXluaDAxMDQudHh0L3JlZnMvaGVhZHMvbWFpbi9kcmNoYXUuanNvbic7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChqc29uVXJsICsgJz92PScgKyBEYXRlLm5vdygpKTsNCiAgICAgICAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoJ0tow7RuZyB0aOG7gyB04bqjaSBmaWxlIEpTT04nKTsNCiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IGF3YWl0IHJlcy5qc29uKCk7DQoNCiAgICAgICAgICAgIGlmICghY29uZmlnLkFDQ0VTU19BTExPV0VEKSB7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0icGFkZGluZzo1MHB4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOnJlZDtmb250LXNpemU6MjBweCI+DQogICAgICAgICAgICAgICAgICAgIDxoMj5C4bqiTyBUUsOMIEjhu4YgVEjhu5BORzwvaDI+DQogICAgICAgICAgICAgICAgICAgIDxwPiR7Y29uZmlnLk1FU1NBR0V9PC9wPg0KICAgICAgICAgICAgICAgICAgICAke2NvbmZpZy5SRURJUkVDVF9VUkwgPyBgPHA+U+G6vSBjaHV54buDbiBoxrDhu5tuZyBzYXUgPHNwYW4gaWQ9J2NvdW50ZG93bic+NTwvc3Bhbj4gZ2nDonkuLi48L3A+YCA6ICcnfQ0KICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5SRURJUkVDVF9VUkwpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHNlY29uZHMgPSA1Ow0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHMtLTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb3VudGRvd24nKS5pbm5lclRleHQgPSBzZWNvbmRzOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZHMgPD0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gY29uZmlnLlJFRElSRUNUX1VSTDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gYDxkaXYgc3R5bGU9J3BhZGRpbmc6NTBweDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjpyZWQnPg0KICAgICAgICAgICAgICAgIDxoMj5LSMOUTkcgVOG6okkgxJDGr+G7okMgQ+G6pFUgSMOMTkg8L2gyPjxwPkzhu5dpIHRydXkgY+G6rXAga2hpIGvhur90IG7hu5FpIG3huqFuZy48YnIvPiBWdWkgbMOybmcga2nhu4NtIHRyYSBs4bqhaSDEkcaw4budbmcgdHJ1eeG7gW4gaW50ZXJuZXQuPC9wPg0KICAgICAgICAgICAgPC9kaXY+YDsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRBY2NvdW50c0Zyb21UWFQoKSB7DQogICAgICAgIGNvbnN0IHR4dFVybCA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY2hhdWh1eW5oMDEwNC9jaGF1aHV5bmgwMTA0LnR4dC9yZWZzL2hlYWRzL21haW4vdGtrLnR4dCc7DQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHR4dFVybCArICc/dj0nICsgRGF0ZS5ub3coKSk7DQogICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICBjb25zdCBhY2NvdW50cyA9IHt9Ow0KICAgICAgICB0ZXh0LnNwbGl0KCdcbicpLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICBjb25zdCBbdSwgcF0gPSBsaW5lLnRyaW0oKS5zcGxpdCgnOicpOw0KICAgICAgICAgICAgaWYgKHUgJiYgcCkgYWNjb3VudHNbdV0gPSBwOw0KICAgICAgICB9KTsNCiAgICAgICAgcmV0dXJuIGFjY291bnRzOw0KICAgIH0NCg0KICAgIGFzeW5jIGZ1bmN0aW9uIGVuYWJsZUxvZ2luKGFjY291bnRzKSB7DQogICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbkJ0bicpOw0KICAgICAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcm5hbWVJbnB1dCcpOw0KICAgICAgICBjb25zdCBwYXNzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRJbnB1dCcpOw0KICAgICAgICBjb25zdCBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbkVycm9yJyk7DQoNCiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgdXNlciA9IHVzZXJJbnB1dC52YWx1ZS50cmltKCk7DQogICAgICAgICAgICBjb25zdCBwYXNzID0gcGFzc0lucHV0LnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIGlmIChhY2NvdW50c1t1c2VyXSAmJiBhY2NvdW50c1t1c2VyXSA9PT0gcGFzcykgew0KICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ21lZFVzZXInLCB1c2VyKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2xvZ2luLXBhZ2UnKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5TZWN0aW9uJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkNvbnRlbnQnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkgew0KZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3dNb3JlU3VnZ2VzdGlvbnNDaGVja2JveCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKCkgew0KICAgIGlmIChhbGxQcm9jZWR1cmVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgZ2VuZXJhdGVUaW1lU3VnZ2VzdGlvbnMoYWxsUHJvY2VkdXJlcyk7DQogICAgICAgIGZpbHRlckJ5T3BlcmF0b3IoKTsNCiAgICB9DQp9KTsNCn0pOw0KDQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhc3luYyAoKSA9PiB7DQogICAgICAgIGNvbnN0IGFsbG93ID0gYXdhaXQgY2hlY2tBY2Nlc3MoKTsNCiAgICAgICAgaWYgKCFhbGxvdykgcmV0dXJuOw0KICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGxvYWRBY2NvdW50c0Zyb21UWFQoKTsNCgkJIGF3YWl0IFByb21pc2UuYWxsKFsNCiAgICBsb2FkUHJvY2VkdXJlcygpLA0KICAgIGxvYWRDb25mbGljdFJ1bGVzKCkNCl0pOw0KICAgICAgICBjb25zdCBzYXZlZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ21lZFVzZXInKTsNCiAgICAgICAgaWYgKHNhdmVkICYmIGFjY291bnRzW3NhdmVkXSkgew0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luU2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkNvbnRlbnQnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpblNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgIGVuYWJsZUxvZ2luKGFjY291bnRzKTsNCiAgICAgICAgfQ0KICAgIH0pOw0KPC9zY3JpcHQ+DQo8c3R5bGU+DQogIGJvZHkuZGFyay1tb2RlICNsb2FkaW5nUG9wdXAgew0KICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTsNCiAgfQ0KICBib2R5LmRhcmstbW9kZSAjbG9hZGluZ1BvcHVwIGRpdiB7DQogICAgYmFja2dyb3VuZDogIzFlMWUxZSAhaW1wb3J0YW50Ow0KICAgIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7DQogICAgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLCAxODgsIDIxMiwgMC4zKTsNCiAgfQ0KDQogIGJvZHkuZGFyay1tb2RlICNwYXRpZW50Q291bnRlciB7DQogICAgY29sb3I6ICMwMGJjZDQ7DQogIH0NCjwvc3R5bGU+DQo8c3R5bGU+DQogIC8qIEhp4buHdSDhu6luZyBtxrDhu6N0ICovDQogICNsb2FkaW5nUG9wdXAgew0KICAgIG9wYWNpdHk6IDA7DQogICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjVzIGVhc2U7DQogIH0NCiAgI2xvYWRpbmdQb3B1cC5zaG93IHsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQogIC8qIFByb2dyZXNzIGJhciAqLw0KICAjcHJvZ3Jlc3NCYXJDb250YWluZXIgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGJhY2tncm91bmQ6ICNkZGQ7DQogICAgaGVpZ2h0OiA2cHg7DQogICAgbWFyZ2luLXRvcDogMjBweDsNCiAgICBib3JkZXItcmFkaXVzOiAzcHg7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgfQ0KICAjcHJvZ3Jlc3NCYXIgew0KICAgIHdpZHRoOiAwJTsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgYmFja2dyb3VuZDogIzM0OThkYjsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjVzIGVhc2U7DQogIH0NCiAgYm9keS5kYXJrLW1vZGUgI3Byb2dyZXNzQmFyQ29udGFpbmVyIHsNCiAgICBiYWNrZ3JvdW5kOiAjNTU1Ow0KICB9DQogIGJvZHkuZGFyay1tb2RlICNwcm9ncmVzc0JhciB7DQogICAgYmFja2dyb3VuZDogIzAwYmNkNDsNCiAgfQ0KDQogIGJvZHkuZGFyay1tb2RlICNwYXRpZW50Q291bnRlciB7DQogICAgY29sb3I6ICMwMGJjZDQ7DQogIH0NCjwvc3R5bGU+DQo8c3R5bGU+DQouc2Nyb2xsaW5nLXRleHQgew0KICBvdmVyZmxvdzogaGlkZGVuOw0KICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCi5zY3JvbGxpbmctdGV4dCBzcGFuIHsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBwYWRkaW5nLWxlZnQ6IDAlOyAvKiByZW1vdmUgaW5pdGlhbCBibGFuayBzcGFjZSAqLw0KICBhbmltYXRpb246IHNjcm9sbC1sZWZ0IDhzIGxpbmVhciBpbmZpbml0ZTsgLyogZmFzdGVyIHNjcm9sbCAqLw0KfQ0KDQpAa2V5ZnJhbWVzIHNjcm9sbC1sZWZ0IHsNCiAgMCUgew0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTsNCiAgfQ0KICAxMDAlIHsNCiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwMCUpOw0KICB9DQp9DQo8L3N0eWxlPg0KDQo8IS0tIFRIRU1FIEFDQ0VOVCBWQVJTIChBVVRPLUlOSkVDVEVEKSAtLT4NCjxzdHlsZSBpZD0idGhlbWUtYWNjZW50LXZhcnMiPg0KICA6cm9vdCB7DQogICAgLS1hY2NlbnQ6ICMzNDk4ZGI7DQogICAgLS1hY2NlbnQtaG92ZXI6ICMyOTgwYjk7DQogICAgLS1hY2NlbnQtYm9yZGVyOiAjMzQ5OGRiOw0KICB9DQogIGJvZHkudGhlbWUtZGVmYXVsdCB7IC0tYWNjZW50OiMzNDk4ZGI7IC0tYWNjZW50LWhvdmVyOiMyOTgwYjk7IC0tYWNjZW50LWJvcmRlcjojMzQ5OGRiOyB9DQogIGJvZHkudGhlbWUtb3JhbmdlICB7IC0tYWNjZW50OiNGRjY2MDA7IC0tYWNjZW50LWhvdmVyOiNlNjVjMDA7IC0tYWNjZW50LWJvcmRlcjojRkY2NjAwOyB9DQogIGJvZHkudGhlbWUtcmVkICAgICB7IC0tYWNjZW50OiNGRjAwMDA7IC0tYWNjZW50LWhvdmVyOiNjYzAwMDA7IC0tYWNjZW50LWJvcmRlcjojRkYwMDAwOyB9DQogIGJvZHkudGhlbWUtZ3JlZW4gICB7IC0tYWNjZW50OiMwMEFBMDA7IC0tYWNjZW50LWhvdmVyOiMwMDg4MDA7IC0tYWNjZW50LWJvcmRlcjojMDBBQTAwOyB9DQoNCiAgLyogw4FwIGThu6VuZyBiaeG6v24gbMOqbiBjw6FjIHRow6BuaCBwaOG6p24gY2jDrW5oICovDQogIC5idG4geyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1hY2NlbnQpICFpbXBvcnRhbnQ7IGNvbG9yOiNmZmYgIWltcG9ydGFudDsgfQ0KICAuYnRuOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYWNjZW50LWhvdmVyKSAhaW1wb3J0YW50OyB9DQogIC51cGxvYWQtc2VjdGlvbiB7IGJvcmRlci1jb2xvcjogdmFyKC0tYWNjZW50LWJvcmRlcikgIWltcG9ydGFudDsgfQ0KICAjc2NhblN0YXR1cyB7IGNvbG9yOiB2YXIoLS1hY2NlbnQtYm9yZGVyKSAhaW1wb3J0YW50OyB9DQogIHRoIHsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLHZhcigtLWFjY2VudCksdmFyKC0tYWNjZW50LWhvdmVyKSkgIWltcG9ydGFudDsgfQ0KICAjb3BlcmF0b3JGaWx0ZXI6aG92ZXIsICNvcGVyYXRvckZpbHRlckVycm9yOmhvdmVyIHsNCiAgICBib3JkZXItY29sb3I6IHZhcigtLWFjY2VudC1ib3JkZXIpICFpbXBvcnRhbnQ7DQogICAgYm94LXNoYWRvdzogMCAwIDhweCByZ2JhKDAsMCwwLDAuMTUpLDAgMCA4cHggdmFyKC0tYWNjZW50LWJvcmRlcikgIWltcG9ydGFudDsNCiAgfQ0KICAuaGlnaGxpZ2h0LWVycm9yLXNlY3Rpb24gew0KICAgIGJveC1zaGFkb3c6IDAgMCAwIDRweCB2YXIoLS1hY2NlbnQtYm9yZGVyKSAhaW1wb3J0YW50Ow0KICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC4wMikgIWltcG9ydGFudDsNCiAgfQ0KICAudGltZS1zdWdnZXN0aW9uIHN0cm9uZyB7IGNvbG9yOiB2YXIoLS1hY2NlbnQtaG92ZXIpICFpbXBvcnRhbnQ7IH0NCjwvc3R5bGU+DQoNCjwvaGVhZD4NCjxib2R5Pg0KPCEtLSBUSEVNRSBQSUNLRVIgLS0+DQo8ZGl2IGlkPSJ0aGVtZVBpY2tlciIgY2xhc3M9InRoZW1lLXBpY2tlciIgdGl0bGU9IkNo4buNbiBtw6B1IGNo4bunIMSR4buBIGdpYW8gZGnhu4duIj4NCiANCiANCiAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJ0aGVtZS1zd2F0Y2giIGRhdGEtdGhlbWU9ImRlZmF1bHQiIHN0eWxlPSItLXN3YXRjaDojMzQ5OGRiIiBhcmlhLWxhYmVsPSJN4bq3YyDEkeG7i25oIChYYW5oIGTGsMahbmcpIj48L2J1dHRvbj4NCiAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJ0aGVtZS1zd2F0Y2giIGRhdGEtdGhlbWU9Im9yYW5nZSIgIHN0eWxlPSItLXN3YXRjaDojRkY2NjAwIiBhcmlhLWxhYmVsPSJNw6B1IGNhbSI+PC9idXR0b24+DQogIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0idGhlbWUtc3dhdGNoIiBkYXRhLXRoZW1lPSJyZWQiICAgICBzdHlsZT0iLS1zd2F0Y2g6I0ZGMDAwMCIgYXJpYS1sYWJlbD0iTcOgdSDEkeG7jyI+PC9idXR0b24+DQogIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0idGhlbWUtc3dhdGNoIiBkYXRhLXRoZW1lPSJncmVlbiIgICBzdHlsZT0iLS1zd2F0Y2g6IzAwQUEwMCIgYXJpYS1sYWJlbD0iTcOgdSB4YW5oIGzDoSI+PC9idXR0b24+DQogICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9ImRhcmtUb2dnbGUiIGNsYXNzPSJ0aGVtZS1kYXJrLXRvZ2dsZSIgb25jbGljaz0idG9nZ2xlRGFya01vZGUoKSIgYXJpYS1sYWJlbD0iQuG6rXQvVOG6r3QgY2jhur8gxJHhu5kgdOG7kWkiPg0KICAgIDxzcGFuIGlkPSJkYXJrSWNvbiI+PHNtYWxsPvCfjJk8L3NtYWxsPjwvc3Bhbj4gPHNwYW4gaWQ9ImRhcmtUZXh0Ij5U4buRaTwvc3Bhbj4NCiAgPC9idXR0b24+DQogIA0KPC9kaXY+DQoNCjxzdHlsZT4NCiAgI3RoZW1lUGlja2VyLnRoZW1lLXBpY2tlciB7DQogICAgcG9zaXRpb246YWJzb2x1dGU7DQogICAgdG9wOjIwcHg7IGxlZnQ6MTBweDsNCiAgICB6LWluZGV4OjEwMDAwOw0KICAgIGRpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo0cHg7Zm9udC1zaXplOjE0cHg7Zm9udC1mYW1pbHk6SW50ZXIsc2Fucy1zZXJpZjsNCiAgICBwYWRkaW5nOjRweCA4cHg7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LC44NSk7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2JvcmRlci1yYWRpdXM6NnB4Ow0KICB9DQogIGJvZHkuZGFyay1tb2RlICN0aGVtZVBpY2tlci50aGVtZS1waWNrZXIgew0KICAgIGJhY2tncm91bmQ6cmdiYSgwLDAsMCwuNik7Ym9yZGVyLWNvbG9yOiM2NjY7Y29sb3I6I2ZmZjsNCiAgfQ0KICAjdGhlbWVQaWNrZXIgLnRoZW1lLXN3YXRjaHsNCiAgICB3aWR0aDoyMHB4O2hlaWdodDoyMHB4O3BhZGRpbmc6MDttYXJnaW46MDtib3JkZXI6MnB4IHNvbGlkICNmZmY7Ym9yZGVyLXJhZGl1czo1MCU7Y3Vyc29yOnBvaW50ZXI7DQogICAgYmFja2dyb3VuZDp2YXIoLS1zd2F0Y2gpO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2xpbmUtaGVpZ2h0OjA7b3V0bGluZTpub25lOw0KICB9DQogICN0aGVtZVBpY2tlciAudGhlbWUtc3dhdGNoOmZvY3Vze291dGxpbmU6MnB4IHNvbGlkICMwMDA7fQ0KICBib2R5LmRhcmstbW9kZSAjdGhlbWVQaWNrZXIgLnRoZW1lLXN3YXRjaHtib3JkZXItY29sb3I6IzAwMDt9DQogICN0aGVtZVBpY2tlciAudGhlbWUtc3dhdGNoLmlzLWFjdGl2ZXtib3gtc2hhZG93OjAgMCAwIDJweCAjMDAwIGluc2V0LDAgMCAwIDRweCAjZmZmO30NCiAgYm9keS5kYXJrLW1vZGUgI3RoZW1lUGlja2VyIC50aGVtZS1zd2F0Y2guaXMtYWN0aXZle2JveC1zaGFkb3c6MCAwIDAgMnB4ICNmZmYgaW5zZXQsMCAwIDAgNHB4ICMwMDA7fQ0KPC9zdHlsZT4NCjxzdHlsZT4NCiAgLyogRGFyayB0b2dnbGUgaW5zaWRlIHRoZW1lUGlja2VyICovDQogICN0aGVtZVBpY2tlciAudGhlbWUtZGFyay10b2dnbGV7DQogICAgZm9udC1mYW1pbHk6J0ludGVyJyxzYW5zLXNlcmlmOw0KICAgIGRpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo0cHg7DQogICAgcGFkZGluZzoycHggNnB4Ow0KICAgIGZvbnQtc2l6ZToxMnB4Ow0KICAgIGJvcmRlcjpub25lOw0KICAgIGJhY2tncm91bmQ6dHJhbnNwYXJlbnQ7DQogICAgY29sb3I6aW5oZXJpdDsNCiAgICBjdXJzb3I6cG9pbnRlcjsNCiAgfQ0KICAjdGhlbWVQaWNrZXIgLnRoZW1lLWRhcmstdG9nZ2xlOmhvdmVyew0KICAgIHRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7DQogIH0NCiAgI3RoZW1lUGlja2VyIC50aGVtZS1kYXJrLXRvZ2dsZSAjZGFya0ljb257Zm9udC1zaXplOjE2cHg7bGluZS1oZWlnaHQ6MTt9DQogIC8qIEhpZGUgbGVnYWN5IGZsb2F0aW5nIGRhcmsgdG9nZ2xlIGJ1dHRvbiBpZiBzdGlsbCBwcmVzZW50ICovDQogIC5kYXJrLXRvZ2dsZS1idG57ZGlzcGxheTpub25lIWltcG9ydGFudDt9DQo8L3N0eWxlPg0KDQoNCjxzdHlsZT4NCiAgYm9keS5kYXJrLW1vZGUgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICMxMjEyMTI7DQogICAgY29sb3I6ICNmZmZmZmY7DQogIH0NCmJvZHkuZGFyay1tb2RlLCANCmJvZHkuZGFyay1tb2RlICogew0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ow0KfQ0KYm9keS5kYXJrLW1vZGUgc2VsZWN0LA0KYm9keS5kYXJrLW1vZGUgb3B0aW9uIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUxZSAhaW1wb3J0YW50Ow0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ow0KfQ0KICBib2R5LmRhcmstbW9kZSAuY29udGFpbmVyLA0KICBib2R5LmRhcmstbW9kZSAudXBsb2FkLXNlY3Rpb24sDQogIGJvZHkuZGFyay1tb2RlIC5sb2dpbi1zZWN0aW9uLA0KICBib2R5LmRhcmstbW9kZSAucHJvY2VkdXJlLWluZm8sDQogIGJvZHkuZGFyay1tb2RlIC5vcHRpb24tc2VjdGlvbiwNCiAgYm9keS5kYXJrLW1vZGUgLnRpbWUtb3B0aW9ucywNCiAgYm9keS5kYXJrLW1vZGUgLmZpbGUtcmVxdWlyZW1lbnRzLA0KICBib2R5LmRhcmstbW9kZSAudGFibGUtY29udGFpbmVyLA0KICBib2R5LmRhcmstbW9kZSB0YWJsZSwNCiAgYm9keS5kYXJrLW1vZGUgdGgsDQogIGJvZHkuZGFyay1tb2RlIHRkIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWUxZTFlICFpbXBvcnRhbnQ7DQogICAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDsNCiAgICBib3JkZXItY29sb3I6ICM0NDQgIWltcG9ydGFudDsNCiAgfQ0KICANCiAgLmRhcmstdG9nZ2xlLWJ0biB7DQogICAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7DQogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjMmMzZTUwLCAjNGNhMWFmKTsNCiAgICBmb250LXdlaWdodDogNjAwOw0KICAgIGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjIpOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBnYXA6IDZweDsNCg0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50Ow0KICAgIHRvcDogMjBweCAhaW1wb3J0YW50Ow0KICAgIGxlZnQ6IDIwcHggIWltcG9ydGFudDsNCiAgICB6LWluZGV4OiAxMDAwMCAhaW1wb3J0YW50Ow0KDQogICAgcGFkZGluZzogOHB4IDEycHg7DQogICAgYm9yZGVyOiBub25lOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICM0NDQ7DQogICAgY29sb3I6ICNmZmY7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgfQ0KDQoNCi8qID09PT09PT0gVE9BU1QgJiBEQVNIQk9BUkQgPT09PT09PSAqLw0KLnRvYXN0IHsNCiAgdmlzaWJpbGl0eTogaGlkZGVuOw0KICBtaW4td2lkdGg6IDI1MHB4Ow0KICBtYXJnaW4tbGVmdDogLTEyNXB4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzOw0KICBjb2xvcjogI2ZmZjsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBib3JkZXItcmFkaXVzOiA0cHg7DQogIHBhZGRpbmc6IDE0cHg7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgei1pbmRleDogOTk5OTsNCiAgbGVmdDogNTAlOw0KICBib3R0b206IDMwcHg7DQogIGZvbnQtc2l6ZTogMTZweDsNCiAgb3BhY2l0eTogMDsNCiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjVzLCBib3R0b20gMC41czsNCn0NCi50b2FzdC5zaG93IHsNCiAgdmlzaWJpbGl0eTogdmlzaWJsZTsNCiAgb3BhY2l0eTogMTsNCiAgYm90dG9tOiA1MHB4Ow0KfQ0KLmRhc2hib2FyZCB7DQogIGRpc3BsYXk6IGZsZXg7DQogIGdhcDogMTBweDsNCiAgbWFyZ2luOiAxMHB4IDA7DQp9DQouZGFzaGJvYXJkIC5jYXJkIHsNCiAgZmxleDogMTsNCiAgYmFja2dyb3VuZDogI2Y4ZjlmYTsNCiAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICBwYWRkaW5nOiAxMHB4Ow0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMSk7DQogIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KLm1haW5ibG9rIHsNCiAgICBiYWNrZ3JvdW5kOiAjZWRmN2ZmOw0KICAgIGJvcmRlcjogMnB4IHNvbGlkICNmM2YzZjM7DQogICAgbWFyZ2luOiAwOw0KICAgIHBhZGRpbmc6IDJweCAycHggMnB4IDJweDsNCiAgICB9DQoubGlzdDEgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZhZjA7DQogICAgYm9yZGVyOiAycHggZGFzaGVkICNmZmNmNjY7DQogICAgbWFyZ2luLWJvdHRvbTogNXB4Ow0KICAgIHBhZGRpbmc6IDVweDsNCn0NCg0KICBib2R5LmRhcmstbW9kZSAjcGF0aWVudENvdW50ZXIgew0KICAgIGNvbG9yOiAjMDBiY2Q0Ow0KICB9DQoNCg0KLmhlcmItcm93IHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBmN2ZhICFpbXBvcnRhbnQ7DQp9DQogLmhlcmItb3V0bGllciB0ZCB7DQogICAgYmFja2dyb3VuZDojZmZkZGRkICFpbXBvcnRhbnQ7DQogICAgY29sb3I6I2I3MWMxYyAhaW1wb3J0YW50Ow0KICAgIGZvbnQtd2VpZ2h0OjYwMDsNCiAgfQ0KICAjaGVyYk91dGxpZXJTdW1tYXJ5IGEgew0KICAgIGNvbG9yOiNkMzJmMmY7DQogICAgZm9udC13ZWlnaHQ6NjAwOw0KICAgIHRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7DQogICAgY3Vyc29yOnBvaW50ZXI7DQogIH0NCiAgYm9keS5kYXJrLW1vZGUgLmhlcmItb3V0bGllciB0ZCB7DQogICAgYmFja2dyb3VuZDojNWMxZjFmICFpbXBvcnRhbnQ7DQogICAgY29sb3I6I2ZmOGE4MCAhaW1wb3J0YW50Ow0KICB9DQogIGJvZHkuZGFyay1tb2RlICNoZXJiT3V0bGllclN1bW1hcnkgYSB7DQogICAgY29sb3I6I2ZmOGE4MCAhaW1wb3J0YW50Ow0KICB9DQouZGFyay1tb2RlICNoZXJiT3V0bGllck1vZGFsIFtyb2xlPSJkaWFsb2ciXSB7DQogIGJhY2tncm91bmQ6IzFlMWUxZSAhaW1wb3J0YW50Ow0KICBjb2xvcjojZjVmNWY1ICFpbXBvcnRhbnQ7DQogIGJvcmRlci1jb2xvcjojZmY2NjY2ICFpbXBvcnRhbnQ7DQp9DQoNCi8qIEtow7RuZyBn4bqhY2ggY2jDom4ga2hpIC5jaHUtdGhpY2ggZMO5bmcgY2hvIHRpw6p1IMSR4buBICovDQouY2h1LXRoaWNoLm5vLXVuZGVybGluZSwNCi5jaHUtdGhpY2gubm8tdW5kZXJsaW5lIGEgew0KICB0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsNCn0NCi8qIERBUksgTU9ERTogcG9wdXAgdGjhu6cgdGh14bqtdCBjaGkgdGnhur90ICovDQpib2R5LmRhcmstbW9kZSAjcHJvY2VkdXJlT3ZlcmxheSB7DQogIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC44KSAhaW1wb3J0YW50OyAvKiB04buRaSBoxqFuIGtoaSBi4bqtdCBkYXJrICovDQp9DQoNCmJvZHkuZGFyay1tb2RlICNwcm9jZWR1cmVQb3B1cCB7DQogIGJhY2tncm91bmQ6ICMxZTFlMWUgIWltcG9ydGFudDsNCiAgY29sb3I6ICNmNWY1ZjUgIWltcG9ydGFudDsNCiAgYm9yZGVyLWNvbG9yOiAjZmY2NjY2ICFpbXBvcnRhbnQ7ICAgICAgICAvKiB0deG7szogZ2nhu68gbcOgdSB4YW5oICMzNDk4ZGIgbuG6v3UgdGjDrWNoICovDQogIGJveC1zaGFkb3c6IDAgNXB4IDIwcHggcmdiYSgwLDAsMCwwLjYpICFpbXBvcnRhbnQ7DQp9DQoNCi8qIGNo4buvIHRpw6p1IMSR4buBIGLDqm4gdHJvbmcgKGtow7RuZyBi4bqvdCBideG7mWMsIGTDuW5nIG7hur91IG114buRbiDEkeG7lWkgbcOgdSByacOqbmcpICovDQpib2R5LmRhcmstbW9kZSAjcHJvY2VkdXJlUG9wdXAgaDMgew0KICBjb2xvcjogI2ZmOGE4MCAhaW1wb3J0YW50Ow0KfQ0KDQovKiBuw7p0IMSQw7NuZyB0cm9uZyBkYXJrIG1vZGUgKi8NCmJvZHkuZGFyay1tb2RlICNwcm9jZWR1cmVQb3B1cCAuYnRuIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmNjY2NiAhaW1wb3J0YW50Ow0KICBjb2xvcjogIzAwMCAhaW1wb3J0YW50Ow0KfQ0KLyogRGFyayBtb2RlIGNobyDDtCDEkcSDbmcgbmjhuq1wICovDQpib2R5LmRhcmstbW9kZSAubG9naW4tc2VjdGlvbiwNCmJvZHkuZGFyay1tb2RlIC5sb2dpbi1pbnB1dCB7DQogIGJhY2tncm91bmQtY29sb3I6ICMyYzJjMmMgIWltcG9ydGFudDsNCiAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDsNCiAgYm9yZGVyOiAxcHggc29saWQgIzY2NiAhaW1wb3J0YW50Ow0KfQ0KDQovKiBQbGFjZWhvbGRlciBk4buFIMSR4buNYyB0cm9uZyBkYXJrIG1vZGUgKi8NCmJvZHkuZGFyay1tb2RlIC5sb2dpbi1pbnB1dDo6cGxhY2Vob2xkZXIgew0KICBjb2xvcjogI2JiYmJiYiAhaW1wb3J0YW50Ow0KICBvcGFjaXR5OiAxOyAvKiBi4bqjbyDEkeG6o20ga2jDtG5nIGLhu4sgcXXDoSBt4budICovDQp9DQoNCi8qIENvbiB0cuG7jyBnw7UgY2jhu68gKGNhcmV0KSBjxaluZyBzw6FuZyAqLw0KYm9keS5kYXJrLW1vZGUgLmxvZ2luLWlucHV0IHsNCiAgY2FyZXQtY29sb3I6ICNmZmZmZmY7DQp9DQpib2R5LmRhcmstbW9kZSAjbG9hZGluZ1BvcHVwICNwcm9ncmVzc0JhciB7DQogIGJhY2tncm91bmQ6ICMwMGJjZDQgIWltcG9ydGFudDsgLyogdGhhbmggdGnhur9uIHRyw6xuaCAqLw0KfQ0KDQoudG9wLWJ1dHRvbi1ncm91cCB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAyMHB4Ow0KICByaWdodDogMjBweDsNCiAgZGlzcGxheTogZmxleDsNCiAgZ2FwOiAxMnB4Ow0KICB6LWluZGV4OiA5OTk5Ow0KfQ0KDQoudG9wLWJ1dHRvbi1ncm91cCAuYnRuIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzM0OThkYjsNCiAgY29sb3I6IHdoaXRlOw0KICBwYWRkaW5nOiAxMHB4IDE2cHg7DQogIGJvcmRlcjogbm9uZTsNCiAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICBmb250LXNpemU6IDE0cHg7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgYm94LXNoYWRvdzogMCAycHggNnB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7DQogIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlOw0KfQ0KDQoudG9wLWJ1dHRvbi1ncm91cCAuYnRuOmhvdmVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzI5ODBiOTsNCn0NCg0KDQoNCg0KPC9zdHlsZT4NCg0KPHNjcmlwdD4NCiAgICAgIGZ1bmN0aW9uIHRvZ2dsZURhcmtNb2RlKCkgew0KICAgICAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keTsNCiAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkYXJrSWNvbiIpOw0KICAgICAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRhcmtUZXh0Iik7DQogICAgICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgiZGFyay1tb2RlIik7DQogICAgICAgIGNvbnN0IGlzRGFyayA9IGJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCJkYXJrLW1vZGUiKTsNCiAgICAgICAgaWNvbi50ZXh0Q29udGVudCA9IGlzRGFyayA/ICLimIDvuI8iIDogIvCfjJkiOw0KICAgICAgICB0ZXh0LnRleHRDb250ZW50ID0gaXNEYXJrID8gIlPDoW5nIiA6ICJU4buRaSI7DQogICAgICB9DQogICAgPC9zY3JpcHQ+DQo8c2NyaXB0Pg0KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHsNCi8vIEzhuqV5IGPDoWMgcGjhuqduIHThu60NCiAgICAgICAgICAgIGNvbnN0IHRyaWdnZXJCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJpZ2dlckJ1dHRvbicpOw0KICAgICAgICAgICAgY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVJbnB1dCcpOw0KDQogICAgICAgICAgICAvLyBLaeG7g20gdHJhIHhlbSBwaOG6p24gdOG7rSBjw7MgdOG7k24gdOG6oWkga2jDtG5nDQogICAgICAgICAgICBpZiAoIXRyaWdnZXJCdXR0b24gfHwgIWZpbGVJbnB1dCkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0zhu5dpOiBLaMO0bmcgdMOsbSB0aOG6pXkgdHJpZ2dlckJ1dHRvbiBob+G6t2MgZmlsZUlucHV0Jyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBUaMOqbSBz4buxIGtp4buHbiBjbGljayBjaG8gYnV0dG9uDQogICAgICAgICAgICB0cmlnZ2VyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgIGZpbGVJbnB1dC5jbGljaygpOyAvLyBLw61jaCBob+G6oXQgaW5wdXQgZmlsZQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgfSk7DQoNCjwvc2NyaXB0Pg0KPGRpdiBjbGFzcz0iY29udGFpbmVyIj4NCjxkaXYgY2xhc3M9ImxvZ2luLXNlY3Rpb24iIGlkPSJsb2dpblNlY3Rpb24iPg0KPGgyIGNsYXNzPSJsb2dpbi10aXRsZSI+xJDEgk5HIE5I4bqsUCBI4buGIFRI4buQTkc8L2gyPg0KPGlucHV0IGNsYXNzPSJsb2dpbi1pbnB1dCIgaWQ9InVzZXJuYW1lSW5wdXQiIHBsYWNlaG9sZGVyPSJUw6puIMSRxINuZyBuaOG6rXAiIHR5cGU9InRleHQiLz4NCjxpbnB1dCBjbGFzcz0ibG9naW4taW5wdXQiIGlkPSJwYXNzd29yZElucHV0IiBwbGFjZWhvbGRlcj0iTeG6rXQga2jhuql1IiB0eXBlPSJwYXNzd29yZCIvPg0KPGJyLz48YnV0dG9uIGNsYXNzPSJidG4iIGlkPSJsb2dpbkJ0biI+xJDEg25nIG5o4bqtcDwvYnV0dG9uPg0KPGRpdiBjbGFzcz0ibG9naW4tZXJyb3IiIGlkPSJsb2dpbkVycm9yIj5Uw6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdSBraMO0bmcgxJHDum5nPC9kaXY+DQo8L2Rpdj4NCjxkaXYgY2xhc3M9Im1haW4tY29udGVudCIgaWQ9Im1haW5Db250ZW50Ij4NCjxkaXYgY2xhc3M9InRvcC1idXR0b24tZ3JvdXAiPg0KICA8YnV0dG9uIG9uY2xpY2s9IndpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsiIGNsYXNzPSJidG4iPlhvw6EgQ2FjaGU8L2J1dHRvbj4NCiAgPGJ1dHRvbiBjbGFzcz0iYnRuImlkPSJsb2dvdXRCdG4iPsSQxINuZyB4deG6pXQ8L2J1dHRvbj4NCjwvZGl2Pg0KDQoNCjxzcGFuIGNsYXNzPSJjaHUtdGhpY2giPjxoMT4gPGEgaHJlZj0iaHR0cHM6Ly9mYi5jb20vY2hhdWh1eW5oMDEwNCIgc3R5bGU9ImFsbDogdW5zZXQ7IGN1cnNvcjogcG9pbnRlcjsiIHRhcmdldD0iX2JsYW5rIj5LaeG7g20gVHJhIFRo4bunIFRodeG6rXQgWSBU4bq/PC9hPjwvaDE+PHNwYW4gY2xhc3M9Im5vaS1kdW5nIj5EZXNpZ24gQnkgQ2jDonUgSHXhu7NuaDwvc3Bhbj48L3NwYW4+DQo8ZGl2IGNsYXNzPSJsaXN0MSIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogOHB4OyI+DQo8aSBjbGFzcz0iZmEgZmEtYnVsbGhvcm4iPjwvaT4NCjxiPjxmb250IGNvbG9yPSJyZWQiPlRow7RuZyBiw6FvOjwvZm9udD48L2I+DQo8ZGl2IGNsYXNzPSJzY3JvbGxpbmctdGV4dCIgc3R5bGU9ImZsZXg6IDE7IG92ZXJmbG93OiBoaWRkZW47Ij4NCjxkaXYgY2xhc3M9InNjcm9sbGluZy1jb250ZW50IiBpZD0ibm9pZHVuZyI+DQoNCjwvZGl2Pg0KPC9kaXY+DQo8L2Rpdj4NCjxzY3JpcHQ+DQoNCg0KZmV0Y2goJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9jaGF1aHV5bmgwMTA0L2NoYXVodXluaDAxMDQudHh0L3JlZnMvaGVhZHMvbWFpbi90aG9uZ2Jhby50eHQnKQ0KICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpDQogIC50aGVuKGRhdGEgPT4gew0KICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vaWR1bmcnKTsNCiAgICBlbC5pbm5lckhUTUwgPSBkYXRhOw0KDQogICAgLy8gVMSDbmcgxJHhu5kgZMOgaSBu4buZaSBkdW5nIMSR4buDIMSR4bqjbSBi4bqjbyBjdeG7mW4NCiAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7DQogICAgZWwuc3R5bGUubWluV2lkdGggPSAnMTAwJSc7DQoNCiAgICAvLyBSZXNldCBhbmltYXRpb24gdG8gZm9yY2UgcmVmbG93DQogICAgZWwuc3R5bGUuYW5pbWF0aW9uID0gJ25vbmUnOw0KICAgIHZvaWQgZWwub2Zmc2V0V2lkdGg7DQogICAgZWwuc3R5bGUuYW5pbWF0aW9uID0gJ3Njcm9sbC1sZWZ0IDEwcyBsaW5lYXIgaW5maW5pdGUnOw0KICB9KQ0KICAuY2F0Y2goZXJyb3IgPT4gew0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub2lkdW5nJykudGV4dENvbnRlbnQgPSAnS2jDtG5nIHRo4buDIHThuqNpIG7hu5lpIGR1bmcuJzsNCiAgICBjb25zb2xlLmVycm9yKGVycm9yKTsNCiAgfSk7DQoNCg0KPC9zY3JpcHQ+DQo8ZGl2IGNsYXNzPSJ1cGxvYWQtc2VjdGlvbiI+PGRpdiBjbGFzcz0ibWFpbmJsb2siPg0KDQo8aW5wdXQgYWNjZXB0PSIueGxzeCwgLnhscywgLmNzdiIgaWQ9ImZpbGVJbnB1dCIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgdHlwZT0iZmlsZSIvPg0KPGJ1dHRvbiBjbGFzcz0iYnRuIiBpZD0idHJpZ2dlckJ1dHRvbiI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXVwbG9hZCI+PC9pPiBDaOG7jW4gZmlsZSB0aOG7pyBjw7RuZzwvYnV0dG9uPg0KPGJyLz48YnIvPg0KPGlucHV0IGRpcmVjdG9yeT0iIiBpZD0iZm9sZGVySW5wdXQiIG11bHRpcGxlPSIiIHN0eWxlPSJkaXNwbGF5Om5vbmUiIHR5cGU9ImZpbGUiIHdlYmtpdGRpcmVjdG9yeT0iIi8+DQo8YnV0dG9uIGNsYXNzPSJidG4iIGlkPSJmb2xkZXJCdG4iPjxpIGNsYXNzPSJmYXMgZmEtZm9sZGVyLW9wZW4iPjwvaT4gQ2jhu41uIHRoxrAgbeG7pWMgKFThu7EgxJHhu5luZyB0w6xtIGZpbGUpPC9idXR0b24+DQo8ZGl2IGlkPSJzY2FuU3RhdHVzIiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4O2NvbG9yOiMzNDk4ZGI7Zm9udC13ZWlnaHQ6Ym9sZCI+PC9kaXY+DQoNCg0KPGxhYmVsPg0KPGlucHV0IG5hbWU9InRpbWVPcHRpb24iIHR5cGU9InJhZGlvIiB2YWx1ZT0iNzowMCIvPiANCiAgICAgICAgICAgICAgICAgICAgICAgIEfhu6NpIMO9IHThu6sgMDc6MDANCiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4NCjxsYWJlbD4NCjxpbnB1dCBjaGVja2VkPSIiIG5hbWU9InRpbWVPcHRpb24iIHR5cGU9InJhZGlvIiB2YWx1ZT0iNzozMCIvPiANCiAgICAgICAgICAgICAgICAgICAgICAgIEfhu6NpIMO9IHThu6sgMDc6MzANCiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4NCjxici8+PGJyLz4NCg0KICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1yaWdodDogMTBweDsiPg0KPGlucHV0IGNoZWNrZWQ9IjEiIGlkPSJpZ25vcmVBZGphY2VudENoZWNrYm94IiB0eXBlPSJjaGVja2JveCIvPg0KPHNwYW4gY2xhc3M9ImNodS10aGljaCI+QuG7jyBxdWEgdGjhu6cgdGh14bqtdCBsaeG7gW4ga+G7gTxzcGFuIGNsYXNzPSJub2ktZHVuZyI+VkQ6IDhoMDAtOGgzMCB4b2EgYsOzcC4gMDhoMzAtMDhoNTAgxJFp4buHbiBjaMOibS4gbGnDqm4gdGnhur9wIG3DoCBrbyBjw6FjaCAxIHBow7p0IDwvc3Bhbj48L3NwYW4+DQo8L2xhYmVsPg0KDQogIDxsYWJlbCBzdHlsZT0ibWFyZ2luLXJpZ2h0OiAxMHB4OyI+DQo8aW5wdXQgaWQ9InNob3dNb3JlU3VnZ2VzdGlvbnNDaGVja2JveCIgdHlwZT0iY2hlY2tib3giLz4gDQogICAgICAgIEhp4buDbiB0aOG7iyA2IGtodW5nIGdp4budIGfhu6NpIMO9ICAgICAgICAgDQogICAgPC9sYWJlbD4NCg0KPGxhYmVsPg0KPGlucHV0IGlkPSJzaG93RG9jdG9yQ2hlY2tib3giIHR5cGU9ImNoZWNrYm94Ii8+IA0KICAgICAgICBIaeG7g24gdGjhu4sgQsOhYyBzxKkgY2jhu4kgxJHhu4tuaA0KICAgIDwvbGFiZWw+DQo8YnIvPjxici8+DQo8YnV0dG9uIGNsYXNzPSJidG4iIGlkPSJhbmFseXplQnRuIj5LaeG7g20gVHJhPC9idXR0b24+DQoNCg0KDQoNCg0KDQoNCg0KDQo8c2NyaXB0Pg0KZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVJbnB1dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHsNCiAgICBjb25zdCBmaWxlID0gdGhpcy5maWxlc1swXTsNCiAgICBpZiAoZmlsZSkgew0KICAgICAgICBjb25zdCBzdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NhblN0YXR1cycpOw0KICAgICAgICBzdGF0dXMuaW5uZXJIVE1MID0gYDxpIGNsYXNzPSJmYXMgZmEtZmlsZSI+PC9pPsSQw6MgY2jhu41uIGZpbGU6IDxiPiR7ZmlsZS5uYW1lfTwvYj5gOw0KICAgICAgICBzdGF0dXMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgIHN0YXR1cy5zdHlsZS5jb2xvciA9ICcjMmMzZTUwJzsNCiAgICB9DQp9KTsNCg0KPC9zY3JpcHQ+DQo8ZGl2IGlkPSJzY2FuU3RhdHVzIiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyBjb2xvcjojMmMzZTUwOyBmb250LXdlaWdodDpib2xkOyBkaXNwbGF5OiBub25lOyI+PC9kaXY+DQo8ZGl2IGlkPSJvcGVyYXRvckZpbHRlciIgc3R5bGU9Im1hcmdpbi10b3A6IDE1cHg7IGRpc3BsYXk6IG5vbmU7Ij4NCjxsYWJlbCBmb3I9Im9wZXJhdG9yU2VsZWN0Ij5M4buNYyB0aGVvIG5nxrDhu51pIHRo4buxYyBoaeG7h246PC9sYWJlbD4NCjxzZWxlY3QgY2xhc3M9ImxvZ2luLWlucHV0IiBpZD0ib3BlcmF0b3JTZWxlY3QiPg0KPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjPC9vcHRpb24+DQo8L3NlbGVjdD4NCjwvZGl2Pjxici8+DQo8c3BhbiBzdHlsZT0iZm9udC1zaXplOiAxMnB4OyI+PGk+UGjhuqduIG3hu4FtIMSRw7RpIGtoaSBjw7MgdGjhu4MgbeG6r2MgbOG7l2kuIFhpbiBow6N5IGtp4buDbSB0cmEgY8OhYyB0aMO0bmcgdGluIHF1YW4gdHLhu41uZy48L2k+PC9zcGFuPg0KPGRpdiBpZD0iZmlsZVJlcXVpcmVtZW50cyI+PC9kaXY+DQo8L2Rpdj48L2Rpdj4NCg0KPCEtLSBC4bquVCDEkOG6plU6IELhuqJORyBHSeG7nCBUUuG7kE5HIFThu6pORyBOR8av4bucSSAtLT4NCiAgPGJ1dHRvbiBpZD0iaGVyYlRvZ2dsZUJ0biIgY2xhc3M9ImJ0biIgb25jbGljaz0idG9nZ2xlSGVyYkxpc3QoKSJzdHlsZT0iZGlzcGxheTpub25lIj5T4bqvYyB0aHXhu5FjIHRoYW5nPC9idXR0b24+DQogIDxidXR0b24gY2xhc3M9ImJ0biIgb25jbGljaz0idG9nZ2xlQXZhaWxhYmlsaXR5KCkiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPkdp4budIHRy4buRbmc8L2J1dHRvbj4NCg0KPGRpdiBpZD0iYXZhaWxhYmlsaXR5VGFibGUiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBtYXJnaW4tYm90dG9tOiAyMHB4OyI+DQogIDxoMz5UaOG7kW5nIGvDqiBnaeG7nSB0cuG7kW5nIHThu6tuZyBuZ8aw4budaTwvaDM+DQogIDx0YWJsZSBjbGFzcz0iZXJyb3ItdGFibGUgaGVyYi10YWJsZSI+DQogICAgPHRoZWFkPg0KICAgICAgPHRyPg0KICAgICAgICA8dGg+TmfGsOG7nWkgdGjhu7FjIGhp4buHbjwvdGg+DQogICAgICAgIDx0aD5OZ8OgeTwvdGg+DQogICAgICAgIA0KICAgICAgICA8dGg+S2h1bmcgZ2nhu50gdHLhu5FuZyBideG7lWkgc8Ohbmc8L3RoPg0KICAgICAgICA8dGg+S2h1bmcgZ2nhu50gdHLhu5FuZyBideG7lWkgY2hp4buBdTwvdGg+DQogICAgICA8L3RyPg0KICAgIDwvdGhlYWQ+DQogICAgPHRib2R5IGlkPSJhdmFpbGFiaWxpdHlCb2R5Ij48L3Rib2R5Pg0KICA8L3RhYmxlPg0KPC9kaXY+DQo8IS0tIEvhur5UIFRIw5pDOiBC4bqiTkcgR0nhu5wgVFLhu5BORyBU4buqTkcgTkfGr+G7nEkgLS0+DQoNCg0KDQoNCjwhLS0gTsOaVCBISeG7gk4gVEjhu4ogVEjhu6YgVEhV4bqsVCBT4bquQyBUSFXhu5BDIC0tPg0KDQoNCiAgDQo8IS0tIELhuqJORyBUSOG7piBUSFXhuqxUIFPhuq5DIFRIVeG7kEMgVEhBTkcgLS0+DQo8ZGl2IGlkPSJoZXJiUHJvY2VkdXJlVGFibGUiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBtYXJnaW4tdG9wOiAyMHB4OyI+DQogIDxkaXYgY2xhc3M9Im1haW5ibG9rInN0eWxlPSJtYXJnaW4tYm90dG9tOiAxMHB4OyI+DQogICAgPGRpdj4NCiAgICA8c2VsZWN0IGlkPSJoZXJiRG9jdG9yRmlsdGVyIiBjbGFzcz0ibG9naW4taW5wdXQiIHN0eWxlPSJ3aWR0aDphdXRvOyBtYXJnaW4tbGVmdDogMjBweDsiPg0KICAgICAgPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjIGLDoWMgc8SpPC9vcHRpb24+DQogICAgPC9zZWxlY3Q+DQogICAgPHNlbGVjdCBpZD0iaGVyYkRhdGVGaWx0ZXIiIGNsYXNzPSJsb2dpbi1pbnB1dCIgc3R5bGU9IndpZHRoOmF1dG87Ij48L3NlbGVjdD4NCiAgPC9kaXY+PC9kaXY+DQoNCjwhLS0gVMOTTSBU4bquVCBPVVRMSUVSIC0tPg0KPGRpdiBpZD0iaGVyYk91dGxpZXJTdW1tYXJ5IiBzdHlsZT0iZGlzcGxheTpub25lO21hcmdpbjo4cHggMjBweDtmb250LXNpemU6MTRweCI+DQogIDwhLS0gbuG7mWkgZHVuZyBz4bq9IMSRxrDhu6NjIEpTIGPhuq1wIG5o4bqtdCAtLT4NCjwvZGl2Pg0KICA8dGFibGUgY2xhc3M9ImVycm9yLXRhYmxlIj4NCiAgICA8dGhlYWQ+DQogICAgICA8dHI+DQogICAgICAgIDx0aD5I4buNIHTDqm4gYuG7h25oIG5ow6JuPC90aD4NCiAgICAgICAgPHRoPlRo4bunIHRodeG6rXQ8L3RoPg0KICAgICAgICA8dGg+TmfDoHk8L3RoPg0KICAgICAgICA8dGg+VGjhu51pIGdpYW48L3RoPg0KICAgICAgICA8dGg+TmfGsOG7nWkgdGjhu7FjIGhp4buHbjwvdGg+DQogICAgICA8L3RyPg0KICAgIDwvdGhlYWQ+DQogICAgPHRib2R5IGlkPSJoZXJiVGFibGVCb2R5Ij48L3Rib2R5Pg0KICA8L3RhYmxlPg0KPC9kaXY+DQoNCg0KPCEtLSBQT1BVUCBEQU5IIFPDgUNIIE9VVExJRVIgU+G6rkMgVEhV4buQQyBUSEFORyAtLT4NCjxkaXYgaWQ9ImhlcmJPdXRsaWVyTW9kYWwiIHN0eWxlPSJkaXNwbGF5Om5vbmU7cG9zaXRpb246Zml4ZWQ7aW5zZXQ6MDt6LWluZGV4OjExMDAwIj4NCiAgPGRpdiBpZD0iaGVyYk91dGxpZXJCYWNrZHJvcCIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSkiPjwvZGl2Pg0KICA8ZGl2IHJvbGU9ImRpYWxvZyIgYXJpYS1tb2RhbD0idHJ1ZSINCiAgICAgICBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7dG9wOjEwJTtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKTsNCiAgICAgICAgICAgICAgbWF4LXdpZHRoOjcwMHB4O21heC1oZWlnaHQ6ODB2aDtvdmVyZmxvdzphdXRvOw0KICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiNmZmY7Y29sb3I6IzAwMDtwYWRkaW5nOjIwcHg7Ym9yZGVyLXJhZGl1czo4cHg7DQogICAgICAgICAgICAgIGJvcmRlcjoycHggc29saWQgI2QzMmYyZjtib3gtc2hhZG93OjAgNXB4IDIwcHggcmdiYSgwLDAsMCwwLjMpO2ZvbnQtZmFtaWx5OkludGVyLHNhbnMtc2VyaWYiPg0KICAgIDxoMz5EYW5oIHPDoWNoIGNhIGtow6FjIMSRYSBz4buRPC9oMz4NCiAgICA8ZGl2IHN0eWxlPSJtYXJnaW46MTBweCAwO2ZvbnQtc2l6ZToxM3B4IiBpZD0iaGVyYk91dGxpZXJNb2RhbEluZm8iPjwvZGl2Pg0KICAgIDx0YWJsZSBjbGFzcz0iZXJyb3ItdGFibGUiIHN0eWxlPSJtYXJnaW4tdG9wOjEwcHgiPg0KICAgICAgPHRoZWFkPg0KICAgICAgICA8dHI+DQogICAgICAgICAgPHRoPkjhu40gdMOqbiBi4buHbmggbmjDom48L3RoPg0KICAgICAgICAgIDx0aD5UaOG7pyB0aHXhuq10PC90aD4NCiAgICAgICAgICA8dGg+TmfDoHk8L3RoPg0KICAgICAgICAgIDx0aD5UaOG7nWkgZ2lhbjwvdGg+DQogICAgICAgICAgPHRoPk5nxrDhu51pIHRo4buxYyBoaeG7h248L3RoPg0KICAgICAgICA8L3RyPg0KICAgICAgPC90aGVhZD4NCiAgICAgIDx0Ym9keSBpZD0iaGVyYk91dGxpZXJNb2RhbEJvZHkiPjwvdGJvZHk+DQogICAgPC90YWJsZT4NCiAgICA8YnIvPg0KICAgIDxidXR0b24gY2xhc3M9ImJ0biIgdHlwZT0iYnV0dG9uIiBpZD0iaGVyYk91dGxpZXJDbG9zZUJ0biI+xJDDs25nPC9idXR0b24+DQogIDwvZGl2Pg0KPC9kaXY+DQoNCg0KDQoNCg0KDQo8YnIvPg0KPGJyLz48ZGl2IGlkPSJlcnJvclNlY3Rpb24iIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+DQo8YnIvPg0KPGgzIGlkPSJlcnJvclNlY3Rpb25UaXRsZSI+TOG7l2kgTmjhuq1wIFNhaSBUaOG7nWkgR2lhbjwvaDI+DQo8ZGl2IGlkPSJvcGVyYXRvckZpbHRlckVycm9yIiBzdHlsZT0ibWFyZ2luLXRvcDogMTVweDsgZGlzcGxheTogbm9uZTsiPg0KPGxhYmVsIGZvcj0ib3BlcmF0b3JTZWxlY3RFcnJvciI+TOG7jWMgdGhlbyBuZ8aw4budaSB0aOG7sWMgaGnhu4duOjwvbGFiZWw+DQo8c2VsZWN0IGNsYXNzPSJsb2dpbi1pbnB1dCIgaWQ9Im9wZXJhdG9yU2VsZWN0RXJyb3IiPg0KPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjPC9vcHRpb24+DQo8L3NlbGVjdD4NCjwvZGl2Pg0KPGRpdiBpZD0iZXJyb3JMb2ciPjwvZGl2Pg0KPC9kaXY+DQo8YnIvPg0KPGRpdiBjbGFzcz0iZGFzaGJvYXJkIiBpZD0iZGFzaGJvYXJkIiBzdHlsZT0iZGlzcGxheTpub25lIj4NCjxkaXYgY2xhc3M9ImNhcmQiIGlkPSJjYXJkVG90YWwiPlThu5VuZzogMDwvZGl2Pg0KPGRpdiBjbGFzcz0iY2FyZCIgaWQ9ImNhcmRFcnJvcnMiPkzhu5dpOiAwPC9kaXY+DQo8ZGl2IGNsYXNzPSJjYXJkIiBpZD0iY2FyZENvbmZsaWN0cyI+WHVuZyDEkeG7mXQ6IDA8L2Rpdj4NCjwvZGl2Pg0KPGRpdiBpZD0icmVzdWx0U2VjdGlvbiIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4NCjxoMiBpZD0icmVzdWx0U2VjdGlvblRpdGxlIj5L4bq/dCBRdeG6oyBLaeG7g20gVHJhPC9oMj4gPGJyLz4NCjxkaXYgaWQ9InN1bW1hcnkiPjwvZGl2Pg0KPHRhYmxlIGlkPSJyZXN1bHRUYWJsZSI+DQo8dGhlYWQ+DQo8dHI+DQo8dGg+PGkgY2xhc3M9ImZhcyBmYS11c2VyIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBUw6puIEJOPC90aD4NCjx0aD48aSBjbGFzcz0iZmFzIGZhLXByb2NlZHVyZXMgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IFRo4bunIHRodeG6rXQ8L3RoPg0KPHRoPjxpIGNsYXNzPSJmYXIgZmEtY2FsZW5kYXItYWx0IGZhLXNwaW4tY29udGludW91cyI+PC9pPiBOZ8OgeTwvdGg+DQo8dGggY2xhc3M9ImRvY3Rvci1jb2x1bW4iPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1tZCBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gQsOhYyBz4bu5IGNo4buJIMSR4buLbmg8L3RoPg0KPHRoPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1udXJzZSBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gTmfGsOG7nWkgdGjhu7FjIGhp4buHbjwvdGg+DQo8dGg+PGkgY2xhc3M9ImZhciBmYS1jbG9jayBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gR+G7o2kgw70gZ2nhu508L3RoPg0KPC90cj4NCjwvdGhlYWQ+DQo8dGJvZHkgaWQ9InJlc3VsdEJvZHkiPjwvdGJvZHk+DQo8L3RhYmxlPg0KDQoNCjwvZGl2Pg0KPC9kaXY+DQo8L2Rpdj4NCjxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4NCjxzY3JpcHQ+DQogICAgIC8vIFTDoGkga2hv4bqjbiBo4bujcCBs4buHDQoNCg0KICAgICAgICAvLyBEYW5oIHPDoWNoIHRo4bunIHRodeG6rXQNCiAgICAgICBsZXQgUFJPQ0VEVVJFUyA9IHt9Ow0KDQphc3luYyBmdW5jdGlvbiBsb2FkUHJvY2VkdXJlcygpIHsNCiAgICB0cnkgew0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2NoYXVodXluaDAxMDQvY2hhdWh1eW5oMDEwNC50eHQvcmVmcy9oZWFkcy9tYWluL2NoYXVfdGh1dGh1YXQudHh0Jyk7DQogICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICBQUk9DRURVUkVTID0gSlNPTi5wYXJzZSh0ZXh0KTsNCiAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgYWxlcnQoJ0tow7RuZyB0aOG7gyB04bqjaSBkYW5oIHPDoWNoIHRo4bunIHRodeG6rXQ6ICcgKyBlcnIubWVzc2FnZSk7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsNCiAgICB9DQp9DQoNCgkJDQoNCiAgICAgICAgLy8gQmnhur9uIHRvw6BuIGPhu6VjDQogICAgICAgIGxldCBlcnJvckxvZyA9IFtdOw0KICAgICAgICBsZXQgY3VycmVudFVzZXIgPSBudWxsOw0KICAgICAgICBsZXQgYWxsUHJvY2VkdXJlcyA9IFtdOw0KDQogICAgICAgIC8vID09PT09PT09PT0gUEjhuqZOIMSQxIJORyBOSOG6rFAgPT09PT09PT09PSAvLw0KICAgYXN5bmMgZnVuY3Rpb24gY2hlY2tTYXZlZExvZ2luKCkgew0KICAgIGNvbnN0IHNhdmVkVXNlciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ21lZFVzZXInKTsNCiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGxvYWRBY2NvdW50c0Zyb21UWFQoKTsgLy8gVOG6o2kgZOG7ryBsaeG7h3UgdMOgaSBraG/huqNuIHThu6sgZmlsZSB0eHQNCg0KICAgIGlmIChzYXZlZFVzZXIgJiYgYWNjb3VudHNbc2F2ZWRVc2VyXSkgew0KICAgICAgICBjdXJyZW50VXNlciA9IHNhdmVkVXNlcjsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luU2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluQ29udGVudCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgIH0NCn0NCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBjaGVja0xvZ2luKCkgew0KICAgIGNvbnN0IHVzZXJuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJuYW1lSW5wdXQnKS52YWx1ZS50cmltKCk7DQogICAgY29uc3QgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRJbnB1dCcpLnZhbHVlLnRyaW0oKTsNCiAgICBjb25zdCBsb2dpbkVycm9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luRXJyb3InKTsNCiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGxvYWRBY2NvdW50c0Zyb21UWFQoKTsgLy8gVOG6o2kgZOG7ryBsaeG7h3UgdMOgaSBraG/huqNuIHThu6sgZmlsZSB0eHQNCg0KICAgIGlmIChhY2NvdW50c1t1c2VybmFtZV0gJiYgYWNjb3VudHNbdXNlcm5hbWVdID09PSBwYXNzd29yZCkgew0KICAgICAgICBjdXJyZW50VXNlciA9IHVzZXJuYW1lOw0KICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdtZWRVc2VyJywgdXNlcm5hbWUpOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5TZWN0aW9uJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5Db250ZW50Jykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgIGxvZ2luRXJyb3Iuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdsb2dpbi1wYWdlJyk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgbG9naW5FcnJvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICB9DQp9DQoNCiAgICAgICAgZnVuY3Rpb24gbG9nb3V0KCkgew0KICAgICAgICAgICAgY3VycmVudFVzZXIgPSBudWxsOw0KICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnbWVkVXNlcicpOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luU2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5Db250ZW50Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VybmFtZUlucHV0JykudmFsdWUgPSAnJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZElucHV0JykudmFsdWUgPSAnJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbkVycm9yJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnbG9naW4tcGFnZScpOw0KICAgICAgICB9DQoNCi8vID09PT09PT09PT0gSMOATSBMT0FEIERBTkggU8OBQ0ggS0hPQSBI4buiUCBM4buGID09PT09PT09PT0gLy8NCmFzeW5jIGZ1bmN0aW9uIGxvYWRWYWxpZERlcGFydG1lbnRzKCkgew0KICAgIGNvbnN0IHVybCA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY2hhdWh1eW5oMDEwNC9jaGF1aHV5bmgwMTA0LnR4dC9yZWZzL2hlYWRzL21haW4va2hvYS50eHQnOw0KICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCArICc/dj0nICsgRGF0ZS5ub3coKSk7DQogICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICBjb25zdCBraG9hTGlzdCA9IHRleHQuc3BsaXQoJ1xuJykubWFwKGxpbmUgPT4gbGluZS50cmltKCkudG9Mb3dlckNhc2UoKSkuZmlsdGVyKEJvb2xlYW4pOw0KICAgICAgICByZXR1cm4ga2hvYUxpc3Q7DQogICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoIktow7RuZyB0aOG7gyB04bqjaSBkYW5oIHPDoWNoIGtob2E6IiwgZXJyKTsNCiAgICAgICAgcmV0dXJuIFtdOw0KICAgIH0NCn0NCg0KICAgICAgICAvLyA9PT09PT09PT09IFBI4bqmTiBY4busIEzDnSBGSUxFID09PT09PT09PT0gLy8NCmZ1bmN0aW9uIGhhbmRsZUZpbGUoKSB7DQogICAgY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVJbnB1dCcpOw0KICAgIGNvbnN0IGFuYWx5emVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5hbHl6ZUJ0bicpOw0KICAgIGNvbnN0IGZpbGUgPSBmaWxlSW5wdXQuZmlsZXNbMF07DQogICAgDQogICAgaWYgKCFmaWxlKSB7DQogICAgICAgIGFsZXJ0KCdWdWkgbMOybmcgY2jhu41uIGZpbGUgdHLGsOG7m2Mga2hpIGtp4buDbSB0cmEnKTsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlUmVxdWlyZW1lbnRzJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7DQogICAgZXJyb3JMb2cgPSBbXTsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdWx0U2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yU2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgYW5hbHl6ZUJ0bi5kaXNhYmxlZCA9IHRydWU7DQogICAgYW5hbHl6ZUJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1zcGlubmVyIGZhLXNwaW4iPjwvaT4gxJBhbmcga2nhu4NtIHRyYS4uLic7DQogICAgDQogICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgICANCiAgICByZWFkZXIub25sb2FkID0gYXN5bmMgZnVuY3Rpb24oZSkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KGUudGFyZ2V0LnJlc3VsdCk7DQogICAgICAgICAgICBjb25zdCB3b3JrYm9vayA9IFhMU1gucmVhZChkYXRhLCB7IHR5cGU6ICdhcnJheScgfSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmICh3b3JrYm9vay5TaGVldE5hbWVzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmlsZSBFeGNlbCBraMO0bmcgY8OzIHNoZWV0IG7DoG8nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgZmlyc3RTaGVldCA9IHdvcmtib29rLlNoZWV0c1t3b3JrYm9vay5TaGVldE5hbWVzWzFdXTsNCiAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gWExTWC51dGlscy5zaGVldF90b19qc29uKGZpcnN0U2hlZXQsIHsgDQogICAgICAgICAgICAgICAgaGVhZGVyOiAxLCANCiAgICAgICAgICAgICAgICBkZWZ2YWw6ICIiLCANCiAgICAgICAgICAgICAgICBibGFua3Jvd3M6IHRydWUgDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KCQkJLy8vLyBLaeG7g20gdHJhIGtob2EgLy8vLy8NCi8vIOKchSBM4bqleSBk4buvIGxp4buHdSBkw7JuZyA2LCBj4buZdCBBDQpjb25zdCBraG9hUm93ID0ganNvbkRhdGFbNV07IC8vIGTDsm5nIDYNCmNvbnN0IGtob2FUZXh0ID0gKGtob2FSb3cgJiYga2hvYVJvd1swXSB8fCAiIikudG9TdHJpbmcoKS50cmltKCk7DQpjb25zdCBraG9hTG93ZXIgPSBraG9hVGV4dC50b0xvd2VyQ2FzZSgpOw0KDQovLyDinIUgS2nhu4NtIHRyYSB0w6puIGtob2ENCmNvbnN0IHZhbGlkS2hvYUxpc3QgPSBhd2FpdCBsb2FkVmFsaWREZXBhcnRtZW50cygpOw0KaWYgKCF2YWxpZEtob2FMaXN0LnNvbWUoa2hvYSA9PiBraG9hTG93ZXIuaW5jbHVkZXMoa2hvYSkpKSB7DQogICAgICB3aW5kb3cuaXNLaG9hTG9pID0gdHJ1ZTsNCiAgICBjb25zdCBtc2cgPSBg4p2MIE3DoXkgY2jhu6cgdOG7qyBjaOG7kWkgJHtraG9hVGV4dCB8fCAnS2jDtG5nIHjDoWMgxJHhu4tuaCd9IHPhu60gZOG7pW5nIHBo4bqnbiBt4buBbS4gPGJyLz5WdWkgbMOybmcgbXVhIGLhuqNuIHF1eeG7gW4gxJHhu4MgdMO0biB0cuG7jW5nIHTDoWMgZ2nhuqMuIGA7DQoNCiAgICAvLyBIaeG7g24gcG9wdXAgY2jhu6kga2jDtG5nIGFsZXJ0DQogLy8gSGnhu4NuIHRo4buLIHBvcHVwDQogICAgICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nUG9wdXAnKTsNCiAgICBjb25zdCBsb2FkaW5nVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nVGV4dCcpOw0KICAgIGNvbnN0IHByb2dyZXNzQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzQmFyJyk7DQoNCiAgICAvLyBIaeG7g24gdGjhu4sgdGjDtG5nIGLDoW8gbOG7l2kgdsSpbmggdmnhu4VuDQogICAgbG9hZGluZ1RleHQuaW5uZXJIVE1MID0gYA0KICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWJhbiIgc3R5bGU9ImZvbnQtc2l6ZToyNHB4O2NvbG9yOnJlZDtmb250LXNpemU6MjBweDttYXJnaW4tYm90dG9tOjEwcHg7Ij48L2k+PGJyLz4NCiAgICAgICAgPHN0cm9uZz4ke21zZ308L3N0cm9uZz48YnIvPjxici8+DQogICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biIgb25jbGljaz0id2luZG93LmxvY2F0aW9uLnJlbG9hZCgpIj7EkMOzbmc8L2J1dHRvbj4NCiAgICBgOw0KICAgIHByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gJzAlJzsNCg0KICAgIHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQogICAgcG9wdXAuY2xhc3NMaXN0LmFkZCgnc2hvdycpOw0KDQogICAgLy8g4pyFIFbDlCBISeG7hlUgSMOTQSBi4bqldCBr4buzIMSRb+G6oW4gbsOgbyBj4buRIGfhuq9uZyDhuqluIHBvcHVwIHNhdSDEkcOzDQogICAgd2luZG93LmlzS2hvYUxvaSA9IHRydWU7DQoNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NhblN0YXR1cycpLmlubmVySFRNTCA9IGA8c3BhbiBzdHlsZT0iY29sb3I6cmVkO2ZvbnQtd2VpZ2h0OmJvbGQiPiR7bXNnfTwvc3Bhbj5gOw0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRTZWN0aW9uJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXJyb3JTZWN0aW9uJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICByZXR1cm47DQp9DQoNCg0KDQoJCQkNCiAgICAgICAgICAgIGlmIChqc29uRGF0YS5sZW5ndGggPD0gMSkgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmlsZSBFeGNlbCBraMO0bmcgY8OzIGThu68gbGnhu4d1IChjaOG7iSBjw7MgdGnDqnUgxJHhu4EgaG/hurdjIHRy4buRbmcpJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHByb2Nlc3NEYXRhKGpzb25EYXRhKTsNCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlUmVxdWlyZW1lbnRzJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7DQogICAgICAgICAgICBsb2dFcnJvcignTOG7l2kga2hpIMSR4buNYyBmaWxlIEV4Y2VsJywgbnVsbCwgZXJyb3IubWVzc2FnZSk7DQogICAgICAgICAgICBkaXNwbGF5RXJyb3JzKCk7DQogICAgICAgICAgICBhbGVydCgnQ8OzIGzhu5dpIHjhuqN5IHJhIGtoaSDEkeG7jWMgZmlsZTogJyArIGVycm9yLm1lc3NhZ2UpOw0KICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgYW5hbHl6ZUJ0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgYW5hbHl6ZUJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1zZWFyY2ggZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IEtp4buDbSBUcmEnOw0KICAgICAgICB9DQogICAgfTsNCiAgICANCiAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uKCkgew0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZVJlcXVpcmVtZW50cycpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOw0KICAgICAgICBsb2dFcnJvcignTOG7l2kga2hpIMSR4buNYyBmaWxlJywgbnVsbCwgJ0tow7RuZyB0aOG7gyDEkeG7jWMgbuG7mWkgZHVuZyBmaWxlJyk7DQogICAgICAgIGRpc3BsYXlFcnJvcnMoKTsNCiAgICAgICAgYW5hbHl6ZUJ0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICBhbmFseXplQnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXNlYXJjaCBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gS2nhu4NtIFRyYSc7DQogICAgICAgIGFsZXJ0KCdM4buXaSBraGkgxJHhu41jIGZpbGUuIFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSB24bubaSBmaWxlIGtow6FjLicpOw0KICAgIH07DQogICAgDQogICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOw0KfQ0KDQogICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NEYXRhKGRhdGEpIHsNCiAgICANCiAgICB0cnkgew0KICAgICAgICBjb25zdCBoZWFkZXJMaW5lMSA9IGRhdGFbN10gfHwgW107DQogICAgICAgIGNvbnN0IGhlYWRlckxpbmUyID0gZGF0YVs4XSB8fCBbXTsNCiAgICAgICAgY29uc3QgY29tYmluZWRIZWFkZXJzID0gaGVhZGVyTGluZTEubWFwKChjb2wsIGluZGV4KSA9PiANCiAgICAgICAgICAgIChjb2wgKyAnICcgKyAoaGVhZGVyTGluZTJbaW5kZXhdIHx8ICcnKSkudHJpbSgpDQogICAgICAgICk7DQoNCiAgICAgICAgDQogICAgICAgICAgICAgICAgY29uc3QgcHJvY2VkdXJlSW5kZXggPSBjb21iaW5lZEhlYWRlcnMuZmluZEluZGV4KGggPT4gaC5pbmNsdWRlcygiVGjhu6cgdGh14bqtdCIpKTsNCgkJCQljb25zdCBkYXRlSW5kZXggPSBjb21iaW5lZEhlYWRlcnMuZmluZEluZGV4KGggPT4gaC5pbmNsdWRlcygiTmfDoHkgdGjhu7FjIGhp4buHbiIpKTsgLy8gVGjDqm0gZMOybmcgbsOgeQ0KICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBjb21iaW5lZEhlYWRlcnMuZmluZEluZGV4KGggPT4gaC5pbmNsdWRlcygiVGjhu51pIGdpYW4gYuG6r3QgxJHhuqd1IHRo4buxYyBoaeG7h24iKSk7DQogICAgICAgICAgICAgICAgY29uc3QgZW5kSW5kZXggPSBjb21iaW5lZEhlYWRlcnMuZmluZEluZGV4KGggPT4gaC5pbmNsdWRlcygiVGjhu51pIGdpYW4ga+G6v3QgdGjDumMiKSk7DQogICAgICAgICAgICAgICAgY29uc3Qgb3BlcmF0b3JJbmRleCA9IGNvbWJpbmVkSGVhZGVycy5maW5kSW5kZXgoaCA9PiBoLmluY2x1ZGVzKCJUaOG7pyB0aHXhuq10IGNow61uaCIpKTsNCiAgICAgICAgICAgICAgICBjb25zdCBuYW1lSW5kZXggPSBjb21iaW5lZEhlYWRlcnMuZmluZEluZGV4KGggPT4gaC5pbmNsdWRlcygiSOG7jSB0w6puIikpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBhdGllbnRJZEluZGV4ID0gY29tYmluZWRIZWFkZXJzLmZpbmRJbmRleChoID0+IGguaW5jbHVkZXMoIk3DoyBCTiIpKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkb2N0b3JJbmRleCA9IGNvbWJpbmVkSGVhZGVycy5maW5kSW5kZXgoaCA9PiBoLmluY2x1ZGVzKCJCw6FjIHPhu7kgY2jhu4kgxJHhu4tuaCIpKTsNCiAgICAgICAgICAgICAgICBjb25zdCBtaXNzaW5nQ29sdW1ucyA9IFtdOw0KICAgICAgICAgICAgICAgIGlmIChwcm9jZWR1cmVJbmRleCA9PT0gLTEpIG1pc3NpbmdDb2x1bW5zLnB1c2goJ1Ro4bunIHRodeG6rXQnKTsNCiAgICAgICAgICAgICAgICBpZiAoc3RhcnRJbmRleCA9PT0gLTEpIG1pc3NpbmdDb2x1bW5zLnB1c2goJ1Ro4budaSBnaWFuIGLhuq90IMSR4bqndSB0aOG7sWMgaGnhu4duJyk7DQogICAgICAgICAgICAgICAgaWYgKGVuZEluZGV4ID09PSAtMSkgbWlzc2luZ0NvbHVtbnMucHVzaCgnVGjhu51pIGdpYW4ga+G6v3QgdGjDumMnKTsNCiAgICAgICAgICAgICAgICBpZiAob3BlcmF0b3JJbmRleCA9PT0gLTEpIG1pc3NpbmdDb2x1bW5zLnB1c2goJ1Ro4bunIHRodeG6rXQgY2jDrW5oJyk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKG1pc3NpbmdDb2x1bW5zLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBLaMO0bmcgdMOsbSB0aOG6pXkgY8OhYyBj4buZdCBi4bqvdCBideG7mWM6ICR7bWlzc2luZ0NvbHVtbnMuam9pbignLCAnKX1gKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY29uc3Qgcm93cyA9IGRhdGEuc2xpY2UoOSk7DQogICAgICAgICAgICAgICAgY29uc3QgcHJvY2VkdXJlcyA9IFtdOw0KICAgICAgICAgICAgICAgIGNvbnN0IGhlcmJQcm9jZWR1cmVzID0gW107DQogICAgICAgICAgICAgICAgbGV0IHNraXBwZWRSb3dzID0gMDsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICByb3dzLmZvckVhY2goKHJvdywgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93TnVtYmVyID0gaW5kZXggKyAxMDsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJvdyB8fCByb3cubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nRXJyb3IoJ0TDsm5nIHRy4buRbmcnLCByb3dOdW1iZXIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBwZWRSb3dzKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9jZWR1cmVOYW1lID0gcm93W3Byb2NlZHVyZUluZGV4XTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwcm9jZWR1cmVOYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZFJvd3MrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghUFJPQ0VEVVJFU1twcm9jZWR1cmVOYW1lXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0Vycm9yKGBUaOG7pyB0aHXhuq10IGtow7RuZyBu4bqxbSB0cm9uZyBkYW5oIHPDoWNoIGtp4buDbSB0cmE6ICR7cHJvY2VkdXJlTmFtZX1gLCByb3dOdW1iZXIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBwZWRSb3dzKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoUFJPQ0VEVVJFU1twcm9jZWR1cmVOYW1lXS5za2lwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBwYXJzZURhdGVUaW1lKHJvd1tzdGFydEluZGV4XSwgcm93TnVtYmVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBwYXJzZURhdGVUaW1lKHJvd1tlbmRJbmRleF0sIHJvd051bWJlcik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVyYlByb2NlZHVyZXMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4OiByb3dOdW1iZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGllbnROYW1lOiBuYW1lSW5kZXggIT09IC0xID8gcm93W25hbWVJbmRleF0gfHwgJ0tow7RuZyBjw7MnIDogJ0tow7RuZyBjw7MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRpZW50SWQ6IHBhdGllbnRJZEluZGV4ICE9PSAtMSA/IHJvd1twYXRpZW50SWRJbmRleF0gfHwgJ0tow7RuZyBjw7MnIDogJ0tow7RuZyBjw7MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZWR1cmU6IHByb2NlZHVyZU5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3Rvcjogcm93W2RvY3RvckluZGV4XSB8fCAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHN0YXJ0Py5kYXRlS2V5IHx8ICdLaMO0bmcgeMOhYyDEkeG7i25oJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0Py5zZWNvbmRzIHx8IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogZW5kPy5zZWNvbmRzIHx8IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlTdGFydDogc3RhcnQ/LmRpc3BsYXlUaW1lIHx8ICc/PycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlFbmQ6IGVuZD8uZGlzcGxheVRpbWUgfHwgJz8/JywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0b3I6IHJvd1tvcGVyYXRvckluZGV4XSB8fCAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2NlZHVyZUluZm86IFBST0NFRFVSRVNbcHJvY2VkdXJlTmFtZV0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gcGFyc2VEYXRlVGltZShyb3dbc3RhcnRJbmRleF0sIHJvd051bWJlcik7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBwYXJzZURhdGVUaW1lKHJvd1tlbmRJbmRleF0sIHJvd051bWJlcik7DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhcnQgfHwgIWVuZCkgew0KICAgDQogICAgc2tpcHBlZFJvd3MrKzsNCiAgICByZXR1cm47DQp9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFydC5kYXRlS2V5ICE9PSBlbmQuZGF0ZUtleSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0Vycm9yKCdUaOG7pyB0aHXhuq10IGLhuq90IMSR4bqndSB2w6Aga+G6v3QgdGjDumMga2jDoWMgbmfDoHknLCByb3dOdW1iZXIsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnREYXRlOiBzdGFydC5kYXRlS2V5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmREYXRlOiBlbmQuZGF0ZUtleSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aWVudE5hbWU6IG5hbWVJbmRleCAhPT0gLTEgPyByb3dbbmFtZUluZGV4XSB8fCAnS2jDtG5nIGPDsycgOiAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2NlZHVyZTogcHJvY2VkdXJlTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBwZWRSb3dzKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kLnNlY29uZHMgPD0gc3RhcnQuc2Vjb25kcykgew0KICAgIGxvZ0Vycm9yKCdUaOG7nWkgZ2lhbiBr4bq/dCB0aMO6YyBwaOG6o2kgc2F1IHRo4budaSBnaWFuIGLhuq90IMSR4bqndScsIHJvd051bWJlciwgew0KICAgICAgICBzdGFydFRpbWU6IHN0YXJ0LmRpc3BsYXlUaW1lLA0KICAgICAgICBlbmRUaW1lOiBlbmQuZGlzcGxheVRpbWUsDQogICAgICAgIHN0YXJ0VmFsdWU6IHJvd1tzdGFydEluZGV4XSwNCiAgICAgICAgZW5kVmFsdWU6IHJvd1tlbmRJbmRleF0sDQogICAgICAgIHBhdGllbnROYW1lOiBuYW1lSW5kZXggIT09IC0xID8gcm93W25hbWVJbmRleF0gfHwgJ0tow7RuZyBjw7MnIDogJ0tow7RuZyBjw7MnLA0KICAgICAgICBwcm9jZWR1cmU6IHByb2NlZHVyZU5hbWUsDQogICAgICAgIG5nYXlUaHVjSGllbjogZGF0ZUluZGV4ICE9PSAtMSA/IHJvd1tkYXRlSW5kZXhdIDogJ0tow7RuZyB4w6FjIMSR4buLbmgnDQogICAgfSk7DQogICAgc2tpcHBlZFJvd3MrKzsNCiAgICByZXR1cm47DQp9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkRHVyYXRpb24gPSBQUk9DRURVUkVTW3Byb2NlZHVyZU5hbWVdPy5kdXJhdGlvbiB8fCAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsRHVyYXRpb25NaW51dGVzID0gKGVuZC5zZWNvbmRzIC0gc3RhcnQuc2Vjb25kcykgLyA2MDsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KaWYgKGV4cGVjdGVkRHVyYXRpb24gPiAwICYmIE1hdGguYWJzKGFjdHVhbER1cmF0aW9uTWludXRlcyAtIGV4cGVjdGVkRHVyYXRpb24pID4gMSkgew0KICAgIGxvZ0Vycm9yKGBgLCByb3dOdW1iZXIsIHsNCiAgICAgICAgcHJvY2VkdXJlOiBwcm9jZWR1cmVOYW1lLA0KICAgICAgICBleHBlY3RlZDogZXhwZWN0ZWREdXJhdGlvbiwNCiAgICAgICAgYWN0dWFsOiBhY3R1YWxEdXJhdGlvbk1pbnV0ZXMsDQogICAgICAgIHBhdGllbnROYW1lOiBuYW1lSW5kZXggIT09IC0xID8gcm93W25hbWVJbmRleF0gfHwgJ0tow7RuZyBjw7MnIDogJ0tow7RuZyBjw7MnLA0KICAgICAgICBvcGVyYXRvcjogcm93W29wZXJhdG9ySW5kZXhdID8gcm93W29wZXJhdG9ySW5kZXhdLnJlcGxhY2UoLywvZywgJycpIDogJ0tow7RuZyBjw7MnLA0KICAgICAgICBkYXRlOiBzdGFydC5kYXRlS2V5LA0KICAgICAgICBuZ2F5VGh1Y0hpZW46IGRhdGVJbmRleCAhPT0gLTEgPyByb3dbZGF0ZUluZGV4XSA6ICdLaMO0bmcgeMOhYyDEkeG7i25oJywNCiAgICAgICAgc3RhcnRUaW1lOiBzdGFydC5kaXNwbGF5VGltZSwNCiAgICAgICAgZW5kVGltZTogZW5kLmRpc3BsYXlUaW1lLA0KICAgICAgICBkb2N0b3I6IHJvd1tkb2N0b3JJbmRleF0gfHwgJ0tow7RuZyBjw7MnIC8vIFRow6ptIGTDsm5nIG7DoHkNCiAgICB9KTsNCn0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvY2VkdXJlTmFtZSA9PT0gJ1Phuq9jIHRodeG7kWMgdGhhbmcnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVyYlByb2NlZHVyZXMucHVzaChwcm9jZWR1cmVzW3Byb2NlZHVyZXMubGVuZ3RoIC0gMV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dJbmRleDogcm93TnVtYmVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGllbnROYW1lOiBuYW1lSW5kZXggIT09IC0xID8gcm93W25hbWVJbmRleF0gfHwgJ0tow7RuZyBjw7MnIDogJ0tow7RuZyBjw7MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGllbnRJZDogcGF0aWVudElkSW5kZXggIT09IC0xID8gcm93W3BhdGllbnRJZEluZGV4XSB8fCAnS2jDtG5nIGPDsycgOiAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlOiBwcm9jZWR1cmVOYW1lLA0KCQkJCQkJCWRvY3Rvcjogcm93W2RvY3RvckluZGV4XSB8fCAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogc3RhcnQuZGF0ZUtleSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQuc2Vjb25kcywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGVuZC5zZWNvbmRzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlTdGFydDogc3RhcnQuZGlzcGxheVRpbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUVuZDogZW5kLmRpc3BsYXlUaW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yOiByb3dbb3BlcmF0b3JJbmRleF0gfHwgJ0tow7RuZyBjw7MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0OiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25mbGljdFJlYXNvbjogJycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlSW5mbzogUFJPQ0VEVVJFU1twcm9jZWR1cmVOYW1lXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uOiAnJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsb2dFcnJvcihgTOG7l2kgeOG7rSBsw70gZMOybmc6ICR7ZXJyb3IubWVzc2FnZX1gLCByb3dOdW1iZXIsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRpZW50TmFtZTogbmFtZUluZGV4ICE9PSAtMSA/IHJvd1tuYW1lSW5kZXhdIHx8ICdLaMO0bmcgY8OzJyA6ICdLaMO0bmcgY8OzJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZWR1cmU6IHJvd1twcm9jZWR1cmVJbmRleF0gfHwgJ0tow7RuZyBjw7MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yRGV0YWlsczogZXJyb3Iuc3RhY2sNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZFJvd3MrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmIChwcm9jZWR1cmVzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0tow7RuZyBjw7MgdGjhu6cgdGh14bqtdCBuw6BvIGjhu6NwIGzhu4cgxJHhu4Mga2nhu4NtIHRyYS4gVnVpIGzDsm5nIGtp4buDbSB0cmEgbOG6oWkgZOG7ryBsaeG7h3UuJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNoZWNrQ29uZmxpY3RzKHByb2NlZHVyZXMpOw0KICAgICAgICAgICAgICAgIGdlbmVyYXRlVGltZVN1Z2dlc3Rpb25zKHByb2NlZHVyZXMpOw0KICAgICAgICAgICAgICAgIGRpc3BsYXlSZXN1bHRzKHByb2NlZHVyZXMsIHNraXBwZWRSb3dzKTsNCiAgICAgICAgICAgICAgICB3aW5kb3cuYWxsSGVyYlByb2NlZHVyZXMgPSBoZXJiUHJvY2VkdXJlczsNCgkJCQkvLyAtLS0gQ+G6rXAgbmjhuq10IHPhu5EgY2Ega2jDoWMgxJFhIHPhu5EgdHLDqm4gbsO6dCAtLS0NCnNldFRpbWVvdXQoKCkgPT4gew0KICBpZiAodHlwZW9mIHVwZGF0ZUhlcmJCdXR0b25XaXRoT3V0bGllckNvdW50ID09PSAnZnVuY3Rpb24nKSB7DQogICAgdXBkYXRlSGVyYkJ1dHRvbldpdGhPdXRsaWVyQ291bnQoKTsNCiAgfQ0KfSwgMTAwKTsNCg0KICAgICAgICAgICAgICAgIGRpc3BsYXlFcnJvcnMoKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgICAgbG9nRXJyb3IoZXJyb3IubWVzc2FnZSwgbnVsbCwgZXJyb3Iuc3RhY2spOw0KICAgICAgICAgICAgICAgIGRpc3BsYXlFcnJvcnMoKTsNCiAgICAgICAgICAgICAgICBhbGVydCgnQ8OzIGzhu5dpIHjhuqN5IHJhIGtoaSB44butIGzDvSBk4buvIGxp4buHdTogJyArIGVycm9yLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KbGV0IGNvbmZsaWN0UnVsZXNUZXh0ID0gJyc7DQoNCmFzeW5jIGZ1bmN0aW9uIGxvYWRDb25mbGljdFJ1bGVzKCkgew0KICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHVybCA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY2hhdWh1eW5oMDEwNC9jaGF1aHV5bmgwMTA0LnR4dC9yZWZzL2hlYWRzL21haW4vY2hhdV94bHRodXRodWF0LnR4dD90cz0nICsgRGF0ZS5ub3coKTsNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTsNCiAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcignS2jDtG5nIHThuqNpIMSRxrDhu6NjIGNoYXVfeGx0aHV0aHVhdC50eHQnKTsNCiAgICAgICAgY29uZmxpY3RSdWxlc1RleHQgPSAoYXdhaXQgcmVzLnRleHQoKSkudHJpbSgpOw0KICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcignTOG7l2kgdOG6o2kgY2hhdV94bHRodXRodWF0LnR4dDonLCBlKTsNCiAgICAgICAgY29uZmxpY3RSdWxlc1RleHQgPSAnJzsgLy8gZmFsbGJhY2s6IHLhu5duZyAtPiBjb2kgbmjGsCBraMO0bmcgY8OzIG5nb+G6oWkgbOG7hw0KICAgIH0NCn0NCg0KDQoNCg0KICAgICAgICBmdW5jdGlvbiBjaGVja0NvbmZsaWN0cyhwcm9jZWR1cmVzKSB7DQogICAgICAgICAgICBjb25zdCBpZ25vcmVBZGphY2VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZ25vcmVBZGphY2VudENoZWNrYm94JykuY2hlY2tlZDsNCiAgICAgICAgICAgIGNvbnN0IGdyb3VwcyA9IHt9Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICBwcm9jZWR1cmVzLmZvckVhY2gocHJvYyA9PiB7DQogICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7cHJvYy5vcGVyYXRvcn1fJHtwcm9jLmRhdGV9YDsNCiAgICAgICAgICAgICAgICBpZiAoIWdyb3Vwc1trZXldKSB7DQogICAgICAgICAgICAgICAgICAgIGdyb3Vwc1trZXldID0gW107DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGdyb3Vwc1trZXldLnB1c2gocHJvYyk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhncm91cHMpLmZvckVhY2goZ3JvdXAgPT4gew0KICAgICAgICAgICAgICAgIGdyb3VwLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQgLSBiLnN0YXJ0KTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGdyb3VwLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXYgPSBncm91cFtpIC0gMV07DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBncm91cFtpXTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldkVuZFdpdGhCdWZmZXIgPSBwcmV2LmVuZCArIChwcmV2LnByb2NlZHVyZUluZm8/LmJ1ZmZlciB8fCAwKSAqIDYwOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBZGphY2VudCA9IGlnbm9yZUFkamFjZW50ICYmIGN1cnJlbnQuc3RhcnQgPT09IHByZXYuZW5kOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuc3RhcnQgPCBwcmV2RW5kV2l0aEJ1ZmZlciAmJiAhaXNBZGphY2VudCkgew0KICAgICAgICAgICAgICAgICANCg0KbGV0IGlzQ29uZmxpY3QgPSB0cnVlOw0KICAgIHRyeSB7DQogICAgICAgIGlmIChjb25mbGljdFJ1bGVzVGV4dCAmJiBjb25mbGljdFJ1bGVzVGV4dC50cmltKCkpIHsNCiAgICAgICAgICAgIGNvbnN0IGNvbmZsaWN0Q29uZGl0aW9uID0gbmV3IEZ1bmN0aW9uKCdwcmV2JywnY3VycmVudCcsJ3JldHVybiAnICsgY29uZmxpY3RSdWxlc1RleHQudHJpbSgpKTsNCiAgICAgICAgICAgIC8vIGNvbmZsaWN0Q29uZGl0aW9uKCkgVFLhuqIgVuG7gCB0cnVlIG7hur91ICrEkcaw4bujYyBtaeG7hW4geHVuZyDEkeG7mXQqDQogICAgICAgICAgICBjb25zdCBhbGxvd2VkID0gY29uZmxpY3RDb25kaXRpb24ocHJldiwgY3VycmVudCk7DQogICAgICAgICAgICBpc0NvbmZsaWN0ID0gIWFsbG93ZWQ7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpc0NvbmZsaWN0ID0gdHJ1ZTsgLy8ga2jDtG5nIGPDsyBydWxlIC0+IGPhu6kgYsOhbyB4dW5nIMSR4buZdA0KICAgICAgICB9DQogICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0zhu5dpIGtoaSDEkcOhbmggZ2nDoSB4dW5nIMSR4buZdCB0aOG7nWkgZ2lhbjonLCBlcnIpOw0KICAgICAgICBpc0NvbmZsaWN0ID0gdHJ1ZTsNCiAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0NvbmZsaWN0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5jb25mbGljdCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5jb25mbGljdFJlYXNvbiA9IGAke3ByZXYucHJvY2VkdXJlfTxicj7igKIgQuG7h25oIG5ow6JuOiAke3ByZXYucGF0aWVudE5hbWV9PGJyPuKAoiBOZ8OgeTogJHtwcmV2LmRhdGV9PGJyPuKAoiBUaOG7nWkgZ2lhbjogJHtwcmV2LmRpc3BsYXlTdGFydH0tJHtwcmV2LmRpc3BsYXlFbmR9YDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuY29uZmxpY3QgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcHJldi5jb25mbGljdFJlYXNvbi5pbmNsdWRlcyhjdXJyZW50LnByb2NlZHVyZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5jb25mbGljdFJlYXNvbiArPSAocHJldi5jb25mbGljdFJlYXNvbiA/ICc8YnI+PGJyPicgOiAnJykgKyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAgJHtjdXJyZW50LnByb2NlZHVyZX08YnI+4oCiIELhu4duaCBuaMOibjogJHtjdXJyZW50LnBhdGllbnROYW1lfTxicj7igKIgTmfDoHk6ICR7Y3VycmVudC5kYXRlfTxicj7igKIgVGjhu51pIGdpYW46ICR7Y3VycmVudC5kaXNwbGF5U3RhcnR9LSR7Y3VycmVudC5kaXNwbGF5RW5kfWA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KZnVuY3Rpb24gZ2VuZXJhdGVUaW1lU3VnZ2VzdGlvbnMocHJvY2VkdXJlcykgew0KICAgIGNvbnN0IHRpbWVPcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJ0aW1lT3B0aW9uIl06Y2hlY2tlZCcpLnZhbHVlOw0KICAgIGNvbnN0IHN0YXJ0SG91ciA9IHRpbWVPcHRpb24gPT09ICc3OjMwJyA/IDcuNSA6IDc7DQogICAgY29uc3QgaWdub3JlQWRqYWNlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWdub3JlQWRqYWNlbnRDaGVja2JveCcpLmNoZWNrZWQ7DQogICAgY29uc3QgYnVmZmVyTWludXRlcyA9IGlnbm9yZUFkamFjZW50ID8gMCA6IDE7DQogICAgY29uc3Qgc2hvd01vcmVTdWdnZXN0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaG93TW9yZVN1Z2dlc3Rpb25zQ2hlY2tib3gnKS5jaGVja2VkOw0KICAgIA0KICAgIC8vIFPhu5Ega2h1bmcgZ2nhu50gdOG7kWkgxJFhIG3hu5dpIGJ14buVaSAobuG6v3UgY2jhu41uIDYga2h1bmcgdGjDrCAzIHPDoW5nICsgMyBjaGnhu4F1KQ0KICAgIGNvbnN0IG1heE1vcm5pbmcgPSBzaG93TW9yZVN1Z2dlc3Rpb25zID8gMyA6IDI7DQogICAgY29uc3QgbWF4QWZ0ZXJub29uID0gc2hvd01vcmVTdWdnZXN0aW9ucyA/IDMgOiAxOw0KDQogICAgcHJvY2VkdXJlcy5mb3JFYWNoKHByb2MgPT4gew0KICAgICAgICBpZiAoIXByb2MuY29uZmxpY3QpIHJldHVybjsNCg0KICAgICAgICBjb25zdCBzYW1lRGF5UHJvY2VkdXJlcyA9IHByb2NlZHVyZXMuZmlsdGVyKHAgPT4gDQogICAgICAgICAgICBwLmRhdGUgPT09IHByb2MuZGF0ZSAmJiANCiAgICAgICAgICAgIHAub3BlcmF0b3IgPT09IHByb2Mub3BlcmF0b3IgJiYNCiAgICAgICAgICAgIHAucm93SW5kZXggIT09IHByb2Mucm93SW5kZXgNCiAgICAgICAgKTsNCg0KICAgICAgICBjb25zdCBkdXJhdGlvblNlY29uZHMgPSBwcm9jLmVuZCAtIHByb2Muc3RhcnQgKyAoYnVmZmVyTWludXRlcyAqIDYwKTsNCiAgICAgICAgDQogICAgICAgIC8vIFTDrG0ga2h1bmcgZ2nhu50gYnXhu5VpIHPDoW5nDQogICAgICAgIGNvbnN0IG1vcm5pbmdTbG90cyA9IGZpbmRBdmFpbGFibGVTbG90cygNCiAgICAgICAgICAgIHN0YXJ0SG91ciAqIDM2MDAsIA0KICAgICAgICAgICAgMTEuNSAqIDM2MDAsIA0KICAgICAgICAgICAgZHVyYXRpb25TZWNvbmRzLCANCiAgICAgICAgICAgIHNhbWVEYXlQcm9jZWR1cmVzLCANCiAgICAgICAgICAgIG1heE1vcm5pbmcNCiAgICAgICAgKTsNCiAgICAgICAgDQogICAgICAgIC8vIFTDrG0ga2h1bmcgZ2nhu50gYnXhu5VpIGNoaeG7gXUNCiAgICAgICAgY29uc3QgYWZ0ZXJub29uU2xvdHMgPSBmaW5kQXZhaWxhYmxlU2xvdHMoDQogICAgICAgICAgICAxMy41ICogMzYwMCwgDQogICAgICAgICAgICAxNyAqIDM2MDAsIA0KICAgICAgICAgICAgZHVyYXRpb25TZWNvbmRzLCANCiAgICAgICAgICAgIHNhbWVEYXlQcm9jZWR1cmVzLCANCiAgICAgICAgICAgIG1heEFmdGVybm9vbg0KICAgICAgICApOw0KDQogICAgICAgIC8vIEZvcm1hdCBr4bq/dCBxdeG6ow0KICAgICAgICBsZXQgc3VnZ2VzdGlvbnMgPSBbXTsNCiAgICAgICAgaWYgKG1vcm5pbmdTbG90cy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICBzdWdnZXN0aW9ucy5wdXNoKCc8c3Ryb25nPlPDoW5nOjwvc3Ryb25nPjxicj4nICsgDQogICAgICAgICAgICAgICAgbW9ybmluZ1Nsb3RzLm1hcChzbG90ID0+IGAke3Nsb3Quc3RhcnR9IC0gJHtzbG90LmVuZH1gKS5qb2luKCc8YnI+JykpOw0KICAgICAgICB9DQogICAgICAgIGlmIChhZnRlcm5vb25TbG90cy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICBzdWdnZXN0aW9ucy5wdXNoKCc8c3Ryb25nPkNoaeG7gXU6PC9zdHJvbmc+PGJyPicgKyANCiAgICAgICAgICAgICAgICBhZnRlcm5vb25TbG90cy5tYXAoc2xvdCA9PiBgJHtzbG90LnN0YXJ0fSAtICR7c2xvdC5lbmR9YCkuam9pbignPGJyPicpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIA0KaWYgKG1vcm5pbmdTbG90cy5sZW5ndGggKyBhZnRlcm5vb25TbG90cy5sZW5ndGggPiAwKSB7DQogICAgY29uc3QgZmlyc3RTbG90ID0gbW9ybmluZ1Nsb3RzWzBdIHx8IGFmdGVybm9vblNsb3RzWzBdOw0KICAgIGNvbnN0IHNtYXJ0SGludCA9IGA8YnI+PGRpdiBzdHlsZT0ibWFyZ2luLXRvcDo2cHg7Y29sb3I6IzAwNzk2Yjtmb250LXdlaWdodDo2MDAiPg0KICAgIPCfkYkgR+G7o2kgw706IEThu51pIHThu6sgPHU+JHtwcm9jLmRpc3BsYXlTdGFydH08L3U+IOKGkiA8dT4ke2ZpcnN0U2xvdC5zdGFydH08L3U+DQogICAgPC9kaXY+YDsNCg0KICAgIHByb2Muc3VnZ2VzdGlvbiA9IHN1Z2dlc3Rpb25zLmpvaW4oJzxicj4nKSArIHNtYXJ0SGludDsNCn0gZWxzZSB7DQogICAgcHJvYy5zdWdnZXN0aW9uID0gJzxzcGFuIGNsYXNzPSJuby1zdWdnZXN0aW9uIj5LaMO0bmcgY8OzIGtodW5nIGdp4budIHRy4buRbmc8L3NwYW4+JzsNCn0NCg0KICAgIH0pOw0KfQ0KLy8gSMOgbSBraeG7g20gdHJhIHh1bmcgxJHhu5l0IHRo4budaSBnaWFuDQpmdW5jdGlvbiBoYXNUaW1lQ29uZmxpY3Qoc3RhcnRUaW1lLCBkdXJhdGlvbiwgcHJvY2VkdXJlcykgew0KICAgIGNvbnN0IGVuZFRpbWUgPSBzdGFydFRpbWUgKyBkdXJhdGlvbjsNCiAgICANCiAgICBmb3IgKGNvbnN0IHByb2Mgb2YgcHJvY2VkdXJlcykgew0KICAgICAgICBjb25zdCBwcm9jU3RhcnQgPSBwcm9jLnN0YXJ0Ow0KICAgICAgICBjb25zdCBwcm9jRW5kID0gcHJvYy5lbmQgKyAocHJvYy5wcm9jZWR1cmVJbmZvPy5idWZmZXIgfHwgMCkgKiA2MDsNCiAgICAgICAgDQogICAgICAgIGlmICgoc3RhcnRUaW1lID49IHByb2NTdGFydCAmJiBzdGFydFRpbWUgPCBwcm9jRW5kKSB8fCANCiAgICAgICAgICAgIChlbmRUaW1lID4gcHJvY1N0YXJ0ICYmIGVuZFRpbWUgPD0gcHJvY0VuZCkgfHwNCiAgICAgICAgICAgIChzdGFydFRpbWUgPD0gcHJvY1N0YXJ0ICYmIGVuZFRpbWUgPj0gcHJvY0VuZCkpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIHJldHVybiBmYWxzZTsNCn0NCi8vIEjDoG0gdMOsbSBraHVuZyBnaeG7nSB0cuG7kW5nDQpmdW5jdGlvbiBmaW5kQXZhaWxhYmxlU2xvdHMoc3RhcnRUaW1lLCBlbmRUaW1lLCBkdXJhdGlvbiwgcHJvY2VkdXJlcywgbWF4U2xvdHMpIHsNCiAgICBjb25zdCBzbG90cyA9IFtdOw0KICAgIGxldCBjdXJyZW50VGltZSA9IHN0YXJ0VGltZTsNCiAgICBjb25zdCBpZ25vcmVBZGphY2VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZ25vcmVBZGphY2VudENoZWNrYm94JykuY2hlY2tlZDsNCiAgICBjb25zdCBidWZmZXJNaW51dGVzID0gaWdub3JlQWRqYWNlbnQgPyAwIDogMTsNCiAgICANCiAgICB3aGlsZSAoY3VycmVudFRpbWUgKyBkdXJhdGlvbiA8PSBlbmRUaW1lICYmIHNsb3RzLmxlbmd0aCA8IG1heFNsb3RzKSB7DQogICAgICAgIGlmICghaGFzVGltZUNvbmZsaWN0KGN1cnJlbnRUaW1lLCBkdXJhdGlvbiwgcHJvY2VkdXJlcykpIHsNCiAgICAgICAgICAgIHNsb3RzLnB1c2goew0KICAgICAgICAgICAgICAgIHN0YXJ0OiBzZWNvbmRzVG9UaW1lU3RyKGN1cnJlbnRUaW1lKSwNCiAgICAgICAgICAgICAgICBlbmQ6IHNlY29uZHNUb1RpbWVTdHIoY3VycmVudFRpbWUgKyAoZHVyYXRpb24gLSAoYnVmZmVyTWludXRlcyAqIDYwKSkpIC8vIFRy4burIGJ1ZmZlciDEkeG7gyBoaeG7g24gdGjhu4sNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICAgIGN1cnJlbnRUaW1lICs9IDE1ICogNjA7IC8vIEtp4buDbSB0cmEgbeG7l2kgMTUgcGjDunQNCiAgICB9DQogICAgDQogICAgcmV0dXJuIHNsb3RzOw0KfQ0KDQogICAgICAgIGZ1bmN0aW9uIHNlY29uZHNUb1RpbWVTdHIoc2Vjb25kcykgew0KICAgICAgICAgICAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyAzNjAwKTsNCiAgICAgICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKChzZWNvbmRzICUgMzYwMCkgLyA2MCk7DQogICAgICAgICAgICByZXR1cm4gYCR7aG91cnMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke21pbnV0ZXMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7DQogICAgICAgIH0NCg0KICAgICAgIGZ1bmN0aW9uIGRpc3BsYXlSZXN1bHRzKHByb2NlZHVyZXMsIHNraXBwZWRSb3dzID0gMCkgew0KICAgIGFsbFByb2NlZHVyZXMgPSBwcm9jZWR1cmVzOw0KICAgIA0KICAgIGNvbnN0IG9wZXJhdG9ycyA9IFsuLi5uZXcgU2V0KHByb2NlZHVyZXMubWFwKHAgPT4gcC5vcGVyYXRvcikpXTsNCiAgICBjb25zdCBvcGVyYXRvclNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVyYXRvclNlbGVjdCcpOw0KICAgIGNvbnN0IG9wZXJhdG9yU2VsZWN0RXJyb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlcmF0b3JTZWxlY3RFcnJvcicpOw0KICAgIA0KICAgIG9wZXJhdG9yU2VsZWN0LmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJhbGwiPlThuqV0IGPhuqM8L29wdGlvbj4nICsgDQogICAgICAgIG9wZXJhdG9ycy5tYXAob3AgPT4gYDxvcHRpb24gdmFsdWU9IiR7b3B9Ij4ke29wLnJlcGxhY2UoLywvZywgJycpfTwvb3B0aW9uPmApLmpvaW4oJycpOw0KICAgIA0KICAgIG9wZXJhdG9yU2VsZWN0RXJyb3IuaW5uZXJIVE1MID0gb3BlcmF0b3JTZWxlY3QuaW5uZXJIVE1MOyAvLyDEkOG7k25nIGLhu5kgbuG7mWkgZHVuZw0KICAgIA0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVyYXRvckZpbHRlcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVyYXRvckZpbHRlckVycm9yJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGNvbmZsaWN0UHJvY2VkdXJlcyA9IHByb2NlZHVyZXMuZmlsdGVyKHAgPT4gcC5jb25mbGljdCk7DQogICAgICAgICAgICBjb25zdCBjb25mbGljdENvdW50ID0gY29uZmxpY3RQcm9jZWR1cmVzLmxlbmd0aDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1bW1hcnknKS5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgPHA+VOG7lW5nIHPhu5EgZMOybmcgxJHDoyB44butIGzDvTogPHN0cm9uZz4ke3Byb2NlZHVyZXMubGVuZ3RoICsgc2tpcHBlZFJvd3N9PC9zdHJvbmc+IA0KICAgICAgICAgICAgICAgICAgfHwgU+G7kSBkw7JuZyBjw7MgeHVuZyDEkeG7mXQ6IDxzdHJvbmc+JHtjb25mbGljdENvdW50fTwvc3Ryb25nPjwvcD4gPGJyLz4NCiAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgYDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZmlsdGVyQnlPcGVyYXRvcigpOw0KICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRTZWN0aW9uJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgDQogICAgLy8gTuG6v3Uga2jDtG5nIGPDsyBs4buXaSwgY3Xhu5luIHh14buRbmcgcGjhuqduIGvhur90IHF14bqjDQogICAgaWYgKGVycm9yTG9nLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHJlc3VsdFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdWx0U2VjdGlvbicpOw0KICAgICAgICAgICAgaWYgKHJlc3VsdFNlY3Rpb24pIHsNCiAgICAgICAgICAgICAgICBzbW9vdGhTY3JvbGxUbyhyZXN1bHRTZWN0aW9uLCAtNDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LCAzMDApOw0KICAgIH0NCn0NCg0KZnVuY3Rpb24gZmlsdGVyQnlPcGVyYXRvcigpIHsNCiAgICBjb25zdCBvcGVyYXRvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVyYXRvclNlbGVjdCcpLnZhbHVlOw0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVyYXRvclNlbGVjdEVycm9yJykudmFsdWUgPSBvcGVyYXRvcjsgLy8gxJDhu5NuZyBi4buZIGdpw6EgdHLhu4sgZHJvcGRvd24gbOG7l2kNCiBjb25zdCBzaG93RG9jdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3dEb2N0b3JDaGVja2JveCcpLmNoZWNrZWQ7DQogICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdzaG93LWRvY3RvcicsIHNob3dEb2N0b3IpOw0KICAgIC8vID09PT09IDEuIEzhu4xDIFbDgCBISeG7gk4gVEjhu4ogQuG6ok5HIEvhur5UIFFV4bqiIEtJ4buCTSBUUkEgWFVORyDEkOG7mFQgPT09PT0NCiAgICBjb25zdCBmaWx0ZXJlZFByb2NlZHVyZXMgPSBvcGVyYXRvciA9PT0gJ2FsbCcgDQogICAgICAgID8gYWxsUHJvY2VkdXJlcy5maWx0ZXIocCA9PiBwLmNvbmZsaWN0KSANCiAgICAgICAgOiBhbGxQcm9jZWR1cmVzLmZpbHRlcihwID0+IHAub3BlcmF0b3IucmVwbGFjZSgvLC9nLCAnJykgPT09IG9wZXJhdG9yLnJlcGxhY2UoLywvZywgJycpICYmIHAuY29uZmxpY3QpOw0KDQogICAgY29uc3QgcmVzdWx0Qm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRCb2R5Jyk7DQogICAgcmVzdWx0Qm9keS5pbm5lckhUTUwgPSAnJzsNCg0KICAgIC8vIE5ow7NtIGPDoWMgdGjhu6cgdGh14bqtdCB4dW5nIMSR4buZdCB24bubaSBuaGF1DQogICAgY29uc3QgY29uZmxpY3RHcm91cHMgPSBbXTsNCiAgICBjb25zdCBwcm9jZXNzZWRSb3dzID0gbmV3IFNldCgpOw0KDQogICAgZmlsdGVyZWRQcm9jZWR1cmVzLmZvckVhY2gocHJvYyA9PiB7DQogICAgICAgIGlmICghcHJvY2Vzc2VkUm93cy5oYXMocHJvYy5yb3dJbmRleCkpIHsNCiAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gW3Byb2NdOw0KICAgICAgICAgICAgcHJvY2Vzc2VkUm93cy5hZGQocHJvYy5yb3dJbmRleCk7DQoNCiAgICAgICAgICAgIC8vIFTDrG0gdGjhu6cgdGh14bqtdCBsacOqbiBxdWFuIHRyb25nIHh1bmcgxJHhu5l0DQogICAgICAgICAgICBpZiAocHJvYy5jb25mbGljdFJlYXNvbikgew0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZsaWN0TWF0Y2hlcyA9IHByb2MuY29uZmxpY3RSZWFzb24ubWF0Y2goL0Lhu4duaCBuaMOibjogKC4qPyk8YnI+4oCiIE5nw6B5OiAoLio/KTxicj7igKIgVGjhu51pIGdpYW46ICguKj8pLS9nKTsNCiAgICAgICAgICAgICAgICBpZiAoY29uZmxpY3RNYXRjaGVzKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0TWF0Y2hlcy5mb3JFYWNoKG1hdGNoID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGllbnROYW1lID0gbWF0Y2gubWF0Y2goL0Lhu4duaCBuaMOibjogKC4qPyk8YnI+LylbMV07DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gbWF0Y2gubWF0Y2goL05nw6B5OiAoLio/KTxicj4vKVsxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBtYXRjaC5tYXRjaCgvVGjhu51pIGdpYW46ICguKj8pLS8pWzFdOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25mbGljdFByb2MgPSBmaWx0ZXJlZFByb2NlZHVyZXMuZmluZChwID0+IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucGF0aWVudE5hbWUgPT09IHBhdGllbnROYW1lICYmIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuZGF0ZSA9PT0gZGF0ZSAmJiANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmRpc3BsYXlTdGFydCA9PT0gdGltZSAmJg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICFwcm9jZXNzZWRSb3dzLmhhcyhwLnJvd0luZGV4KQ0KICAgICAgICAgICAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZsaWN0UHJvYykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwLnB1c2goY29uZmxpY3RQcm9jKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWRSb3dzLmFkZChjb25mbGljdFByb2Mucm93SW5kZXgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25mbGljdEdyb3Vwcy5wdXNoKGdyb3VwKTsNCiAgICAgICAgfQ0KICAgIH0pOw0KDQogICAgLy8gSGnhu4NuIHRo4buLIGvhur90IHF14bqjDQogICAgY29uZmxpY3RHcm91cHMuZm9yRWFjaChncm91cCA9PiB7DQogICAgICAgIGdyb3VwLmZvckVhY2gocHJvYyA9PiB7DQogICAgICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOw0KICAgICAgICByb3cuY2xhc3NMaXN0LmFkZCgiaGVyYi1yb3ciKTsNCiAgICAgICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdjb25mbGljdC1yb3cnKTsNCiAgICAgICAgICAgIHJvdy5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgPHRkPiR7cHJvYy5wYXRpZW50TmFtZX0gPGJyLz4gJHtwcm9jLnBhdGllbnRJZH08L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4ke3Byb2MucHJvY2VkdXJlfTwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPjxjZW50ZXI+JHtwcm9jLmRhdGV9PGJyLz4ke3Byb2MuZGlzcGxheVN0YXJ0fSAtICR7cHJvYy5kaXNwbGF5RW5kfTwvY2VudGVyPjwvdGQ+DQoJCQkJICA8dGQgY2xhc3M9ImRvY3Rvci1jb2x1bW4iPiR7cHJvYy5kb2N0b3J9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+JHtwcm9jLm9wZXJhdG9yLnJlcGxhY2UoLywvZywgJycpfTwvdGQ+DQogICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJ0aW1lLXN1Z2dlc3Rpb24iPiR7cHJvYy5zdWdnZXN0aW9uIHx8ICdLaMO0bmcgY8OzIHh1bmcgxJHhu5l0J308L3RkPg0KICAgICAgICAgICAgYDsNCiAgICAgICAgICAgIHJlc3VsdEJvZHkuYXBwZW5kQ2hpbGQocm93KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gVGjDqm0gZMOybmcgcGjDom4gY8OhY2gNCiAgICAgICAgaWYgKGdyb3VwLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIGNvbnN0IHNlcGFyYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7DQogICAgICAgICAgICBzZXBhcmF0b3IuaW5uZXJIVE1MID0gJzx0ZCBjb2xzcGFuPSI4IiBjbGFzcz0iZ3JvdXAtc2VwYXJhdG9yIj48L3RkPic7DQogICAgICAgICAgICByZXN1bHRCb2R5LmFwcGVuZENoaWxkKHNlcGFyYXRvcik7DQogICAgICAgIH0NCiAgICB9KTsNCg0KICAgIC8vID09PT09IDIuIEzhu4xDIFbDgCBISeG7gk4gVEjhu4ogQuG6ok5HIEzhu5ZJID09PT09DQogICAgY29uc3QgZmlsdGVyZWRFcnJvcnMgPSBvcGVyYXRvciA9PT0gJ2FsbCcgDQogICAgICAgID8gZXJyb3JMb2cgDQogICAgICAgIDogZXJyb3JMb2cuZmlsdGVyKGVycm9yID0+IA0KICAgICAgICAgICAgZXJyb3IuZGV0YWlscyAmJiANCiAgICAgICAgICAgIGVycm9yLmRldGFpbHMub3BlcmF0b3IgJiYgDQogICAgICAgICAgICBlcnJvci5kZXRhaWxzLm9wZXJhdG9yLnJlcGxhY2UoLywvZywgJycpID09PSBvcGVyYXRvci5yZXBsYWNlKC8sL2csICcnKQ0KICAgICAgICApOw0KDQogICAgLy8gSGnhu4NuIHRo4buLIGzhu5dpIMSRw6MgbOG7jWMNCiAgICBjb25zdCBlcnJvckxvZ0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvckxvZycpOw0KICAgIGlmIChmaWx0ZXJlZEVycm9ycy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgZXJyb3JMb2dEaXYuaW5uZXJIVE1MID0gJzxwPktow7RuZyBjw7MgbOG7l2kgbsOgbyDEkcaw4bujYyBnaGkgbmjhuq1uPC9wPic7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBsZXQgaHRtbCA9IGANCiAgICA8dGFibGUgY2xhc3M9ImVycm9yLXRhYmxlIj4NCiAgICAgICAgPHRoZWFkPg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS11c2VyIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBUw6puIEJOPC90aD4NCiAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFzIGZhLXByb2NlZHVyZXMgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IFRo4bunIHRodeG6rXQ8L3RoPg0KICAgICAgICAgICAgPHRoIGNsYXNzPSJkb2N0b3ItY29sdW1uIj48aSBjbGFzcz0iZmFzIGZhLXVzZXItbWQgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IELDoWMgc+G7uSBjaOG7iSDEkeG7i25oPC90aD4NCiAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFzIGZhLXVzZXItbnVyc2UgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IE5nxrDhu51pIHRo4buxYyBoaeG7h248L3RoPg0KICAgICAgICAgICAgPHRoPjxpIGNsYXNzPSJmYXIgZmEtY2xvY2sgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IFRo4budaSBnaWFuPC90aD4NCiAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFzIGZhLWV4Y2xhbWF0aW9uLXRyaWFuZ2xlIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBM4buXaTwvdGg+DQogICAgICAgICAgICA8L3RyPg0KICAgICAgICA8L3RoZWFkPg0KICAgICAgICA8dGJvZHk+YDsNCg0KICAgIGZpbHRlcmVkRXJyb3JzLmZvckVhY2goZXJyb3IgPT4gew0KICAgICAgICBpZiAoZXJyb3IuZGV0YWlscykgew0KICAgICAgICAgICAgaHRtbCArPSBgDQogICAgICAgICAgICA8dHIgY2xhc3M9ImVycm9yLXJvdyI+DQogICAgICAgICAgICAgICAgPHRkPiR7ZXJyb3IuZGV0YWlscy5wYXRpZW50TmFtZSB8fCAnS2jDtG5nIGPDsyd9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+JHtlcnJvci5kZXRhaWxzLnByb2NlZHVyZSB8fCAnS2jDtG5nIGPDsyd9PC90ZD4NCgkJCQk8dGQgY2xhc3M9ImRvY3Rvci1jb2x1bW4iPiR7ZXJyb3IuZGV0YWlscy5kb2N0b3IgfHwgJ0tow7RuZyBjw7MnfTwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPiR7ZXJyb3IuZGV0YWlscy5vcGVyYXRvciA/IGVycm9yLmRldGFpbHMub3BlcmF0b3IucmVwbGFjZSgvLC9nLCAnJykgOiAnS2jDtG5nIGPDsyd9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+PGNlbnRlcj4ke2Vycm9yLmRldGFpbHMubmdheVRodWNIaWVuIHx8IChlcnJvci5kZXRhaWxzLmRhdGUgfHwgJ0tow7RuZyBjw7MnKX0gPGJyLz4kew0KICAgICAgICAgICAgICAgICAgICBlcnJvci5kZXRhaWxzLnN0YXJ0VGltZSA/IGAke2Vycm9yLmRldGFpbHMuc3RhcnRUaW1lfSAtICR7ZXJyb3IuZGV0YWlscy5lbmRUaW1lfWAgOiAnS2jDtG5nIGPDsycNCiAgICAgICAgICAgICAgICB9PC9jZW50ZXI+PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9ImVycm9yLWRldGFpbCI+DQogICAgICAgICAgICAgICAgICAgICR7ZXJyb3IubWVzc2FnZX0NCiAgICAgICAgICAgICAgICAgICAgJHtlcnJvci5kZXRhaWxzLmV4cGVjdGVkID8gYCR7ZXJyb3IuZGV0YWlscy5hY3R1YWx9IHBow7p0IChRdXkgxJHhu4tuaDogJHtlcnJvci5kZXRhaWxzLmV4cGVjdGVkfSBwaMO6dClgIDogJyd9DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+YDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGh0bWwgKz0gYA0KICAgICAgICAgICAgPHRyIGNsYXNzPSJlcnJvci1yb3ciPg0KICAgICAgICAgICAgICAgIDx0ZCBjb2xzcGFuPSI1IiBjbGFzcz0iZXJyb3ItZGV0YWlsIj4NCiAgICAgICAgICAgICAgICAgICAgJHtlcnJvci5tZXNzYWdlfSAke2Vycm9yLnJvdyA/ICcoRMOybmcgJyArIGVycm9yLnJvdyArICcpJyA6ICcnfQ0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPmA7DQogICAgICAgIH0NCiAgICB9KTsNCg0KICAgIGh0bWwgKz0gYDwvdGJvZHk+PC90YWJsZT5gOw0KICAgIGVycm9yTG9nRGl2LmlubmVySFRNTCA9IGh0bWw7DQp9DQoNCmZ1bmN0aW9uIGRpc3BsYXlGaWx0ZXJlZEVycm9ycyhmaWx0ZXJlZEVycm9ycykgew0KICAgIGNvbnN0IGVycm9yTG9nRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yTG9nJyk7DQogICAgDQogICAgaWYgKGZpbHRlcmVkRXJyb3JzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICBlcnJvckxvZ0Rpdi5pbm5lckhUTUwgPSAnPHA+S2jDtG5nIGPDsyBs4buXaSBuw6BvIMSRxrDhu6NjIGdoaSBuaOG6rW48L3A+JzsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICANCiAgICBsZXQgaHRtbCA9IGANCiAgICA8dGFibGUgY2xhc3M9ImVycm9yLXRhYmxlIj4NCiAgICAgICAgPHRoZWFkPg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgPHRoPjxpIGNsYXNzPSJmYXMgZmEtdXNlciBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gVMOqbiBCTjwvdGg+DQogICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS1wcm9jZWR1cmVzIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBUaOG7pyB0aHXhuq10PC90aD4NCiAgICAgICAgICAgIDx0aCBjbGFzcz0iZG9jdG9yLWNvbHVtbiI+PGkgY2xhc3M9ImZhcyBmYS11c2VyLW1kIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBCw6FjIHPhu7kgY2jhu4kgxJHhu4tuaDwvdGg+DQogICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS11c2VyLW51cnNlIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBOZ8aw4budaSB0aOG7sWMgaGnhu4duPC90aD4NCiAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFyIGZhLWNsb2NrIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBUaOG7nWkgZ2lhbjwvdGg+DQogICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS1leGNsYW1hdGlvbi10cmlhbmdsZSBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gTOG7l2k8L3RoPg0KICAgICAgICAgICAgPC90cj4NCiAgICAgICAgPC90aGVhZD4NCiAgICAgICAgPHRib2R5PmA7DQogICAgDQogICAgZmlsdGVyZWRFcnJvcnMuZm9yRWFjaChlcnJvciA9PiB7DQogICAgICAgIGlmIChlcnJvci5kZXRhaWxzKSB7DQogICAgICAgICAgICBodG1sICs9IGANCiAgICAgICAgICAgIDx0ciBjbGFzcz0iZXJyb3Itcm93Ij4NCiAgICAgICAgICAgICAgICA8dGQ+JHtlcnJvci5kZXRhaWxzLnBhdGllbnROYW1lIHx8ICdLaMO0bmcgY8OzJ308L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4ke2Vycm9yLmRldGFpbHMucHJvY2VkdXJlIHx8ICdLaMO0bmcgY8OzJ308L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4ke2Vycm9yLmRldGFpbHMub3BlcmF0b3IgPyBlcnJvci5kZXRhaWxzLm9wZXJhdG9yLnJlcGxhY2UoLywvZywgJycpIDogJ0tow7RuZyBjw7MnfTwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPjxjZW50ZXI+JHtlcnJvci5kZXRhaWxzLm5nYXlUaHVjSGllbiB8fCAoZXJyb3IuZGV0YWlscy5kYXRlIHx8ICdLaMO0bmcgY8OzJyl9IDxici8+JHtlcnJvci5kZXRhaWxzLnN0YXJ0VGltZSA/IGAke2Vycm9yLmRldGFpbHMuc3RhcnRUaW1lfSAtICR7ZXJyb3IuZGV0YWlscy5lbmRUaW1lfWAgOiAnS2jDtG5nIGPDsyd9PC9jZW50ZXI+PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9ImVycm9yLWRldGFpbCI+DQogICAgICAgICAgICAgICAgICAgICR7ZXJyb3IubWVzc2FnZX0NCiAgICAgICAgICAgICAgICAgICAgJHtlcnJvci5kZXRhaWxzLmV4cGVjdGVkID8gYCR7ZXJyb3IuZGV0YWlscy5hY3R1YWx9IHBow7p0ICAgKFF1eSDEkeG7i25oOiAke2Vycm9yLmRldGFpbHMuZXhwZWN0ZWR9IHBow7p0KWAgOiAnJ30NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj5gOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaHRtbCArPSBgDQogICAgICAgICAgICA8dHIgY2xhc3M9ImVycm9yLXJvdyI+DQogICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjYiIGNsYXNzPSJlcnJvci1kZXRhaWwiPg0KICAgICAgICAgICAgICAgICAgICAke2Vycm9yLm1lc3NhZ2V9ICR7ZXJyb3Iucm93ID8gJyhEw7JuZyAnICsgZXJyb3Iucm93ICsgJyknIDogJyd9DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+YDsNCiAgICAgICAgfQ0KICAgIH0pOw0KICAgIA0KICAgIGh0bWwgKz0gYDwvdGJvZHk+PC90YWJsZT5gOw0KICAgIGVycm9yTG9nRGl2LmlubmVySFRNTCA9IGh0bWw7DQp9DQoNCiAgICAgICAgZnVuY3Rpb24gbG9nRXJyb3IobWVzc2FnZSwgcm93ID0gbnVsbCwgZGV0YWlscyA9IG51bGwpIHsNCiAgICAgICAgICAgIGVycm9yTG9nLnB1c2goew0KICAgICAgICAgICAgICAgIG1lc3NhZ2UsDQogICAgICAgICAgICAgICAgcm93LA0KICAgICAgICAgICAgICAgIGRldGFpbHMsDQogICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpLA0KICAgICAgICAgICAgICAgIHVzZXI6IGN1cnJlbnRVc2VyDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQpmdW5jdGlvbiBkaXNwbGF5RXJyb3JzKCkgew0KICAgIGNvbnN0IGVycm9yTG9nRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yTG9nJyk7DQogICAgDQogICAgaWYgKGVycm9yTG9nLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICBlcnJvckxvZ0Rpdi5pbm5lckhUTUwgPSAnPHA+S2jDtG5nIGPDsyBs4buXaSBuw6BvIMSRxrDhu6NjIGdoaSBuaOG6rW48L3A+JzsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yU2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgIA0KICAgICAgICAvLyBO4bq/dSBraMO0bmcgY8OzIGzhu5dpLCBjdeG7mW4geHXhu5FuZyBwaOG6p24gS+G6v3QgUXXhuqMgS2nhu4NtIFRyYQ0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHJlc3VsdFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdWx0U2VjdGlvbicpOw0KICAgICAgICAgICAgaWYgKHJlc3VsdFNlY3Rpb24gJiYgcmVzdWx0U2VjdGlvbi5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScpIHsNCiAgICAgICAgICAgICAgICBzbW9vdGhTY3JvbGxUbyhyZXN1bHRTZWN0aW9uLCAtNDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LCAzMDApOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIA0KICAgIGxldCBodG1sID0gYA0KICAgIDx0YWJsZSBjbGFzcz0iZXJyb3ItdGFibGUiPg0KICAgICAgICA8dGhlYWQ+DQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgPHRoPjxpIGNsYXNzPSJmYXMgZmEtdXNlciBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gVMOqbiBCTjwvdGg+DQogICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS1wcm9jZWR1cmVzIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBUaOG7pyB0aHXhuq10PC90aD4NCiAgICAgICAgICAgIDx0aCBjbGFzcz0iZG9jdG9yLWNvbHVtbiI+PGkgY2xhc3M9ImZhcyBmYS11c2VyLW1kIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBCw6FjIHPhu7kgY2jhu4kgxJHhu4tuaDwvdGg+DQogICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS11c2VyLW51cnNlIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBOZ8aw4budaSB0aOG7sWMgaGnhu4duPC90aD4NCiAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFyIGZhLWNsb2NrIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBUaOG7nWkgZ2lhbjwvdGg+DQogICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS1leGNsYW1hdGlvbi10cmlhbmdsZSBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gTOG7l2k8L3RoPg0KICAgICAgICAgICAgPC90cj4NCiAgICAgICAgPC90aGVhZD4NCiAgICAgICAgPHRib2R5PmA7DQogICAgDQogICAgLy8gSGnhu4NuIHRo4buLIHThu6tuZyBs4buXaQ0KICAgIGVycm9yTG9nLmZvckVhY2goZXJyb3IgPT4gew0KICAgICAgICBpZiAoZXJyb3IuZGV0YWlscykgew0KICAgICAgICAgICAgaHRtbCArPSBgDQogICAgICAgICAgICA8dHIgY2xhc3M9ImVycm9yLXJvdyI+DQogICAgICAgICAgICAgICAgPHRkPiR7ZXJyb3IuZGV0YWlscy5wYXRpZW50TmFtZSB8fCAnS2jDtG5nIGPDsyd9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+JHtlcnJvci5kZXRhaWxzLnByb2NlZHVyZSB8fCAnS2jDtG5nIGPDsyd9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9ImRvY3Rvci1jb2x1bW4iPiR7ZXJyb3IuZGV0YWlscy5kb2N0b3IgfHwgJ0tow7RuZyBjw7MnfTwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPiR7ZXJyb3IuZGV0YWlscy5vcGVyYXRvciA/IGVycm9yLmRldGFpbHMub3BlcmF0b3IucmVwbGFjZSgvLC9nLCAnJykgOiAnS2jDtG5nIGPDsyd9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+PGNlbnRlcj4ke2Vycm9yLmRldGFpbHMubmdheVRodWNIaWVuIHx8IChlcnJvci5kZXRhaWxzLmRhdGUgfHwgJ0tow7RuZyBjw7MnKX0gPGJyLz4ke2Vycm9yLmRldGFpbHMuc3RhcnRUaW1lID8gYCR7ZXJyb3IuZGV0YWlscy5zdGFydFRpbWV9IC0gJHtlcnJvci5kZXRhaWxzLmVuZFRpbWV9YCA6ICdLaMO0bmcgY8OzJ308L2NlbnRlcj48L3RkPg0KICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iZXJyb3ItZGV0YWlsIj4NCiAgICAgICAgICAgICAgICAgICAgJHtlcnJvci5tZXNzYWdlfQ0KICAgICAgICAgICAgICAgICAgICAke2Vycm9yLmRldGFpbHMuZXhwZWN0ZWQgPyBgJHtlcnJvci5kZXRhaWxzLmFjdHVhbH0gcGjDunQgICAoUXV5IMSR4buLbmg6ICR7ZXJyb3IuZGV0YWlscy5leHBlY3RlZH0gcGjDunQpYCA6ICcnfQ0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPmA7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBodG1sICs9IGANCiAgICAgICAgICAgIDx0ciBjbGFzcz0iZXJyb3Itcm93Ij4NCiAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iNiIgY2xhc3M9ImVycm9yLWRldGFpbCI+DQogICAgICAgICAgICAgICAgICAgICR7ZXJyb3IubWVzc2FnZX0gJHtlcnJvci5yb3cgPyAnKETDsm5nICcgKyBlcnJvci5yb3cgKyAnKScgOiAnJ30NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj5gOw0KICAgICAgICB9DQogICAgfSk7DQogICAgDQogICAgaHRtbCArPSBgPC90Ym9keT48L3RhYmxlPmA7DQogICAgDQogICAgZXJyb3JMb2dEaXYuaW5uZXJIVE1MID0gaHRtbDsNCiAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvclNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICANCiAgICAvLyBDdeG7mW4geHXhu5FuZyBwaOG6p24gbOG7l2kgbuG6v3UgY8OzDQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGNvbnN0IGVycm9yU2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvclNlY3Rpb24nKTsNCiAgICAgICAgaWYgKGVycm9yU2VjdGlvbikgew0KICAgICAgICAgICAgc21vb3RoU2Nyb2xsVG8oZXJyb3JTZWN0aW9uLCAtMTMwKTsNCiAgICAgICAgfQ0KICAgIH0sIDMwMCk7DQp9DQoNCi8vIEjDoG0gY3Xhu5luIG3GsOG7o3QgdOG7lW5nIHF1w6F0DQpmdW5jdGlvbiBzbW9vdGhTY3JvbGxUbyhlbGVtZW50LCBvZmZzZXQgPSAwKSB7DQogICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQtZXJyb3Itc2VjdGlvbicpOw0KICAgIA0KICAgIGNvbnN0IGVsZW1lbnRQb3NpdGlvbiA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wOw0KICAgIGNvbnN0IG9mZnNldFBvc2l0aW9uID0gZWxlbWVudFBvc2l0aW9uICsgd2luZG93LnBhZ2VZT2Zmc2V0IC0gb2Zmc2V0Ow0KICAgIA0KICAgIGNvbnN0IGR1cmF0aW9uID0gMTUwMDsNCiAgICBjb25zdCBzdGFydCA9IHdpbmRvdy5wYWdlWU9mZnNldDsNCiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTsNCiAgICANCiAgICBmdW5jdGlvbiBzY3JvbGxTdGVwKHRpbWVzdGFtcCkgew0KICAgICAgICBjb25zdCBlbGFwc2VkID0gdGltZXN0YW1wIC0gc3RhcnRUaW1lOw0KICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKGVsYXBzZWQgLyBkdXJhdGlvbiwgMSk7DQogICAgICAgIGNvbnN0IGVhc2luZyA9IGVhc2VJbk91dEN1YmljKHByb2dyZXNzKTsNCiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIHN0YXJ0ICsgKG9mZnNldFBvc2l0aW9uIC0gc3RhcnQpICogZWFzaW5nKTsNCiAgICAgICAgDQogICAgICAgIGlmIChwcm9ncmVzcyA8IDEpIHsNCiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2Nyb2xsU3RlcCk7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gZWFzZUluT3V0Q3ViaWModCkgew0KICAgICAgICByZXR1cm4gdCA8IDAuNSA/IDQgKiB0ICogdCAqIHQgOiAxIC0gTWF0aC5wb3coLTIgKiB0ICsgMiwgMykgLyAyOw0KICAgIH0NCiAgICANCiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNjcm9sbFN0ZXApOw0KICAgIA0KICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodC1lcnJvci1zZWN0aW9uJyk7DQogICAgfSwgMjAwMCk7DQp9DQoNCg0KIA0KDQogICAgICAgIGZ1bmN0aW9uIHBhcnNlRGF0ZVRpbWUoZGF0ZXRpbWVTdHIsIHJvd0luZGV4KSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGlmICghZGF0ZXRpbWVTdHIpIHsNCiAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRldGltZVN0ciA9PT0gJ251bWJlcicpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhjZWxEYXRlID0gbmV3IERhdGUoTWF0aC5yb3VuZCgoZGF0ZXRpbWVTdHIgLSAyNTU2OSkgKiA4NjQwMCAqIDEwMDApKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF5ID0gZXhjZWxEYXRlLmdldERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9udGggPSBleGNlbERhdGUuZ2V0TW9udGgoKSArIDE7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHllYXIgPSBleGNlbERhdGUuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaG91cnMgPSBleGNlbERhdGUuZ2V0SG91cnMoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IGV4Y2VsRGF0ZS5nZXRNaW51dGVzKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlY29uZHMgPSBleGNlbERhdGUuZ2V0U2Vjb25kcygpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmo6IGV4Y2VsRGF0ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVLZXk6IGAke2RheX0vJHttb250aH0vJHt5ZWFyfWAsDQogICAgICAgICAgICAgICAgICAgICAgICBtaW51dGVzOiBob3VycyAqIDYwICsgbWludXRlcywNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM6IGhvdXJzICogMzYwMCArIG1pbnV0ZXMgKiA2MCArIHNlY29uZHMsDQogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGltZTogYCR7aG91cnMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke21pbnV0ZXMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke3NlY29uZHMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWANCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0ZXRpbWVTdHIgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBkYXRlUGFydCwgdGltZVBhcnQgPSAnMDA6MDA6MDAnOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZXRpbWVTdHIuaW5jbHVkZXMoJyAnKSkgW2RhdGVQYXJ0LCB0aW1lUGFydF0gPSBkYXRldGltZVN0ci5zcGxpdCgnICcpOw0KICAgICAgICAgICAgICAgICAgICBlbHNlIGRhdGVQYXJ0ID0gZGF0ZXRpbWVTdHI7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBsZXQgZGF5LCBtb250aCwgeWVhcjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGVQYXJ0LmluY2x1ZGVzKCcvJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gZGF0ZVBhcnQuc3BsaXQoJy8nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDMpIFtkYXksIG1vbnRoLCB5ZWFyXSA9IHBhcnRzLm1hcChOdW1iZXIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFydHMubGVuZ3RoID09PSAyKSBbZGF5LCBtb250aF0gPSBwYXJ0cy5tYXAoTnVtYmVyKSwgeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRlUGFydC5pbmNsdWRlcygnLScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGRhdGVQYXJ0LnNwbGl0KCctJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAzKSBbeWVhciwgbW9udGgsIGRheV0gPSBwYXJ0cy5tYXAoTnVtYmVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgW21vbnRoLCBkYXldID0gcGFydHMubWFwKE51bWJlciksIHllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ8SQ4buLbmggZOG6oW5nIG5nw6B5IGtow7RuZyDEkcaw4bujYyBo4buXIHRy4bujJyk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4oZGF5KSB8fCBpc05hTihtb250aCkgfHwgaXNOYU4oeWVhcikgfHwgZGF5IDwgMSB8fCBkYXkgPiAzMSB8fCBtb250aCA8IDEgfHwgbW9udGggPiAxMikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHacOhIHRy4buLIG5nw6B5IGtow7RuZyBo4bujcCBs4buHJyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGxldCBob3VycyA9IDAsIG1pbnV0ZXMgPSAwLCBzZWNvbmRzID0gMDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVQYXJ0LmluY2x1ZGVzKCc6JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVQYXJ0cyA9IHRpbWVQYXJ0LnNwbGl0KCc6Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRpbWVQYXJ0c1swXSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBwYXJzZUludCh0aW1lUGFydHNbMV0pIHx8IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzID0gcGFyc2VJbnQodGltZVBhcnRzWzJdKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4oaG91cnMpIHx8IGlzTmFOKG1pbnV0ZXMpIHx8IGlzTmFOKHNlY29uZHMpIHx8IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXJzIDwgMCB8fCBob3VycyA+IDIzIHx8IG1pbnV0ZXMgPCAwIHx8IG1pbnV0ZXMgPiA1OSB8fCBzZWNvbmRzIDwgMCB8fCBzZWNvbmRzID4gNTkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dFcnJvcignR2nDoSB0cuG7iyB0aOG7nWkgZ2lhbiBraMO0bmcgaOG7o3AgbOG7hycsIHJvd0luZGV4LCB7IHRpbWU6IHRpbWVQYXJ0IH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXJzID0gMDsgbWludXRlcyA9IDA7IHNlY29uZHMgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlT2JqID0gbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCBkYXksIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKGRhdGVPYmouZ2V0VGltZSgpKSkgdGhyb3cgbmV3IEVycm9yKCdOZ8OgeSBraMO0bmcgaOG7o3AgbOG7hycpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kc0luRGF5ID0gaG91cnMgKiAzNjAwICsgbWludXRlcyAqIDYwICsgc2Vjb25kczsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWludXRlc0luRGF5ID0gaG91cnMgKiA2MCArIG1pbnV0ZXM7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iaiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVLZXk6IGAke2RheX0vJHttb250aH0vJHt5ZWFyfWAsDQogICAgICAgICAgICAgICAgICAgICAgICBtaW51dGVzOiBtaW51dGVzSW5EYXksDQogICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzOiBzZWNvbmRzSW5EYXksDQogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGltZTogYCR7aG91cnMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke21pbnV0ZXMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke3NlY29uZHMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWANCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfEkOG7i25oIGThuqFuZyB0aOG7nWkgZ2lhbiBraMO0bmcgxJHGsOG7o2MgaOG7lyB0cuG7oycpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgICBsb2dFcnJvcihgTOG7l2kgcGjDom4gdMOtY2ggdGjhu51pIGdpYW46ICR7ZXJyb3IubWVzc2FnZX1gLCByb3dJbmRleCwgeyANCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRhdGV0aW1lU3RyLA0KICAgICAgICAgICAgICAgICAgICBlcnJvckRldGFpbHM6IGVycm9yLnN0YWNrIA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PSBLSOG7nkkgVOG6oE8gU+G7sCBLSeG7hk4gPT09PT09PT09PSAvLw0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAvLyBLaGkgdHJhbmcgbG9hZA0KICAgICAgICAgICAgaWYgKCFzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdtZWRVc2VyJykpIHsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2xvZ2luLXBhZ2UnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSDEkcSDbmcgbmjhuq1wIGtoaSB0cmFuZyB04bqjaQ0KCQkNCgkJCQ0KICAgICAgICAgICAgY2hlY2tTYXZlZExvZ2luKCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEfDoW4gc+G7sSBraeG7h24gY2hvIG7DunQgxJHEg25nIG5o4bqtcA0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVja0xvZ2luKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gR8OhbiBz4buxIGtp4buHbiBjaG8gbsO6dCDEkcSDbmcgeHXhuqV0DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nb3V0QnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsb2dvdXQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyDEkMSDbmcgbmjhuq1wIGLhurFuZyBwaMOtbSBFbnRlcg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkSW5wdXQnKS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGV2ZW50KSB7DQogICAgICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykgew0KICAgICAgICAgICAgICAgICAgICBjaGVja0xvZ2luKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEfDoW4gc+G7sSBraeG7h24gY2hvIG7DunQgcGjDom4gdMOtY2ggZmlsZQ0KICAgICAgICAgICAgDQpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5hbHl6ZUJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4gew0KICAgIGNvbnN0IGZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZUlucHV0JykuZmlsZXNbMF07DQogICAgaWYgKCFmaWxlKSB7DQogICAgICAgIGFsZXJ0KCdWdWkgbMOybmcgY2jhu41uIGZpbGUgdHLGsOG7m2Mga2hpIGtp4buDbSB0cmEnKTsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdQb3B1cCcpOw0KICAgIGNvbnN0IGxvYWRpbmdUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdUZXh0Jyk7DQogICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3NCYXInKTsNCg0KICAgIHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQogICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKSk7DQoNCiAgICBsb2FkaW5nVGV4dC5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1wYXBlci1wbGFuZSIgc3R5bGU9ImZvbnQtc2l6ZToyNHB4O2NvbG9yOiMzNDk4ZGI7bWFyZ2luLWJvdHRvbToxMHB4OyI+PC9pPjxici8+xJBhbmcgZ+G7rWkgZOG7ryBsaeG7h3UgduG7gSBtw6F5IGNo4bunLi4uJzsNCiAgICBwcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9ICczMyUnOw0KCQ0KCQ0KCQ0KCWNvbnN0IHByb2dyZXNzQmFyQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzQmFyQ29udGFpbmVyJyk7DQoNCi8vIENo4buJIHThuqFvIDEgbOG6p24NCmlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWRpdExpbmVCZWxvdycpKSB7DQogIGNvbnN0IGNyZWRpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICBjcmVkaXQuaWQgPSAnY3JlZGl0TGluZUJlbG93JzsNCiAgY3JlZGl0LmlubmVyVGV4dCA9ICfCqSBUaGnhur90IGvhur8gJiBwaMOhdCB0cmnhu4NuIGLhu59pIENow6J1IEh14buzbmgnOw0KICBjcmVkaXQuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnOw0KICBjcmVkaXQuc3R5bGUuZm9udFNpemUgPSAnMTZweCc7DQogIGNyZWRpdC5zdHlsZS5jb2xvciA9ICcjRkYwMDAwJzsNCiAgY3JlZGl0LnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInOw0KDQogIHByb2dyZXNzQmFyQ29udGFpbmVyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNyZWRpdCwgcHJvZ3Jlc3NCYXJDb250YWluZXIubmV4dFNpYmxpbmcpOw0KfQ0KCQ0KCQ0KCQ0KCQ0KICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTApKSk7DQogICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDcwMCkpOw0KDQogICAgcHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSAnNjYlJzsNCg0KICAgIGxldCB0b3RhbCA9IDA7DQogICAgdHJ5IHsNCiAgICAgICAgY29uc3QgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7DQogICAgICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGUgPT4gcmVzb2x2ZShuZXcgVWludDhBcnJheShlLnRhcmdldC5yZXN1bHQpKTsNCiAgICAgICAgICAgIGZpbGVSZWFkZXIub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoIkzhu5dpIMSR4buNYyBmaWxlIikpOw0KICAgICAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgY29uc3Qgd29ya2Jvb2sgPSBYTFNYLnJlYWQoZGF0YSwgeyB0eXBlOiAnYXJyYXknIH0pOw0KICAgICAgICBjb25zdCBmaXJzdFNoZWV0ID0gd29ya2Jvb2suU2hlZXRzW3dvcmtib29rLlNoZWV0TmFtZXNbMV1dOw0KICAgICAgICBjb25zdCBqc29uRGF0YSA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbihmaXJzdFNoZWV0LCB7DQogICAgICAgICAgICBoZWFkZXI6IDEsDQogICAgICAgICAgICBkZWZ2YWw6ICIiLA0KICAgICAgICAgICAgYmxhbmtyb3dzOiB0cnVlDQogICAgICAgIH0pOw0KDQogICAgICAgIGNvbnN0IHJvd3MgPSBqc29uRGF0YS5zbGljZSg5KTsNCiAgICAgICAgdG90YWwgPSByb3dzLmxlbmd0aDsNCiAgICB9IGNhdGNoIHsNCiAgICAgICAgdG90YWwgPSAxMDAwOw0KICAgIH0NCg0KICAgIGNvbnN0IHN0ZXAgPSAxMDA7DQogICAgY29uc3Qgc3RlcHMgPSBNYXRoLmNlaWwodG90YWwgLyBzdGVwKTsNCiAgICBjb25zdCBpbnRlcnZhbCA9IDI2MDAgLyBzdGVwczsNCg0KICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHN0ZXBzOyBpKyspIHsNCiAgICAgICAgY29uc3QgY3VycmVudCA9IE1hdGgubWluKGkgKiBzdGVwLCB0b3RhbCk7DQogICAgICAgIGxvYWRpbmdUZXh0LmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXVzZXItbWQiIHN0eWxlPSJmb250LXNpemU6MjRweDtjb2xvcjojMjk4MGI5O21hcmdpbi1ib3R0b206MTBweDsiPjwvaT48YnIvPsSQYW5nIHBow6JuIHTDrWNoIGThu68gbGnhu4d1IHThu6tuZyBi4buHbmggbmjDom4uLi48YnI+JyArIGN1cnJlbnQgKyAnIC8gJyArIHRvdGFsOw0KICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgaW50ZXJ2YWwpKTsNCiAgICB9DQoNCiAgICBsb2FkaW5nVGV4dC5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1jaGVjay1jaXJjbGUiIHN0eWxlPSJmb250LXNpemU6MjRweDtjb2xvcjpncmVlbjttYXJnaW4tYm90dG9tOjEwcHg7Ij48L2k+PGJyLz7EkMOjIGtp4buDbSB0cmEgeG9uZy4uLic7DQogICAgcHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSAnMTAwJSc7DQogICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTsNCg0KaWYgKCF3aW5kb3cuaXNLaG9hTG9pKSB7DQogICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgIHNldFRpbWVvdXQoKCkgPT4geyBwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyB9LCA1MDApOw0KfSBlbHNlIHsNCiAgICAvLyBO4bq/dSDEkWFuZyBs4buXaSBLaG9hLCBLSMOUTkcgxJHGsOG7o2Mg4bqpbiBwb3B1cA0KICAgIHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsNCiAgICBwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KfQ0KICAgIGhhbmRsZUZpbGUoKTsNCgkNCgkNCgkNCgkNCnNldFRpbWVvdXQoKCkgPT4gew0KICAgIC8vIOKdjCBO4bq/dSDEkWFuZyBs4buXaSB0w6puIGtob2EgdGjDrCBnaeG7ryBuZ3V5w6puIHBvcHVwLCBLSMOUTkcgxJHGsOG7o2Mg4bqpbiwgS0jDlE5HIGhp4buHbiBuw7p0DQogICAgaWYgKHdpbmRvdy5pc0tob2FMb2kpIHsNCiAgICAgICAgcG9wdXAuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZCgnc2hvdycpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgLy8g4pyFIE7hur91IGtow7RuZyBs4buXaSwgdGjDrCDhuqluIHBvcHVwIHbDoCBoaeG7h24gbsO6dCBjaOG7qWMgbsSDbmcNCiAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7DQogICAgcG9wdXAuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCg0KICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbi5idG4nKS5mb3JFYWNoKGJ0biA9PiB7DQogICAgICAgIGlmIChidG4udGV4dENvbnRlbnQuaW5jbHVkZXMoJ0dp4budIHRy4buRbmcnKSB8fCBidG4udGV4dENvbnRlbnQuaW5jbHVkZXMoJ1Phuq9jIHRodeG7kWMgdGhhbmcnKSkgew0KICAgICAgICAgICAgYnRuLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJzsNCiAgICAgICAgfQ0KICAgIH0pOw0KfSwgNTAwKTsNCg0KDQoJDQp9KTsNCg0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBHw6FuIHPhu7Ega2nhu4duIGNobyBkcm9wZG93biBs4buNYw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZXJhdG9yU2VsZWN0JykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZmlsdGVyQnlPcGVyYXRvcik7DQogICAgICAgICAgICANCgkJCQ0KCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3dEb2N0b3JDaGVja2JveCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZpbHRlckJ5T3BlcmF0b3IpOw0KCQkJDQoJCQkNCiAgICAgICAgICAgIC8vIEfDoW4gc+G7sSBraeG7h24gY2hvIHJhZGlvIGJ1dHRvbiBjaOG7jW4ga2h1bmcgZ2nhu50NCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9InRpbWVPcHRpb24iXScpLmZvckVhY2gocmFkaW8gPT4gew0KICAgICAgICAgICAgICAgIHJhZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoYWxsUHJvY2VkdXJlcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZVRpbWVTdWdnZXN0aW9ucyhhbGxQcm9jZWR1cmVzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlckJ5T3BlcmF0b3IoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSk7DQoJCQkNCgkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVyYXRvclNlbGVjdCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKCkgew0KICAgIGZpbHRlckJ5T3BlcmF0b3IoKTsNCn0pOw0KDQpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlcmF0b3JTZWxlY3RFcnJvcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKCkgew0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVyYXRvclNlbGVjdCcpLnZhbHVlID0gdGhpcy52YWx1ZTsNCiAgICBmaWx0ZXJCeU9wZXJhdG9yKCk7DQp9KTsNCgkJCQ0KICAgICAgICB9KTsNCiAgICA8L3NjcmlwdD4NCjxkaXYgY2xhc3M9InByb2NlZHVyZS1pbmZvIj48Y2VudGVyPiANCkRlc2lnbiBCeSA8YSBocmVmPSJodHRwOi8vZmIuY29tL2NoYXVodXluaDAxMDQiIHRhcmdldD0iX2JsYW5rIj4gRHIuQ2jDonU8L2E+PGJyLz4NCiAgICAgICAgICAgICAgICBO4bq/dSBDw7MgQuG6pXQgS+G7syBWxrDhu5tuZyBN4bqvYyBHw6wgVnVpIEzDsm5nIExIIDogPGJyLz4NCiAgICAgICAgICAgICAgICBFbWFpbDogY2hhdWh1eW5oMDEwNEBnbWFpbC5jb208YnIvPg0KICAgICAgICAgICAgICAgIFNEVDogMDc5LjU2Ny45MzUwPC9jZW50ZXI+DQo8L2Rpdj4NCjxzY3JpcHQ+DQogIC8vIEjhu5cgdHLhu6MgbmjhuqVuIEVudGVyIHThu6sgw7QgdXNlcm5hbWUgaG/hurdjIHBhc3N3b3JkDQogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VybmFtZUlucHV0JykuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbihldmVudCkgew0KICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZElucHV0JykuZm9jdXMoKTsNCiAgICB9DQogIH0pOw0KDQogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZElucHV0JykuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbihldmVudCkgew0KICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbkJ0bicpLmNsaWNrKCk7DQogICAgfQ0KICB9KTsNCg0KLy8gPT09PT09IFThu7AgxJDhu5hORyBRVcOJVCBUSMavIE3hu6RDICYgQ0jhu4xOIEZJTEUgTeG7mkkgTkjhuqRUID09PT09PQ0KDQpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9sZGVyQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZvbGRlcklucHV0JykuY2xpY2soKTsNCn0pOw0KDQpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9sZGVySW5wdXQnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoZSkgPT4gew0KICAgIGNvbnN0IGZpbGVzID0gQXJyYXkuZnJvbShlLnRhcmdldC5maWxlcykuZmlsdGVyKGYgPT4gL1wuKHhsc3h8eGxzfGNzdikkL2kudGVzdChmLm5hbWUpKTsNCiAgICBjb25zdCBzdGF0dXNEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NhblN0YXR1cycpOw0KICAgIGNvbnN0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlSW5wdXQnKTsNCg0KICAgIGlmIChmaWxlcy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgc3RhdHVzRGl2LnN0eWxlLmNvbG9yID0gJ3JlZCc7DQogICAgICAgIHN0YXR1c0Rpdi5pbm5lckhUTUwgPSAnS2jDtG5nIHTDrG0gdGjhuqV5IGZpbGUgRXhjZWwgaOG7o3AgbOG7hyB0cm9uZyB0aMawIG3hu6VjLic7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBsZXQgdmFsaWRGaWxlID0gbnVsbDsNCg0KICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcy5zb3J0KChhLCBiKSA9PiBiLmxhc3RNb2RpZmllZCAtIGEubGFzdE1vZGlmaWVkKSkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTsNCiAgICAgICAgICAgIGNvbnN0IHdvcmtib29rID0gWExTWC5yZWFkKGRhdGEsIHsgdHlwZTogJ2FycmF5JyB9KTsNCg0KICAgICAgICAgICAgaWYgKCF3b3JrYm9vay5TaGVldE5hbWVzWzFdKSBjb250aW51ZTsgLy8gY+G6p24gU2hlZXQgdGjhu6kgMg0KDQogICAgICAgICAgICBjb25zdCBzaGVldCA9IHdvcmtib29rLlNoZWV0c1t3b3JrYm9vay5TaGVldE5hbWVzWzFdXTsNCiAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gWExTWC51dGlscy5zaGVldF90b19qc29uKHNoZWV0LCB7IGhlYWRlcjogMSwgZGVmdmFsOiAiIiwgYmxhbmtyb3dzOiB0cnVlIH0pOw0KDQogICAgICAgICAgICBpZiAoanNvbkRhdGEubGVuZ3RoID49IDEwKSB7IC8vIMOtdCBuaOG6pXQgMiBkw7JuZyBoZWFkZXIgdsOgIGPDsyBk4buvIGxp4buHdSBkw7JuZyAxMA0KICAgICAgICAgICAgICAgIHZhbGlkRmlsZSA9IGZpbGU7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTOG7l2kgxJHhu41jIGZpbGUgJHtmaWxlLm5hbWV9OmAsIGVycik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAodmFsaWRGaWxlKSB7DQogICAgICAgIGNvbnN0IGR0ID0gbmV3IERhdGFUcmFuc2ZlcigpOw0KICAgICAgICBkdC5pdGVtcy5hZGQodmFsaWRGaWxlKTsNCiAgICAgICAgZmlsZUlucHV0LmZpbGVzID0gZHQuZmlsZXM7DQoNCiAgICAgICAgLy8gY+G6rXAgbmjhuq10IHRy4bqhbmcgdGjDoWkNCiAgICAgICAgc3RhdHVzRGl2LmlubmVySFRNTCA9IGA8aSBjbGFzcz0iZmFzIGZhLWZvbGRlci1vcGVuIj48L2k+IMSQw6MgY2jhu41uIGZpbGU6IDxiPiR7dmFsaWRGaWxlLm5hbWV9PC9iPmA7DQogICAgICAgIHN0YXR1c0Rpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgc3RhdHVzRGl2LnN0eWxlLmNvbG9yID0gJyMyYzNlNTAnOw0KDQogICAgICAgIC8vIEfhu41pIGtp4buDbSB0cmENCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FuYWx5emVCdG4nKS5jbGljaygpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIHN0YXR1c0Rpdi5zdHlsZS5jb2xvciA9ICdyZWQnOw0KICAgICAgICBzdGF0dXNEaXYuaW5uZXJIVE1MID0gJ0tow7RuZyB0w6xtIMSRxrDhu6NjIGZpbGUgY8OzIGPhuqV1IHRyw7pjIGjhu6NwIGzhu4cuIFZ1aSBsw7JuZyBraeG7g20gdHJhIGzhuqFpLic7DQogICAgfQ0KfSk7DQoNCg0KPC9zY3JpcHQ+DQo8ZGl2IGNsYXNzPSJ0b2FzdCIgaWQ9InRvYXN0Ij48L2Rpdj4NCjwhLS0gUG9wdXAgbG9hZGluZyAtLT4NCjxkaXYgaWQ9ImxvYWRpbmdQb3B1cCIgc3R5bGU9ImRpc3BsYXk6bm9uZTtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC41KTt6LWluZGV4Ojk5OTk7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7Zm9udC1mYW1pbHk6J0ludGVyJyxzYW5zLXNlcmlmIj4NCjxkaXYgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZjtwYWRkaW5nOjMwcHggNDBweDtib3JkZXItcmFkaXVzOjEwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Ym94LXNoYWRvdzowIDAgMTVweCByZ2JhKDAsMCwwLDAuMyk7bWF4LXdpZHRoOjkwJTtmb250LXNpemU6MThweCI+DQo8ZGl2IGlkPSJsb2FkaW5nVGV4dCI+DQo8aSBjbGFzcz0iZmFzIGZhLXNwaW5uZXIgZmEtc3BpbiIgc3R5bGU9ImZvbnQtc2l6ZToyNHB4O2NvbG9yOiMzNDk4ZGI7bWFyZ2luLWJvdHRvbToxMHB4OyI+PC9pPjxici8+DQogICAgICDEkGFuZyBn4butaSBk4buvIGxp4buHdSB24buBIG3DoXkgY2jhu6cuLi4NCiAgICA8L2Rpdj4NCjxkaXYgaWQ9InByb2dyZXNzQmFyQ29udGFpbmVyIj4NCjxkaXYgaWQ9InByb2dyZXNzQmFyIj48L2Rpdj4NCjxkaXYgaWQ9ImF2YWlsYWJpbGl0eVRhYmxlIiBzdHlsZT0iZGlzcGxheTogbm9uZTsgbWFyZ2luLXRvcDogMjBweDsiPg0KICA8aDI+VGjhu5FuZyBrw6ogZ2nhu50gdHLhu5FuZyB04burbmcgbmfGsOG7nWk8L2gyPg0KICA8dGFibGUgY2xhc3M9ImVycm9yLXRhYmxlIj4NCiAgICA8dGhlYWQ+DQogICAgICA8dHI+DQogICAgICAgIDx0aD5OZ8aw4budaSB0aOG7sWMgaGnhu4duPC90aD4NCiAgICAgICAgPHRoPk5nw6B5PC90aD4NCiAgICAgICAgDQogICAgICAgIDx0aD5HaeG7nSB0cuG7kW5nIGJ14buVaSBzw6FuZzwvdGg+DQogICAgICAgIDx0aD5HaeG7nSB0cuG7kW5nIGJ14buVaSBjaGnhu4F1PC90aD4NCiAgICAgIDwvdHI+DQogICAgPC90aGVhZD4NCiAgICA8dGJvZHkgaWQ9ImF2YWlsYWJpbGl0eUJvZHkiPjwvdGJvZHk+DQogIDwvdGFibGU+DQo8L2Rpdj4NCjwhLS0gS+G6vlQgVEjDmkM6IELhuqJORyBHSeG7nCBUUuG7kE5HIFThu6pORyBOR8av4bucSSAtLT4NCjwvZGl2Pg0KPC9kaXY+DQo8L2Rpdj4NCjwvZGl2Pg0KDQo8c2NyaXB0Pg0KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGZ1bmN0aW9uKCkgew0KICBjb25zdCBub2lkdW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm5vaWR1bmciKTsNCiAgY29uc3QgbGlzdDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIubGlzdDEiKTsNCg0KICBpZiAobm9pZHVuZyAmJiBsaXN0MSkgew0KICAgIGNvbnN0IHRleHQgPSBub2lkdW5nLnRleHRDb250ZW50IHx8IG5vaWR1bmcuaW5uZXJUZXh0IHx8ICIiOw0KICAgIGlmICh0ZXh0LnRyaW0oKSA9PT0gIiIpIHsNCiAgICAgIGxpc3QxLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgfQ0KICB9DQp9KTsNCg0KLy8gPT09PSBUw41OSCBUT8OBTiBHSeG7nCBUUuG7kE5HIENITyBU4buqTkcgTkfGr+G7nEkgPT09PQ0KZnVuY3Rpb24gdG9nZ2xlQXZhaWxhYmlsaXR5KCkgew0KICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F2YWlsYWJpbGl0eVRhYmxlJyk7DQogICAgaWYgKHRhYmxlLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykgew0KICAgICAgICB0YWJsZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgY2FsY3VsYXRlQXZhaWxhYmlsaXR5KCk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgdGFibGUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIGNhbGN1bGF0ZUF2YWlsYWJpbGl0eSgpIHsNCiAgICBjb25zdCBncm91cHMgPSB7fTsNCg0KICAgIGFsbFByb2NlZHVyZXMuZm9yRWFjaChwcm9jID0+IHsNCiAgICAgICAgY29uc3Qga2V5ID0gYCR7cHJvYy5vcGVyYXRvcn1fJHtwcm9jLmRhdGV9YDsNCiAgICAgICAgaWYgKCFncm91cHNba2V5XSkgew0KICAgICAgICAgICAgZ3JvdXBzW2tleV0gPSBbXTsNCiAgICAgICAgfQ0KICAgICAgICBncm91cHNba2V5XS5wdXNoKHByb2MpOw0KICAgIH0pOw0KDQogICAgY29uc3QgdGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXZhaWxhYmlsaXR5Qm9keScpOw0KICAgIHRib2R5LmlubmVySFRNTCA9ICcnOw0KDQogICAgT2JqZWN0LmtleXMoZ3JvdXBzKS5mb3JFYWNoKGtleSA9PiB7DQogICAgICAgIGNvbnN0IFtvcGVyYXRvciwgZGF0ZV0gPSBrZXkuc3BsaXQoJ18nKTsNCiAgICAgICAgbGV0IHVzZWRNb3JuaW5nID0gMDsNCiAgICAgICAgbGV0IHVzZWRBZnRlcm5vb24gPSAwOw0KDQogICAgICAgIGdyb3Vwc1trZXldLmZvckVhY2gocHJvYyA9PiB7DQogICAgICAgICAgICBjb25zdCBzdGFydCA9IHByb2Muc3RhcnQ7DQogICAgICAgICAgICBjb25zdCBlbmQgPSBwcm9jLmVuZDsNCiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gKGVuZCAtIHN0YXJ0KSAvIDYwOw0KDQogICAgICAgICAgICBpZiAoc3RhcnQgPj0gNyAqIDM2MDAgJiYgZW5kIDw9IDExLjUgKiAzNjAwKSB7DQogICAgICAgICAgICAgICAgdXNlZE1vcm5pbmcgKz0gZHVyYXRpb247DQogICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0ID49IDEzLjUgKiAzNjAwICYmIGVuZCA8PSAxNyAqIDM2MDApIHsNCiAgICAgICAgICAgICAgICB1c2VkQWZ0ZXJub29uICs9IGR1cmF0aW9uOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB1c2VkTW9ybmluZyArPSBkdXJhdGlvbiAvIDI7DQogICAgICAgICAgICAgICAgdXNlZEFmdGVybm9vbiArPSBkdXJhdGlvbiAvIDI7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQogICAgICAgIGNvbnN0IGZyZWVNb3JuaW5nID0gTWF0aC5tYXgoMjcwIC0gdXNlZE1vcm5pbmcsIDApOw0KICAgICAgICBjb25zdCBmcmVlQWZ0ZXJub29uID0gTWF0aC5tYXgoMjEwIC0gdXNlZEFmdGVybm9vbiwgMCk7DQoNCiAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsNCiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoImhlcmItcm93Iik7DQogICAgICAgIHJvdy5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICA8dGQ+PGEgaHJlZj0iIyIgb25jbGljaz0ic2hvd1Byb2NlZHVyZXNGb3JPcGVyYXRvcihcYCR7b3BlcmF0b3J9XGAsIFxgJHtkYXRlfVxgKTtyZXR1cm4gZmFsc2U7IiBzdHlsZT0iY29sb3I6IzM0OThkYjtmb250LXdlaWdodDpib2xkIj4ke29wZXJhdG9yLnJlcGxhY2UoLywvZywgJycpfTwvYT48L3RkPg0KICAgICAgICAgICAgPHRkPiR7ZGF0ZX08L3RkPg0KICAgICAgICAgICAgPHRkPiR7KHVzZWRNb3JuaW5nICsgdXNlZEFmdGVybm9vbikudG9GaXhlZCgxKX08L3RkPg0KICAgICAgICAgICAgPHRkPiR7ZnJlZU1vcm5pbmcudG9GaXhlZCgxKX0gcGjDunQ8L3RkPg0KICAgICAgICAgICAgPHRkPiR7ZnJlZUFmdGVybm9vbi50b0ZpeGVkKDEpfSBwaMO6dDwvdGQ+DQogICAgICAgIGA7DQogICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHJvdyk7DQogICAgfSk7DQp9DQoNCmZ1bmN0aW9uIHRvZ2dsZUF2YWlsYWJpbGl0eSgpIHsNCiAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdmFpbGFiaWxpdHlUYWJsZScpOw0KICAgIGlmICh0YWJsZS5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHsNCiAgICAgICAgdGFibGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgIGNhbGN1bGF0ZUF2YWlsYWJpbGl0eSgpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIHRhYmxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBjYWxjdWxhdGVBdmFpbGFiaWxpdHkoKSB7DQogICAgY29uc3QgZ3JvdXBzID0ge307DQoNCiAgICBhbGxQcm9jZWR1cmVzLmZvckVhY2gocHJvYyA9PiB7DQogICAgICAgIGNvbnN0IGtleSA9IGAke3Byb2Mub3BlcmF0b3J9XyR7cHJvYy5kYXRlfWA7DQogICAgICAgIGlmICghZ3JvdXBzW2tleV0pIHsNCiAgICAgICAgICAgIGdyb3Vwc1trZXldID0gW107DQogICAgICAgIH0NCiAgICAgICAgZ3JvdXBzW2tleV0ucHVzaChwcm9jKTsNCiAgICB9KTsNCg0KICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F2YWlsYWJpbGl0eUJvZHknKTsNCiAgICB0Ym9keS5pbm5lckhUTUwgPSAnJzsNCg0KICAgIE9iamVjdC5rZXlzKGdyb3VwcykuZm9yRWFjaChrZXkgPT4gew0KICAgICAgICBjb25zdCBbb3BlcmF0b3IsIGRhdGVdID0ga2V5LnNwbGl0KCdfJyk7DQogICAgICAgIGNvbnN0IHByb2NlZHVyZXMgPSBncm91cHNba2V5XTsNCiAgICAgICAgcHJvY2VkdXJlcy5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0IC0gYi5zdGFydCk7DQoNCiAgICAgICAgY29uc3QgbW9ybmluZ1N0YXJ0ID0gNyAqIDM2MDA7DQogICAgICAgIGNvbnN0IG1vcm5pbmdFbmQgPSAxMS41ICogMzYwMDsNCiAgICAgICAgY29uc3QgYWZ0ZXJub29uU3RhcnQgPSAxMy41ICogMzYwMDsNCiAgICAgICAgY29uc3QgYWZ0ZXJub29uRW5kID0gMTcgKiAzNjAwOw0KDQogICAgICAgIGNvbnN0IG1vcm5pbmdGcmVlID0gZ2V0RnJlZVNsb3RzKHByb2NlZHVyZXMsIG1vcm5pbmdTdGFydCwgbW9ybmluZ0VuZCk7DQogICAgICAgIGNvbnN0IGFmdGVybm9vbkZyZWUgPSBnZXRGcmVlU2xvdHMocHJvY2VkdXJlcywgYWZ0ZXJub29uU3RhcnQsIGFmdGVybm9vbkVuZCk7DQoNCiAgICAgICAgY29uc3QgdXNlZE1pbnV0ZXMgPSBwcm9jZWR1cmVzLnJlZHVjZSgoc3VtLCBwKSA9PiBzdW0gKyAocC5lbmQgLSBwLnN0YXJ0KS82MCwgMCk7DQoNCiAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsNCiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoImhlcmItcm93Iik7DQogICAgICAgIHJvdy5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICA8dGQ+PGEgaHJlZj0iIyIgb25jbGljaz0ic2hvd1Byb2NlZHVyZXNGb3JPcGVyYXRvcihcYCR7b3BlcmF0b3J9XGAsIFxgJHtkYXRlfVxgKTtyZXR1cm4gZmFsc2U7IiBzdHlsZT0iY29sb3I6IzM0OThkYjtmb250LXdlaWdodDpib2xkIj4ke29wZXJhdG9yLnJlcGxhY2UoLywvZywgJycpfTwvYT48L3RkPg0KICAgICAgICAgICAgPHRkPiR7ZGF0ZX08L3RkPg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8dGQ+JHttb3JuaW5nRnJlZX08L3RkPg0KICAgICAgICAgICAgPHRkPiR7YWZ0ZXJub29uRnJlZX08L3RkPg0KICAgICAgICBgOw0KICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChyb3cpOw0KICAgIH0pOw0KfQ0KDQpmdW5jdGlvbiBnZXRGcmVlU2xvdHMocHJvY2VkdXJlcywgc3RhcnQsIGVuZCkgew0KICAgIGNvbnN0IGJ1c3kgPSBwcm9jZWR1cmVzLm1hcChwID0+ICh7DQogICAgICAgIHN0YXJ0OiBwLnN0YXJ0LA0KICAgICAgICBlbmQ6IHAuZW5kICsgKChwLnByb2NlZHVyZUluZm8/LmJ1ZmZlciB8fCAwKSAqIDYwKQ0KICAgIH0pKS5maWx0ZXIocCA9PiBwLmVuZCA+IHN0YXJ0ICYmIHAuc3RhcnQgPCBlbmQpOw0KDQogICAgYnVzeS5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0IC0gYi5zdGFydCk7DQoNCiAgICBjb25zdCBmcmVlID0gW107DQogICAgbGV0IGN1cnNvciA9IHN0YXJ0Ow0KDQogICAgZm9yIChjb25zdCBiIG9mIGJ1c3kpIHsNCiAgICAgICAgaWYgKGIuc3RhcnQgPiBjdXJzb3IgJiYgYi5zdGFydCA+IHN0YXJ0ICYmIGN1cnNvciA8IGVuZCkgew0KICAgICAgICAgICAgY29uc3QgZnJlZVN0YXJ0ID0gTWF0aC5tYXgoY3Vyc29yLCBzdGFydCk7DQogICAgICAgICAgICBjb25zdCBmcmVlRW5kID0gTWF0aC5taW4oYi5zdGFydCwgZW5kKTsNCiAgICAgICAgICAgIGlmIChmcmVlRW5kID4gZnJlZVN0YXJ0KSB7DQogICAgICAgICAgICAgICAgZnJlZS5wdXNoKGAke2Zvcm1hdFRpbWUoZnJlZVN0YXJ0KX0gLSAke2Zvcm1hdFRpbWUoZnJlZUVuZCl9YCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgY3Vyc29yID0gTWF0aC5tYXgoY3Vyc29yLCBiLmVuZCk7DQogICAgfQ0KDQogICAgaWYgKGN1cnNvciA8IGVuZCkgew0KICAgICAgICBmcmVlLnB1c2goYCR7Zm9ybWF0VGltZShjdXJzb3IpfSAtICR7Zm9ybWF0VGltZShlbmQpfWApOw0KICAgIH0NCg0KICAgIHJldHVybiBmcmVlLmxlbmd0aCA/IGZyZWUuam9pbignPGJyPicpIDogJzxpPktow7RuZyBjw7JuIHRy4buRbmc8L2k+JzsNCn0NCg0KZnVuY3Rpb24gZm9ybWF0VGltZShzZWMpIHsNCiAgICBjb25zdCBoID0gTWF0aC5mbG9vcihzZWMgLyAzNjAwKTsNCiAgICBjb25zdCBtID0gTWF0aC5mbG9vcigoc2VjICUgMzYwMCkgLyA2MCk7DQogICAgcmV0dXJuIGgudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpICsgJ2gnICsgbS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7DQp9DQoNCmZ1bmN0aW9uIHNob3dQcm9jZWR1cmVzRm9yT3BlcmF0b3Iob3BlcmF0b3IsIGRhdGUpIHsNCiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2NlZHVyZU92ZXJsYXknKTsNCiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwQ29udGVudCcpOw0KICAgIGNvbnN0IGxpc3QgPSBhbGxQcm9jZWR1cmVzLmZpbHRlcihwID0+IHAub3BlcmF0b3IgPT09IG9wZXJhdG9yICYmIHAuZGF0ZSA9PT0gZGF0ZSk7DQoNCiAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHsNCiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAiPGk+S2jDtG5nIHTDrG0gdGjhuqV5IHRo4bunIHRodeG6rXQ8L2k+IjsNCiAgICB9IGVsc2Ugew0KICAgICAgICBsaXN0LnNvcnQoKGEsIGIpID0+IGEuc3RhcnQgLSBiLnN0YXJ0KTsNCiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAiPGI+TmfGsOG7nWkgdGjhu7FjIGhp4buHbjo8L2I+ICIgKyBvcGVyYXRvciArICI8YnI+PGI+TmfDoHk6PC9iPiAiICsgZGF0ZSArICI8YnI+PGJyPiIgKw0KICAgICAgICAgICAgIjx1bCBzdHlsZT0ncGFkZGluZy1sZWZ0OjIwcHgnPiIgKyBsaXN0Lm1hcChwID0+IA0KICAgICAgICAgICAgICAgICI8bGk+PGI+IiArIHAucGF0aWVudE5hbWUgKyAiPC9iPiAtICIgKyBwLnByb2NlZHVyZSArICIgKCIgKyBwLmRpc3BsYXlTdGFydCArICIg4oaSICIgKyBwLmRpc3BsYXlFbmQgKyAiKTwvbGk+Ig0KICAgICAgICAgICAgKS5qb2luKCcnKSArICI8L3VsPiI7DQogICAgfQ0KDQogICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCn0NCg0KZnVuY3Rpb24gY2xvc2VQcm9jZWR1cmVQb3B1cCgpIHsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvY2VkdXJlT3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQp9DQo8L3NjcmlwdD4NCjwhLS0gUG9wdXAgdGjhu6cgdGh14bqtdCBjaGkgdGnhur90IHbhu5tpIG92ZXJsYXkgLS0+DQo8ZGl2IGlkPSJwcm9jZWR1cmVPdmVybGF5IiBzdHlsZT0iZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjQpO3otaW5kZXg6MTAwMDAiIG9uY2xpY2s9ImNsb3NlUHJvY2VkdXJlUG9wdXAoKSI+DQogIDxkaXYgaWQ9InByb2NlZHVyZVBvcHVwIiBvbmNsaWNrPSJldmVudC5zdG9wUHJvcGFnYXRpb24oKSIgc3R5bGU9InBvc2l0aW9uOnJlbGF0aXZlO3RvcDoxMCU7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7YmFja2dyb3VuZDojZmZmO2NvbG9yOiMwMDA7Ym9yZGVyOjJweCBzb2xpZCAjMzQ5OGRiO3BhZGRpbmc6MjBweDtib3JkZXItcmFkaXVzOjhweDtib3gtc2hhZG93OjAgNXB4IDIwcHggcmdiYSgwLDAsMCwwLjMpO21heC1oZWlnaHQ6NzB2aDtvdmVyZmxvdzphdXRvO2ZvbnQtZmFtaWx5OkludGVyLHNhbnMtc2VyaWY7bWF4LXdpZHRoOjYwMHB4Ij4NCiAgICA8aDM+Q2hpIHRp4bq/dCB0aOG7pyB0aHXhuq10PC9oMz4NCiAgICA8ZGl2IGlkPSJwb3B1cENvbnRlbnQiPjwvZGl2Pg0KICAgIDxici8+DQogICAgPGJ1dHRvbiBjbGFzcz0iYnRuIiBvbmNsaWNrPSJjbG9zZVByb2NlZHVyZVBvcHVwKCkiPsSQw7NuZzwvYnV0dG9uPg0KICA8L2Rpdj4NCjwvZGl2Pg0KDQoNCjxzY3JpcHQ+DQpmdW5jdGlvbiB0b2dnbGVIZXJiTGlzdCgpIHsNCiAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiUHJvY2VkdXJlVGFibGUnKTsNCiAgICBpZiAodGFibGUuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7DQogICAgICAgIHRhYmxlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICByZW5kZXJIZXJiTGlzdCgpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIHRhYmxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgfQ0KfQ0KDQpmdW5jdGlvbiByZW5kZXJIZXJiTGlzdCgpIHsNCiAgICBjb25zdCBoZXJicyA9IFtdOyAvLyBUaGF5IGLhurFuZyBk4buvIGxp4buHdSB0aOG7sWMgbuG6v3UgY8OzDQogICAgY29uc3QgdGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaGVyYlByb2NlZHVyZVRhYmxlIHRib2R5Jyk7DQoNCiAgICBpZiAoaGVyYnMubGVuZ3RoID09PSAwKSB7DQogICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7DQogICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCJoZXJiLXJvdyIpOw0KICAgICAgICByb3cuaW5uZXJIVE1MID0gYDx0ZCBjb2xzcGFuPSI1Ij48Y2VudGVyPktow7RuZyBjw7MgZOG7ryBsaeG7h3Ugc+G6r2MgdGh14buRYyB0aGFuZzwvY2VudGVyPjwvdGQ+YDsNCiAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQocm93KTsNCiAgICB9DQp9DQo8L3NjcmlwdD4NCg0KDQoNCjxzY3JpcHQ+DQpmdW5jdGlvbiB0b2dnbGVIZXJiTGlzdCgpIHsNCiAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiUHJvY2VkdXJlVGFibGUnKTsNCiAgICBpZiAodGFibGUuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7DQogICAgICAgIHRhYmxlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICByZW5kZXJIZXJiTGlzdCgpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIHRhYmxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgfQ0KfQ0KPC9zY3JpcHQ+DQoNCg0KDQoNCg0KDQoNCg0KPC9odG1sPg0KPHNjcmlwdD4NCmZ1bmN0aW9uIHJlbmRlckhlcmJMaXN0KCkgew0KICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJUYWJsZUJvZHknKTsNCiAgICB0Ym9keS5pbm5lckhUTUwgPSAnJzsNCg0KICAgIGNvbnN0IGhlcmJzID0gd2luZG93LmFsbEhlcmJQcm9jZWR1cmVzIHx8IFtdOw0KICAgIGNvbnN0IGRhdGVGaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYkRhdGVGaWx0ZXInKTsNCiAgICBjb25zdCBkb2N0b3JGaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYkRvY3RvckZpbHRlcicpOw0KDQogICAgaWYgKCFkYXRlRmlsdGVyLmRhdGFzZXQuaW5pdGlhbGl6ZWQpIHsNCiAgICAgICAgY29uc3QgdW5pcXVlRGF0ZXMgPSBbLi4ubmV3IFNldChoZXJicy5tYXAoaCA9PiBoLmRhdGUpKV0uc29ydCgoYSwgYikgPT4gew0KICAgICAgICAgICAgY29uc3QgW2RhLCBtYSwgeWFdID0gYS5zcGxpdCgnLycpLm1hcChOdW1iZXIpOw0KICAgICAgICAgICAgY29uc3QgW2RiLCBtYiwgeWJdID0gYi5zcGxpdCgnLycpLm1hcChOdW1iZXIpOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHlhLCBtYSAtIDEsIGRhKSAtIG5ldyBEYXRlKHliLCBtYiAtIDEsIGRiKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgY29uc3QgdW5pcXVlRG9jdG9ycyA9IFsuLi5uZXcgU2V0KGhlcmJzLm1hcChoID0+IGguZG9jdG9yIHx8ICdLaMO0bmcgY8OzJykpXS5zb3J0KCk7DQoNCiAgICAgICAgZGF0ZUZpbHRlci5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjPC9vcHRpb24+JyArDQogICAgICAgICAgICB1bmlxdWVEYXRlcy5tYXAoZCA9PiBgPG9wdGlvbiB2YWx1ZT0iJHtkfSI+JHtkfTwvb3B0aW9uPmApLmpvaW4oJycpOw0KDQogICAgICAgIGRvY3RvckZpbHRlci5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjIGLDoWMgc8SpPC9vcHRpb24+JyArDQogICAgICAgICAgICB1bmlxdWVEb2N0b3JzLm1hcChkID0+IGA8b3B0aW9uIHZhbHVlPSIke2R9Ij4ke2R9PC9vcHRpb24+YCkuam9pbignJyk7DQoNCiAgICAgICAgZGF0ZUZpbHRlci5kYXRhc2V0LmluaXRpYWxpemVkID0gInRydWUiOw0KICAgICAgICBkYXRlRmlsdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHJlbmRlckhlcmJMaXN0KTsNCiAgICAgICAgZG9jdG9yRmlsdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHJlbmRlckhlcmJMaXN0KTsNCiAgICB9DQoNCiAgICBjb25zdCBzZWxlY3RlZERhdGUgPSBkYXRlRmlsdGVyLnZhbHVlOw0KICAgIGNvbnN0IHNlbGVjdGVkRG9jdG9yID0gZG9jdG9yRmlsdGVyLnZhbHVlOw0KDQogICAgY29uc3QgZmlsdGVyZWRIZXJicyA9IGhlcmJzLmZpbHRlcihwID0+DQogICAgICAgIChzZWxlY3RlZERhdGUgPT09ICdhbGwnIHx8IHAuZGF0ZSA9PT0gc2VsZWN0ZWREYXRlKSAmJg0KICAgICAgICAoc2VsZWN0ZWREb2N0b3IgPT09ICdhbGwnIHx8IHAuZG9jdG9yID09PSBzZWxlY3RlZERvY3RvcikNCiAgICApOw0KDQogICAgaWYgKGZpbHRlcmVkSGVyYnMubGVuZ3RoID09PSAwKSB7DQogICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7DQogICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCJoZXJiLXJvdyIpOw0KICAgICAgICByb3cuaW5uZXJIVE1MID0gYDx0ZCBjb2xzcGFuPSI1Ij48Y2VudGVyPktow7RuZyBjw7MgZOG7ryBsaeG7h3Ugc+G6r2MgdGh14buRYyB0aGFuZzwvY2VudGVyPjwvdGQ+YDsNCiAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQocm93KTsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGZpbHRlcmVkSGVyYnMuZm9yRWFjaChwID0+IHsNCiAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsNCiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoImhlcmItcm93Iik7DQogICAgICAgIHJvdy5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICA8dGQ+JHtwLnBhdGllbnROYW1lfTwvdGQ+DQogICAgICAgICAgICA8dGQ+JHtwLnByb2NlZHVyZX08L3RkPg0KICAgICAgICAgICAgPHRkPiR7cC5kYXRlfTwvdGQ+DQogICAgICAgICAgICA8dGQ+JHtwLmRpc3BsYXlTdGFydH0g4oaSICR7cC5kaXNwbGF5RW5kfTwvdGQ+DQogICAgICAgICAgICA8dGQ+JHtwLm9wZXJhdG9yLnJlcGxhY2UoLywvZywgJycpfTwvdGQ+DQogICAgICAgIGA7DQogICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHJvdyk7DQogICAgfSk7DQp9DQoNCmZ1bmN0aW9uIHRvZ2dsZUhlcmJMaXN0KCkgew0KICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJQcm9jZWR1cmVUYWJsZScpOw0KICAgIGlmICh0YWJsZS5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHsNCiAgICAgICAgdGFibGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgIHJlbmRlckhlcmJMaXN0KCk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgdGFibGUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICB9DQp9DQo8L3NjcmlwdD4NCg0KPHNjcmlwdD4NCmZ1bmN0aW9uIHJlbmRlckhlcmJMaXN0KCkgew0KICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJUYWJsZUJvZHknKTsNCiAgICB0Ym9keS5pbm5lckhUTUwgPSAnJzsNCg0KICAgIGNvbnN0IGhlcmJzID0gd2luZG93LmFsbEhlcmJQcm9jZWR1cmVzIHx8IFtdOw0KICAgIGNvbnN0IGRhdGVGaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYkRhdGVGaWx0ZXInKTsNCiAgICBjb25zdCBkb2N0b3JGaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYkRvY3RvckZpbHRlcicpOw0KDQogICAgaWYgKCFkYXRlRmlsdGVyLmRhdGFzZXQuaW5pdGlhbGl6ZWQpIHsNCiAgICAgICAgY29uc3QgdW5pcXVlRGF0ZXMgPSBbLi4ubmV3IFNldChoZXJicy5tYXAoaCA9PiBoLmRhdGUpKV0uc29ydCgoYSwgYikgPT4gew0KICAgICAgICAgICAgY29uc3QgW2RhLCBtYSwgeWFdID0gYS5zcGxpdCgnLycpLm1hcChOdW1iZXIpOw0KICAgICAgICAgICAgY29uc3QgW2RiLCBtYiwgeWJdID0gYi5zcGxpdCgnLycpLm1hcChOdW1iZXIpOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHlhLCBtYSAtIDEsIGRhKSAtIG5ldyBEYXRlKHliLCBtYiAtIDEsIGRiKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgY29uc3QgdW5pcXVlRG9jdG9ycyA9IFsuLi5uZXcgU2V0KGhlcmJzLm1hcChoID0+IGguZG9jdG9yIHx8ICdLaMO0bmcgY8OzJykpXS5zb3J0KCk7DQoNCiAgICAgICAgZGF0ZUZpbHRlci5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjIGPDoWMgbmfDoHk8L29wdGlvbj4nICsNCiAgICAgICAgICAgIHVuaXF1ZURhdGVzLm1hcChkID0+IGA8b3B0aW9uIHZhbHVlPSIke2R9Ij4ke2R9PC9vcHRpb24+YCkuam9pbignJyk7DQoNCiAgICAgICAgZG9jdG9yRmlsdGVyLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJhbGwiPlThuqV0IGPhuqMgYsOhYyBzxKk8L29wdGlvbj4nICsNCiAgICAgICAgICAgIHVuaXF1ZURvY3RvcnMubWFwKGQgPT4gYDxvcHRpb24gdmFsdWU9IiR7ZH0iPiR7ZH08L29wdGlvbj5gKS5qb2luKCcnKTsNCg0KICAgICAgICBkYXRlRmlsdGVyLmRhdGFzZXQuaW5pdGlhbGl6ZWQgPSAidHJ1ZSI7DQogICAgICAgIGRhdGVGaWx0ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgcmVuZGVySGVyYkxpc3QpOw0KICAgICAgICBkb2N0b3JGaWx0ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgcmVuZGVySGVyYkxpc3QpOw0KICAgIH0NCg0KICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IGRhdGVGaWx0ZXIudmFsdWU7DQogICAgY29uc3Qgc2VsZWN0ZWREb2N0b3IgPSBkb2N0b3JGaWx0ZXIudmFsdWU7DQoNCiAgICBjb25zdCBmaWx0ZXJlZEhlcmJzID0gaGVyYnMuZmlsdGVyKHAgPT4NCiAgICAgICAgKHNlbGVjdGVkRGF0ZSA9PT0gJ2FsbCcgfHwgcC5kYXRlID09PSBzZWxlY3RlZERhdGUpICYmDQogICAgICAgIChzZWxlY3RlZERvY3RvciA9PT0gJ2FsbCcgfHwgcC5kb2N0b3IgPT09IHNlbGVjdGVkRG9jdG9yKQ0KICAgICk7DQoNCiAgICBpZiAoZmlsdGVyZWRIZXJicy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsNCiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoImhlcmItcm93Iik7DQogICAgICAgIHJvdy5pbm5lckhUTUwgPSBgPHRkIGNvbHNwYW49IjUiPjxjZW50ZXI+S2jDtG5nIGPDsyBk4buvIGxp4buHdSBz4bqvYyB0aHXhu5FjIHRoYW5nPC9jZW50ZXI+PC90ZD5gOw0KICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChyb3cpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZmlsdGVyZWRIZXJicy5mb3JFYWNoKHAgPT4gew0KICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOw0KICAgICAgICByb3cuY2xhc3NMaXN0LmFkZCgiaGVyYi1yb3ciKTsNCiAgICAgICAgcm93LmlubmVySFRNTCA9IGANCiAgICAgICAgICAgIDx0ZD4ke3AucGF0aWVudE5hbWV9PC90ZD4NCiAgICAgICAgICAgIDx0ZD4ke3AucHJvY2VkdXJlfTwvdGQ+DQogICAgICAgICAgICA8dGQ+JHtwLmRhdGV9PC90ZD4NCiAgICAgICAgICAgIDx0ZD4ke3AuZGlzcGxheVN0YXJ0fSDihpIgJHtwLmRpc3BsYXlFbmR9PC90ZD4NCiAgICAgICAgICAgIDx0ZD4ke3Aub3BlcmF0b3IucmVwbGFjZSgvLC9nLCAnJyl9PC90ZD4NCiAgICAgICAgYDsNCiAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQocm93KTsNCiAgICB9KTsNCn0NCg0KZnVuY3Rpb24gdG9nZ2xlSGVyYkxpc3QoKSB7DQogICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYlByb2NlZHVyZVRhYmxlJyk7DQogICAgaWYgKHRhYmxlLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykgew0KICAgICAgICB0YWJsZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgcmVuZGVySGVyYkxpc3QoKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICB0YWJsZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIH0NCn0NCjwvc2NyaXB0Pg0KDQoNCg0KPHNjcmlwdD4NCihmdW5jdGlvbigpew0KICAvLyAtLS0gdGnhu4duIMOtY2ggY2h14bqpbiBob8OhIHTDqm4gLS0tDQogIGZ1bmN0aW9uIGNsZWFuRGlzcGxheShuYW1lKXsNCiAgICByZXR1cm4gKG5hbWV8fCcnKQ0KICAgICAgLnRvU3RyaW5nKCkNCiAgICAgIC5yZXBsYWNlKC9bLO+8jF0rXHMqJC8sJycpICAgLy8gYuG7jyBk4bqldSBwaOG6qXkvY3Xhu5FpIGTDsm5nDQogICAgICAucmVwbGFjZSgvXHMrL2csJyAnKSAgICAgICAgLy8gZ+G7mXAga2hv4bqjbmcgdHLhuq9uZw0KICAgICAgLnRyaW0oKTsNCiAgfQ0KICBmdW5jdGlvbiBub3JtKG5hbWUpew0KICAgIHJldHVybiBjbGVhbkRpc3BsYXkobmFtZSkudG9Mb3dlckNhc2UoKTsNCiAgfQ0KDQogIC8vIFTDrW5oIMSRYSBz4buRIGNobyB04burbmcgbmfDoHkNCiAgZnVuY3Rpb24gY29tcHV0ZU1ham9yaXR5QnlEYXRlKHJvd3Mpew0KICAgIGNvbnN0IG1hcCA9IHt9Ow0KICAgIHJvd3MuZm9yRWFjaChyPT57DQogICAgICBjb25zdCBkID0gci5kYXRlOw0KICAgICAgY29uc3QgbiA9IG5vcm0oci5vcGVyYXRvcik7DQogICAgICBpZighbiB8fCBuID09PSAna2jDtG5nIGPDsycpIHJldHVybjsNCiAgICAgIGlmKCFtYXBbZF0pIG1hcFtkXSA9IHt9Ow0KICAgICAgbWFwW2RdW25dID0gKG1hcFtkXVtuXXx8MCkrMTsNCiAgICB9KTsNCiAgICBjb25zdCBvdXQgPSB7fTsNCiAgICBPYmplY3Qua2V5cyhtYXApLmZvckVhY2goZD0+ew0KICAgICAgY29uc3QgYXJyID0gT2JqZWN0LmVudHJpZXMobWFwW2RdKS5zb3J0KChhLGIpPT5iWzFdLWFbMV0pOw0KICAgICAgY29uc3QgdG9wID0gYXJyWzBdIHx8IFtudWxsLDBdOw0KICAgICAgY29uc3Qgc2Vjb25kID0gYXJyWzFdIHx8IFtudWxsLDBdOw0KICAgICAgb3V0W2RdID0gew0KICAgICAgICB0b3BOb3JtOiB0b3BbMF0sDQogICAgICAgIHRvcENvdW50OiB0b3BbMV0sDQogICAgICAgIHNlY29uZENvdW50OiBzZWNvbmRbMV0NCiAgICAgIH07DQogICAgfSk7DQogICAgcmV0dXJuIG91dDsNCiAgfQ0KDQogIC8vID09PSBIw4BNIEdISSDEkMOIID09PQ0KICB3aW5kb3cucmVuZGVySGVyYkxpc3QgPSBmdW5jdGlvbigpew0KICAgIGNvbnN0IGhlcmJzID0gKHdpbmRvdy5hbGxIZXJiUHJvY2VkdXJlc3x8W10pLm1hcChoPT4oew0KICAgICAgLi4uaCwNCiAgICAgIG9wQ2xlYW46IGNsZWFuRGlzcGxheShoLm9wZXJhdG9yKSwNCiAgICAgIG9wTm9ybTogIG5vcm0oaC5vcGVyYXRvcikNCiAgICB9KSk7DQoNCiAgICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiVGFibGVCb2R5Jyk7DQogICAgY29uc3QgZGF0ZUZpbHRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiRGF0ZUZpbHRlcicpOw0KICAgIGNvbnN0IGRvY3RvckZpbHRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiRG9jdG9yRmlsdGVyJyk7DQogICAgdGJvZHkuaW5uZXJIVE1MID0gJyc7DQoNCiAgICAvLyBLaOG7n2kgdOG6oW8gZHJvcGRvd24gMSBs4bqnbg0KICAgIGlmKCFkYXRlRmlsdGVyLmRhdGFzZXQuaW5pdGlhbGl6ZWQpew0KICAgICAgY29uc3QgdW5pcXVlRGF0ZXMgPSBbLi4ubmV3IFNldChoZXJicy5tYXAoaD0+aC5kYXRlKSldLnNvcnQoKGEsYik9PnsNCiAgICAgICAgY29uc3QgW2RhLG1hLHlhXSA9IGEuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTsNCiAgICAgICAgY29uc3QgW2RiLG1iLHliXSA9IGIuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTsNCiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHlhLG1hLTEsZGEpIC0gbmV3IERhdGUoeWIsbWItMSxkYik7DQogICAgICB9KTsNCiAgICAgIGNvbnN0IHVuaXF1ZURvY3RvcnMgPSBbLi4ubmV3IFNldChoZXJicy5tYXAoaD0+aC5kb2N0b3J8fCdLaMO0bmcgY8OzJykpXS5zb3J0KCk7DQoNCiAgICAgIGRhdGVGaWx0ZXIuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9ImFsbCI+VOG6pXQgY+G6ozwvb3B0aW9uPicgKw0KICAgICAgICB1bmlxdWVEYXRlcy5tYXAoZD0+YDxvcHRpb24gdmFsdWU9IiR7ZH0iPiR7ZH08L29wdGlvbj5gKS5qb2luKCcnKTsNCiAgICAgIGRvY3RvckZpbHRlci5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjIGLDoWMgc8SpPC9vcHRpb24+JyArDQogICAgICAgIHVuaXF1ZURvY3RvcnMubWFwKGQ9PmA8b3B0aW9uIHZhbHVlPSIke2R9Ij4ke2R9PC9vcHRpb24+YCkuam9pbignJyk7DQoNCiAgICAgIGRhdGVGaWx0ZXIuZGF0YXNldC5pbml0aWFsaXplZCA9ICd0cnVlJzsNCiAgICAgIGRhdGVGaWx0ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgd2luZG93LnJlbmRlckhlcmJMaXN0KTsNCiAgICAgIGRvY3RvckZpbHRlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB3aW5kb3cucmVuZGVySGVyYkxpc3QpOw0KICAgIH0NCg0KICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IGRhdGVGaWx0ZXIudmFsdWU7DQogICAgY29uc3Qgc2VsZWN0ZWREb2N0b3IgPSBkb2N0b3JGaWx0ZXIudmFsdWU7DQoNCiAgICBjb25zdCBmaWx0ZXJlZCA9IGhlcmJzLmZpbHRlcihwID0+DQogICAgICAoc2VsZWN0ZWREYXRlID09PSAnYWxsJyB8fCBwLmRhdGUgPT09IHNlbGVjdGVkRGF0ZSkgJiYNCiAgICAgIChzZWxlY3RlZERvY3RvciA9PT0gJ2FsbCcgfHwgcC5kb2N0b3IgPT09IHNlbGVjdGVkRG9jdG9yKQ0KICAgICk7DQoNCiAgICBpZihmaWx0ZXJlZC5sZW5ndGggPT09IDApew0KICAgICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOw0KICAgICAgdHIuY2xhc3NOYW1lID0gJ2hlcmItcm93JzsNCiAgICAgIHRyLmlubmVySFRNTCA9ICc8dGQgY29sc3Bhbj0iNSI+PGNlbnRlcj5LaMO0bmcgY8OzIGThu68gbGnhu4d1IHPhuq9jIHRodeG7kWMgdGhhbmc8L2NlbnRlcj48L3RkPic7DQogICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7DQogICAgICByZXR1cm47DQogICAgfQ0KDQogICAgLy8gxJBhIHPhu5EgdMOtbmggdGhlbyAqdG/DoG4gYuG7mSBk4buvIGxp4buHdSosIGtow7RuZyBjaOG7iSBmaWx0ZXJlZA0KICAgIGNvbnN0IG1ham9yaXR5ID0gY29tcHV0ZU1ham9yaXR5QnlEYXRlKGhlcmJzKTsNCg0KICAgIGZpbHRlcmVkLmZvckVhY2gocD0+ew0KICAgICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOw0KICAgICAgdHIuY2xhc3NOYW1lID0gJ2hlcmItcm93JzsNCiAgICAgIGNvbnN0IG0gPSBtYWpvcml0eVtwLmRhdGVdOw0KICAgICAgY29uc3QgaGFzTWFqb3JpdHkgPSBtICYmIG0udG9wTm9ybSAmJiBtLnRvcENvdW50ID4gbS5zZWNvbmRDb3VudDsNCiAgICAgIGlmKGhhc01ham9yaXR5ICYmIHAub3BOb3JtICE9PSBtLnRvcE5vcm0pew0KICAgICAgICB0ci5jbGFzc0xpc3QuYWRkKCdoZXJiLW91dGxpZXInKTsNCiAgICAgIH0NCiAgICAgIHRyLmlubmVySFRNTCA9IGANCiAgICAgICAgPHRkPiR7cC5wYXRpZW50TmFtZX08L3RkPg0KICAgICAgICA8dGQ+JHtwLnByb2NlZHVyZX08L3RkPg0KICAgICAgICA8dGQ+JHtwLmRhdGV9PC90ZD4NCiAgICAgICAgPHRkPiR7cC5kaXNwbGF5U3RhcnR9ICZyYXJyOyAke3AuZGlzcGxheUVuZH08L3RkPg0KICAgICAgICA8dGQ+JHtwLm9wQ2xlYW59PC90ZD4NCiAgICAgIGA7DQogICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7DQogICAgfSk7DQogIH07DQp9KSgpOw0KDQoNCg0KDQooZnVuY3Rpb24oKXsNCiAgLyogPT09PSBUSeG7hk4gw41DSCBDSFXhuqhOIEhPw4EgVMOKTiA9PT09ICovDQogIGZ1bmN0aW9uIGNsZWFuRGlzcGxheShuYW1lKXsNCiAgICByZXR1cm4gKG5hbWV8fCcnKQ0KICAgICAgLnRvU3RyaW5nKCkNCiAgICAgIC5yZXBsYWNlKC9bLO+8jF0rXHMqJC8sJycpICAgLy8gYuG7jyBk4bqldSBwaOG6qXkvY3Xhu5FpDQogICAgICAucmVwbGFjZSgvXHMrL2csJyAnKQ0KICAgICAgLnRyaW0oKTsNCiAgfQ0KICBmdW5jdGlvbiBub3JtKG5hbWUpew0KICAgIHJldHVybiBjbGVhbkRpc3BsYXkobmFtZSkudG9Mb3dlckNhc2UoKTsNCiAgfQ0KDQogIC8qID09PT0gVMONTkggxJBBIFPhu5AgVEhFTyBOR8OAWSA9PT09ICovDQogIGZ1bmN0aW9uIGNvbXB1dGVNYWpvcml0eUJ5RGF0ZShyb3dzKXsNCiAgICBjb25zdCBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpOw0KICAgIHJvd3MuZm9yRWFjaChyPT57DQogICAgICBjb25zdCBkID0gci5kYXRlOw0KICAgICAgY29uc3QgbiA9IG5vcm0oci5vcGVyYXRvcik7DQogICAgICBpZighbiB8fCBuID09PSAna2jDtG5nIGPDsycpIHJldHVybjsNCiAgICAgIChtYXBbZF18fChtYXBbZF09e30pKVtuXSA9IChtYXBbZF1bbl18fDApKzE7DQogICAgfSk7DQogICAgY29uc3Qgb3V0ID0ge307DQogICAgT2JqZWN0LmtleXMobWFwKS5mb3JFYWNoKGQ9PnsNCiAgICAgIGNvbnN0IGFyciA9IE9iamVjdC5lbnRyaWVzKG1hcFtkXSkuc29ydCgoYSxiKT0+YlsxXS1hWzFdKTsNCiAgICAgIGNvbnN0IHRvcCA9IGFyclswXSB8fCBbbnVsbCwwXTsNCiAgICAgIGNvbnN0IHNlY29uZCA9IGFyclsxXSB8fCBbbnVsbCwwXTsNCiAgICAgIG91dFtkXSA9IHsgdG9wTm9ybTp0b3BbMF0sIHRvcENvdW50OnRvcFsxXSwgc2Vjb25kQ291bnQ6c2Vjb25kWzFdIH07DQogICAgfSk7DQogICAgcmV0dXJuIG91dDsNCiAgfQ0KDQogIC8qID09PT0gVUkgUEjhu6Q6IFTDk00gVOG6rlQgKyBQT1BVUCA9PT09ICovDQogIGZ1bmN0aW9uIGVuc3VyZU91dGxpZXJVSSgpew0KICAgIGNvbnN0IHN1bW1hcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYk91dGxpZXJTdW1tYXJ5Jyk7DQogICAgY29uc3QgbW9kYWwgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiT3V0bGllck1vZGFsJyk7DQogICAgaWYoIXN1bW1hcnkpIGNvbnNvbGUud2FybignVGhp4bq/dSAjaGVyYk91dGxpZXJTdW1tYXJ5IHRyb25nIEhUTUwhJyk7DQogICAgaWYoIW1vZGFsKSAgIGNvbnNvbGUud2FybignVGhp4bq/dSAjaGVyYk91dGxpZXJNb2RhbCB0cm9uZyBIVE1MIScpOw0KICAgIC8vIMSQw7NuZyBwb3B1cA0KICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiT3V0bGllckNsb3NlQnRuJyk7DQogICAgY29uc3QgYmFja2Ryb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYk91dGxpZXJCYWNrZHJvcCcpOw0KICAgIGlmKGJ0bikgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9Pm1vZGFsLnN0eWxlLmRpc3BsYXk9J25vbmUnKTsNCiAgICBpZihiYWNrZHJvcCkgYmFja2Ryb3AuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+bW9kYWwuc3R5bGUuZGlzcGxheT0nbm9uZScpOw0KICB9DQogIGVuc3VyZU91dGxpZXJVSSgpOw0KDQogIC8qID09PT0gR0hJIMSQw4ggSMOATSBSRU5ERVIgPT09PSAqLw0KICB3aW5kb3cucmVuZGVySGVyYkxpc3QgPSBmdW5jdGlvbigpew0KICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJUYWJsZUJvZHknKTsNCiAgICBjb25zdCBkYXRlRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJEYXRlRmlsdGVyJyk7DQogICAgY29uc3QgZG9jdG9yRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJEb2N0b3JGaWx0ZXInKTsNCiAgICBjb25zdCBzdW1tYXJ5RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJPdXRsaWVyU3VtbWFyeScpOw0KICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJPdXRsaWVyTW9kYWwnKTsNCiAgICBjb25zdCBtb2RhbEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYk91dGxpZXJNb2RhbEJvZHknKTsNCiAgICBjb25zdCBtb2RhbEluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYk91dGxpZXJNb2RhbEluZm8nKTsNCg0KICAgIHRib2R5LmlubmVySFRNTCA9ICcnOw0KDQogICAgY29uc3QgaGVyYnNSYXcgPSB3aW5kb3cuYWxsSGVyYlByb2NlZHVyZXMgfHwgW107DQogICAgY29uc3QgaGVyYnMgPSBoZXJic1Jhdy5tYXAoaD0+KHsNCiAgICAgIC4uLmgsDQogICAgICBvcENsZWFuOiBjbGVhbkRpc3BsYXkoaC5vcGVyYXRvciksDQogICAgICBvcE5vcm06IG5vcm0oaC5vcGVyYXRvcikNCiAgICB9KSk7DQoNCiAgICAvKiBLaOG7n2kgdOG6oW8gZHJvcGRvd24gMSBs4bqnbiAqLw0KICAgIGlmKCFkYXRlRmlsdGVyLmRhdGFzZXQuaW5pdGlhbGl6ZWQpew0KICAgICAgY29uc3QgdW5pcXVlRGF0ZXMgPSBbLi4ubmV3IFNldChoZXJicy5tYXAoaD0+aC5kYXRlKSldLnNvcnQoKGEsYik9PnsNCiAgICAgICAgY29uc3QgW2RhLG1hLHlhXSA9IGEuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTsNCiAgICAgICAgY29uc3QgW2RiLG1iLHliXSA9IGIuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTsNCiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHlhLG1hLTEsZGEpIC0gbmV3IERhdGUoeWIsbWItMSxkYik7DQogICAgICB9KTsNCiAgICAgIGNvbnN0IHVuaXF1ZURvY3RvcnMgPSBbLi4ubmV3IFNldChoZXJicy5tYXAoaD0+aC5kb2N0b3J8fCdLaMO0bmcgY8OzJykpXS5zb3J0KCk7DQogICAgICBkYXRlRmlsdGVyLmlubmVySFRNTCA9DQogICAgICAgICc8b3B0aW9uIHZhbHVlPSJhbGwiPlThuqV0IGPhuqM8L29wdGlvbj4nICsNCiAgICAgICAgdW5pcXVlRGF0ZXMubWFwKGQ9PmA8b3B0aW9uIHZhbHVlPSIke2R9Ij4ke2R9PC9vcHRpb24+YCkuam9pbignJyk7DQogICAgICBkb2N0b3JGaWx0ZXIuaW5uZXJIVE1MID0NCiAgICAgICAgJzxvcHRpb24gdmFsdWU9ImFsbCI+VOG6pXQgY+G6oyBiw6FjIHPEqTwvb3B0aW9uPicgKw0KICAgICAgICB1bmlxdWVEb2N0b3JzLm1hcChkPT5gPG9wdGlvbiB2YWx1ZT0iJHtkfSI+JHtkfTwvb3B0aW9uPmApLmpvaW4oJycpOw0KICAgICAgZGF0ZUZpbHRlci5kYXRhc2V0LmluaXRpYWxpemVkID0gJ3RydWUnOw0KICAgICAgZGF0ZUZpbHRlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB3aW5kb3cucmVuZGVySGVyYkxpc3QpOw0KICAgICAgZG9jdG9yRmlsdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHdpbmRvdy5yZW5kZXJIZXJiTGlzdCk7DQogICAgfQ0KDQogICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gZGF0ZUZpbHRlci52YWx1ZTsNCiAgICBjb25zdCBzZWxlY3RlZERvY3RvciA9IGRvY3RvckZpbHRlci52YWx1ZTsNCg0KICAgIGNvbnN0IGZpbHRlcmVkID0gaGVyYnMuZmlsdGVyKHAgPT4NCiAgICAgIChzZWxlY3RlZERhdGUgPT09ICdhbGwnIHx8IHAuZGF0ZSA9PT0gc2VsZWN0ZWREYXRlKSAmJg0KICAgICAgKHNlbGVjdGVkRG9jdG9yID09PSAnYWxsJyB8fCBwLmRvY3RvciA9PT0gc2VsZWN0ZWREb2N0b3IpDQogICAgKTsNCg0KICAgIGlmKGZpbHRlcmVkLmxlbmd0aCA9PT0gMCl7DQogICAgICBjb25zdCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7DQogICAgICB0ci5jbGFzc05hbWUgPSAnaGVyYi1yb3cnOw0KICAgICAgdHIuaW5uZXJIVE1MID0gJzx0ZCBjb2xzcGFuPSI1Ij48Y2VudGVyPktow7RuZyBjw7MgZOG7ryBsaeG7h3Ugc+G6r2MgdGh14buRYyB0aGFuZzwvY2VudGVyPjwvdGQ+JzsNCiAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTsNCiAgICAgIGlmKHN1bW1hcnlEaXYpIHN1bW1hcnlEaXYuc3R5bGUuZGlzcGxheT0nbm9uZSc7DQogICAgICByZXR1cm47DQogICAgfQ0KDQogICAgLyogxJBhIHPhu5EgdMOtbmggdHLDqm4gVE/DgE4gQuG7mCBk4buvIGxp4buHdSAoxJHDum5nIHnDqnUgY+G6p3U6IG7hur91IHRyb25nIG5nw6B5IGPDsyBuZ8aw4budaSBraMOhYyDEkWEgc+G7kSkuICovDQogICAgY29uc3QgbWFqb3JpdHkgPSBjb21wdXRlTWFqb3JpdHlCeURhdGUoaGVyYnMpOw0KDQogICAgY29uc3Qgb3V0bGllcnNJblZpZXcgPSBbXTsNCiAgICBmaWx0ZXJlZC5mb3JFYWNoKHA9PnsNCiAgICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsNCiAgICAgIHRyLmNsYXNzTmFtZSA9ICdoZXJiLXJvdyc7DQogICAgICBjb25zdCBtID0gbWFqb3JpdHlbcC5kYXRlXTsNCiAgICAgIGNvbnN0IGhhc01ham9yaXR5ID0gbSAmJiBtLnRvcE5vcm0gJiYgbS50b3BDb3VudCA+IG0uc2Vjb25kQ291bnQ7DQogICAgICBpZihoYXNNYWpvcml0eSAmJiBwLm9wTm9ybSAhPT0gbS50b3BOb3JtKXsNCiAgICAgICAgdHIuY2xhc3NMaXN0LmFkZCgnaGVyYi1vdXRsaWVyJyk7DQogICAgICAgIG91dGxpZXJzSW5WaWV3LnB1c2gocCk7DQogICAgICB9DQogICAgICB0ci5pbm5lckhUTUwgPSBgDQogICAgICAgIDx0ZD4ke3AucGF0aWVudE5hbWV9PC90ZD4NCiAgICAgICAgPHRkPiR7cC5wcm9jZWR1cmV9PC90ZD4NCiAgICAgICAgPHRkPiR7cC5kYXRlfTwvdGQ+DQogICAgICAgIDx0ZD4ke3AuZGlzcGxheVN0YXJ0fSAmcmFycjsgJHtwLmRpc3BsYXlFbmR9PC90ZD4NCiAgICAgICAgPHRkPiR7cC5vcENsZWFufTwvdGQ+DQogICAgICBgOw0KICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQodHIpOw0KICAgIH0pOw0KDQogICAgLyogQ+G6rXAgbmjhuq10IHTDs20gdOG6r3QgKyBjbGljayBt4bufIHBvcHVwICovDQogICAgaWYoc3VtbWFyeURpdil7DQogICAgICBpZihvdXRsaWVyc0luVmlldy5sZW5ndGgpew0KICAgICAgICBzdW1tYXJ5RGl2LnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsNCiAgICAgICAgc3VtbWFyeURpdi5pbm5lckhUTUwgPQ0KICAgICAgICAgIGA8YSBocmVmPSIjIiBpZD0iaGVyYk91dGxpZXJDb3VudExpbmsiPkPDsyAke291dGxpZXJzSW5WaWV3Lmxlbmd0aH0gY2EgY8OzIHbhuqVuIMSR4buBIHRyb25nIGRhbmggc8OhY2ggbsOgeS48L2E+YDsNCiAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiT3V0bGllckNvdW50TGluaycpOw0KICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpew0KICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgLy8gcG9wdWxhdGUgbW9kYWwNCiAgICAgICAgICBpZihtb2RhbEJvZHkpew0KICAgICAgICAgICAgbW9kYWxCb2R5LmlubmVySFRNTCA9ICcnOw0KICAgICAgICAgICAgb3V0bGllcnNJblZpZXcuZm9yRWFjaChwPT57DQogICAgICAgICAgICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsNCiAgICAgICAgICAgICAgdHIuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgIDx0ZD4ke3AucGF0aWVudE5hbWV9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+JHtwLnByb2NlZHVyZX08L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4ke3AuZGF0ZX08L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4ke3AuZGlzcGxheVN0YXJ0fSAmcmFycjsgJHtwLmRpc3BsYXlFbmR9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+JHtwLm9wQ2xlYW59PC90ZD4NCiAgICAgICAgICAgICAgYDsNCiAgICAgICAgICAgICAgbW9kYWxCb2R5LmFwcGVuZENoaWxkKHRyKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihtb2RhbEluZm8pew0KICAgICAgICAgICAgLy8gTuG6v3UgxJFhbmcgbOG7jWMgdGhlbyBuZ8OgeSBj4bulIHRo4buDIC0+IGdoaSBjaMO6OyBu4bq/dSBhbGwgLT4gZ2hpICJuaGnhu4F1IG5nw6B5Ig0KICAgICAgICAgICAgY29uc3Qgbm90ZURhdGUgPSAoc2VsZWN0ZWREYXRlPT09J2FsbCcpID8gJ25oaeG7gXUgbmfDoHknIDogc2VsZWN0ZWREYXRlOw0KICAgICAgICAgICAgbW9kYWxJbmZvLnRleHRDb250ZW50ID0gYFThu5VuZyAke291dGxpZXJzSW5WaWV3Lmxlbmd0aH0gY2Ega2jDoWMgxJFhIHPhu5EgKCR7bm90ZURhdGV9KS5gOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihtb2RhbCkgbW9kYWwuc3R5bGUuZGlzcGxheT0nYmxvY2snOw0KICAgICAgICB9LCB7b25jZTp0cnVlfSk7IC8vIG3hu5dpIHJlbmRlciBn4bqvbiBt4bubaQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgc3VtbWFyeURpdi5zdHlsZS5kaXNwbGF5PSdub25lJzsNCiAgICAgICAgc3VtbWFyeURpdi5pbm5lckhUTUw9Jyc7DQogICAgICB9DQogICAgfQ0KICB9Ow0KDQogIC8qIEF1dG8tcnVuIG7hur91IGLhuqNuZyDEkWFuZyBt4bufICovDQogIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKT0+ew0KICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJQcm9jZWR1cmVUYWJsZScpOw0KICAgIGlmKHRhYmxlICYmIHRhYmxlLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJyl7DQogICAgICB3aW5kb3cucmVuZGVySGVyYkxpc3QoKTsNCiAgICB9DQogIH0pOw0KfSkoKTsNCg0KDQoNCjwvc2NyaXB0Pg0KPHNjcmlwdD4NCiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGZ1bmN0aW9uICgpIHsNCiAgICBjb25zdCBmaWxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZUlucHV0Jyk7DQogICAgY29uc3QgYW5hbHl6ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbmFseXplQnRuJyk7DQogICAgaWYgKGZpbGVJbnB1dCAmJiBhbmFseXplQnRuKSB7DQogICAgICBmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKCkgew0KICAgICAgICBhbmFseXplQnRuLmNsaWNrKCk7DQogICAgICB9KTsNCiAgICB9DQogIH0pOw0KPC9zY3JpcHQ+DQoNCg0KPCEtLSBUSEVNRSBQSUNLRVIgU0NSSVBUIC0tPg0KPHNjcmlwdD4NCihmdW5jdGlvbigpew0KICBjb25zdCBUSEVNRV9LRVkgPSAndWlBY2NlbnRUaGVtZSc7DQogIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5Ow0KICBjb25zdCBwaWNrZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhlbWVQaWNrZXInKTsNCiAgaWYoIXBpY2tlcikgcmV0dXJuOw0KICBmdW5jdGlvbiBhcHBseVRoZW1lKHQpew0KICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgndGhlbWUtZGVmYXVsdCcsJ3RoZW1lLW9yYW5nZScsJ3RoZW1lLXJlZCcsJ3RoZW1lLWdyZWVuJyk7DQogICAgaWYodCAmJiB0ICE9PSAnZGVmYXVsdCcpew0KICAgICAgYm9keS5jbGFzc0xpc3QuYWRkKCd0aGVtZS0nK3QpOw0KICAgIH0gZWxzZSB7DQogICAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ3RoZW1lLWRlZmF1bHQnKTsgLy8gZXhwbGljaXQgxJHhu4MgYWN0aXZlIHJpbmcNCiAgICB9DQogICAgcGlja2VyLnF1ZXJ5U2VsZWN0b3JBbGwoJy50aGVtZS1zd2F0Y2gnKS5mb3JFYWNoKGJ0bj0+ew0KICAgICAgYnRuLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScsIGJ0bi5kYXRhc2V0LnRoZW1lPT09dCB8fCAodD09PScnICYmIGJ0bi5kYXRhc2V0LnRoZW1lPT09J2RlZmF1bHQnKSk7DQogICAgfSk7DQogICAgdHJ5eyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShUSEVNRV9LRVksdHx8J2RlZmF1bHQnKTsgfWNhdGNoKGUpe30NCiAgfQ0KICBjb25zdCBzYXZlZCA9IChmdW5jdGlvbigpe3RyeXtyZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVEhFTUVfS0VZKSB8fCAnZGVmYXVsdCc7fWNhdGNoKGUpe3JldHVybiAnZGVmYXVsdCc7fX0pKCk7DQogIGFwcGx5VGhlbWUoc2F2ZWQpOw0KICBwaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGU9PnsNCiAgICBjb25zdCBidG4gPSBlLnRhcmdldC5jbG9zZXN0KCcudGhlbWUtc3dhdGNoJyk7DQogICAgaWYoIWJ0bikgcmV0dXJuOw0KICAgIGFwcGx5VGhlbWUoYnRuLmRhdGFzZXQudGhlbWUpOw0KICB9KTsNCn0pKCk7DQo8L3NjcmlwdD4NCg0KPHNjcmlwdD4NCmZ1bmN0aW9uIHVwZGF0ZUhlcmJCdXR0b25XaXRoT3V0bGllckNvdW50KCkgew0KICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYlRvZ2dsZUJ0bicpOw0KICBpZiAoIWJ0biB8fCAhd2luZG93LmFsbEhlcmJQcm9jZWR1cmVzKSByZXR1cm47DQoNCiAgY29uc3QgaGVyYnMgPSB3aW5kb3cuYWxsSGVyYlByb2NlZHVyZXM7DQogIGNvbnN0IGNvdW50cyA9IHt9Ow0KDQogIGhlcmJzLmZvckVhY2goaCA9PiB7DQogICAgY29uc3QgZGF0ZSA9IGguZGF0ZTsNCiAgICBjb25zdCBrZXkgPSBkYXRlOw0KICAgIGlmICghY291bnRzW2tleV0pIGNvdW50c1trZXldID0ge307DQogICAgY29uc3QgbmFtZSA9IChoLm9wZXJhdG9yIHx8ICdLaMO0bmcgY8OzJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7DQogICAgY291bnRzW2tleV1bbmFtZV0gPSAoY291bnRzW2tleV1bbmFtZV0gfHwgMCkgKyAxOw0KICB9KTsNCg0KICBsZXQgb3V0bGllckNvdW50ID0gMDsNCg0KICBPYmplY3Qua2V5cyhjb3VudHMpLmZvckVhY2goZGF0ZSA9PiB7DQogICAgY29uc3Qgb3BzID0gY291bnRzW2RhdGVdOw0KICAgIGNvbnN0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyhvcHMpLnNvcnQoKGEsIGIpID0+IGJbMV0gLSBhWzFdKTsNCiAgICBjb25zdCB0b3AgPSBlbnRyaWVzWzBdOw0KICAgIGlmICghdG9wKSByZXR1cm47DQoNCiAgICBjb25zdCB0b3BOYW1lID0gdG9wWzBdOw0KICAgIGNvbnN0IHRvcENvdW50ID0gdG9wWzFdOw0KDQogICAgZm9yIChjb25zdCBbbmFtZSwgY291bnRdIG9mIGVudHJpZXMpIHsNCiAgICAgIGlmIChuYW1lICE9PSB0b3BOYW1lICYmIGNvdW50ID4gMCkgew0KICAgICAgICBvdXRsaWVyQ291bnQgKz0gY291bnQ7DQogICAgICB9DQogICAgfQ0KICB9KTsNCg0KYnRuLmlubmVySFRNTCA9IGBT4bqvYyB0aHXhu5FjIHRoYW5nIDxpIGNsYXNzPSJmYS1zb2xpZCBmYS10cmlhbmdsZS1leGNsYW1hdGlvbiIgc3R5bGU9ImNvbG9yOnllbGxvdyI+PC9pPiA8c3BhbiBzdHlsZT0iY29sb3I6eWVsbG93OyBmb250LXdlaWdodDpib2xkIj4oJHtvdXRsaWVyQ291bnR9KTwvc3Bhbj5gOw0KDQoNCn0NCjwvc2NyaXB0Pg0KDQo8L2JvZHk+DQoNCjwvaHRtbD4=";
  const binary = atob(base64);
  const bytes = new Uint8Array([...binary].map(c => c.charCodeAt(0)));
  const decoded = new TextDecoder("utf-8").decode(bytes);
  document.write(decoded);
</script>


</body>
</html>
