<!-- 

///////////////////////////////////////////////
/////Code được viết bởi Chauhuynh0104/////////
////http://fb.com/chauhuynh0104//////////////
/////////////079.567.9350///////////////////
///Vui lòng tôn trọng bản quyền tác giả////
/////////Không xoá dòng này //////////////
/////////////////////////////////////////

!-->
<!DOCTYPE html>
<html lang="vi">
<head><meta charset="UTF-8"><title>Thủ Thuật</title></head>
<body>
<script>
  const base64 = "PCEtLSANCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vLy9Db2RlIMSRxrDhu6NjIHZp4bq/dCBi4bufaSBDaGF1aHV5bmgwMTA0Ly8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vL2h0dHA6Ly9mYi5jb20vY2hhdWh1eW5oMDEwNC8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzA3OS41NjcuOTM1MC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQovLy8vLy8vLy8vLy9WdWkgbMOybmcgdMO0biB0cuG7jW5nIGLhuqNuIHF1eeG7gW4gdMOhYyBnaeG6oy8vLy8vLy8vLy8vDQovLy8vLy8vLy8vLy8vLy8vLy9LaMO0bmcgeG/DoSBkw7JuZyBuw6B5IC8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KIS0tPg0KPCFET0NUWVBFIGh0bWw+DQoNCjxodG1sIGxhbmc9InZpIj4NCjxoZWFkPg0KPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1JbnRlcjp3Z2h0QDQwMDs2MDA7NzAwJmFtcDtkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCIvPg0KPGxpbmsgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZm9udC1hd2Vzb21lLzYuNC4wL2Nzcy9hbGwubWluLmNzcyIgcmVsPSJzdHlsZXNoZWV0Ii8+DQo8c2NyaXB0IHNyYz0iaHR0cHM6Ly91bnBrZy5jb20vZHJvcGJveC9kaXN0L0Ryb3Bib3gtc2RrLm1pbi5qcyI+PC9zY3JpcHQ+DQo8bWV0YSBjaGFyc2V0PSJ1dGYtOCIvPg0KPG1ldGEgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCIgbmFtZT0idmlld3BvcnQiLz4NCjx0aXRsZT5LaeG7g20gVHJhIFRo4bunIFRodeG6rXQgWSBU4bq/PC90aXRsZT4NCjxzdHlsZT4NCiAgICAgICAgKiB7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBwYWRkaW5nOiAwOw0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KICAgICAgICBib2R5IHsNCiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgcGFkZGluZzogMmNtOw0KICAgICAgICAgICAgbWluLWhlaWdodDogMTAwdmg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICB9DQogICAgICAgIGgxLCBoMiB7DQogICAgICAgICAgICBjb2xvcjogIzJjM2U1MDsNCiAgICAgICAgfQ0KICAgICAgICAuY29udGFpbmVyIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgZ2FwOiAyMHB4Ow0KICAgICAgICB9DQogICAgICAgIC50YWJsZS1jb250YWluZXIgew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIG92ZXJmbG93OiBhdXRvOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOw0KICAgICAgICB9DQogICAgICAgIC51cGxvYWQtc2VjdGlvbiB7DQogICAgICAgICAgICBib3JkZXI6IDJweCBkYXNoZWQgIzM0OThkYjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgICAgICB9DQogICAgICAgIHRhYmxlIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICAgICAgfQ0KICAgICAgICB0aCwgdGQgew0KICAgICAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDsNCiAgICAgICAgICAgIG1heC13aWR0aDogMjAwcHg7DQogICAgICAgIH0NCiAgICAgICAgdGggew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2YyZjJmMjsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBzdGlja3k7DQogICAgICAgICAgICB0b3A6IDA7DQogICAgICAgIH0NCiAgICAgICAgLmNvbmZsaWN0IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmRkZGQ7DQogICAgICAgIH0NCg0KICAgICAgICAud2FybmluZyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmM2NkOw0KICAgICAgICB9DQogICAgICAgIC5lcnJvciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhkN2RhOw0KICAgICAgICAgICAgY29sb3I6ICM3MjFjMjQ7DQogICAgICAgIH0NCiAgICAgICAgLmJ0biB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzQ5OGRiOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweCAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4Ow0KICAgICAgICB9DQogICAgICAgIC5idG46aG92ZXIgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI5ODBiOTsNCiAgICAgICAgfQ0KICAgICAgICAuYnRuOmRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNjY2NjY2M7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkOw0KICAgICAgICB9DQogICAgICAgIC5sb2dpbi1wYWdlIC5wcm9jZWR1cmUtaW5mbyB7DQogICAgICAgIA0KICAgICAgICAgICAgcGFkZGluZzogNDVweDsNCiAgICAgICAgICAgIG1hcmdpbjogMHB4IGF1dG87DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjOTk5OTk5Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDMwcHggcmdiYSgwLCAwLCAwLCAwLjIpOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7DQogICAgICAgIH0NCiAgICAgICAgLnByb2NlZHVyZS1pbmZvIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY5ZmE7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNjY2M7DQogICAgICAgICAgICB3aWR0aDogYXV0bzsNCiAgICAgICAgICAgIG1heC13aWR0aDogbm9uZTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7DQogICAgICAgIH0NCiAgICAgICAgI2Vycm9yTG9nIHsNCiAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87DQogICAgICAgIH0NCiAgICAgICAgLmVycm9yLWl0ZW0gew0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7DQogICAgICAgIH0NCiAgICAgICAgLmVycm9yLWl0ZW06bGFzdC1jaGlsZCB7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiBub25lOw0KICAgICAgICB9DQogICAgICAgIC5maWxlLXJlcXVpcmVtZW50cyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTdmNGZmOw0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOw0KICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5maWxlLXJlcXVpcmVtZW50cy5oaWRkZW4gew0KICAgICAgICAgICAgb3BhY2l0eTogMDsNCiAgICAgICAgICAgIGhlaWdodDogMDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDA7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgIH0NCiAgICAgICAgLmNvbmZsaWN0LXJvdyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBmN2ZhOw0KICAgICAgICB9DQogICAgICAgIC5jb25mbGljdC1kZXRhaWwgew0KICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vcm1hbCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDhweDsNCiAgICAgICAgfQ0KICAgICAgICAuY29uZmxpY3QtZGV0YWlsIGJyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2dpbi1zZWN0aW9uIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7DQogICAgICAgICAgICBwYWRkaW5nOiAzMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAyMHB4IGF1dG87DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDQyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzk5OTk5OTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMTBweCAzMHB4IHJnYmEoMCwgMCwgMCwgMC4yKTsNCiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgICAgICAgIHotaW5kZXg6IDEwOw0KICAgICAgICB9DQogICAgICAgIC5sb2dpbi1pbnB1dCB7DQogICAgICAgICAgICBwYWRkaW5nOiAxMHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDIwMHB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2dpbi1lcnJvciB7DQogICAgICAgICAgICBjb2xvcjogI2Q5NTM0ZjsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgICAgICB9DQogICAgICAgIC5tYWluLWNvbnRlbnQgew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgfQ0KICAgICAgICAubG9naW4tdGl0bGUgew0KICAgICAgICAgICAgY29sb3I6ICMyYzNlNTA7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2dvdXQtYnRuIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRvcDogMjBweDsNCiAgICAgICAgICAgIHJpZ2h0OiAyMHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U3NGMzYzsNCiAgICAgICAgfQ0KICAgICAgICAubG9nb3V0LWJ0bjpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzAzOTJiOw0KICAgICAgICB9DQogICAgICAgIC5vcHRpb24tc2VjdGlvbiB7DQogICAgICAgICAgICBtYXJnaW46IDE1cHggMDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgICAgICB9DQogICAgICAgICNvcGVyYXRvckZpbHRlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgIH0NCiAgICAgICAgI29wZXJhdG9yRmlsdGVyIGxhYmVsIHsNCiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMTBweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQogICAgICAgICNvcGVyYXRvclNlbGVjdCB7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDI1MHB4Ow0KICAgICAgICB9DQogICAgICAgIC50aW1lLXN1Z2dlc3Rpb24gew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U4ZjVlOTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDVweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDVweDsNCiAgICAgICAgfQ0KICAgICAgICAubm8tc3VnZ2VzdGlvbiB7DQogICAgICAgICAgICBjb2xvcjogI2QzMmYyZjsNCiAgICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsNCiAgICAgICAgfQ0KICAgICAgICAudGltZS1vcHRpb25zIHsNCiAgICAgICAgICAgIG1hcmdpbjogMTBweCAwOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7DQogICAgICAgIH0NCiAgICAgICAgLnRpbWUtb3B0aW9ucyBsYWJlbCB7DQogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgIH0NCiAgICAgICAgLmdyb3VwLXNlcGFyYXRvciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRkZGOw0KICAgICAgICAgICAgaGVpZ2h0OiA1cHg7DQogICAgICAgIH0NCgkJLyogUGjhuqduIGNo4buvIGPDsyBjaMO6IHRow61jaCAqLw0KICAgICAgICAuY2h1LXRoaWNoIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAwMDAwOw0KICAgIA0KICAgICAgICB9IA0KICAgICAgICAvKiBLaHVuZyBjaMO6IHRow61jaCDhuqluICovDQogICAgICAgIC5jaHUtdGhpY2ggLm5vaS1kdW5nIHsNCiAgICAgICAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjsNCiAgICAgICAgICAgIHdpZHRoOiAyMDBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmY2M7DQogICAgICAgICAgICBjb2xvcjogIzMzMzsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICB6LWluZGV4OiAxOw0KICAgICAgICAgICAgYm90dG9tOiAxMjUlOw0KICAgICAgICAgICAgbGVmdDogNTAlOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOw0KICAgICAgICAgICAgb3BhY2l0eTogMDsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zczsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNmZmNjMDA7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjIpOw0KICAgICAgICB9DQogICAgICAgIC8qIEhp4buDbiB0aOG7iyBjaMO6IHRow61jaCBraGkgZGkgY2h14buZdCB2w6BvICovDQogICAgICAgIC5jaHUtdGhpY2g6aG92ZXIgLm5vaS1kdW5nIHsNCiAgICAgICAgICAgIHZpc2liaWxpdHk6IHZpc2libGU7DQogICAgICAgICAgICBvcGFjaXR5OiAxOw0KICAgICAgICB9DQogICAgICAgIC8qIE3FqWkgdMOqbiBuaOG7jyBwaMOtYSBkxrDhu5tpIGNow7ogdGjDrWNoICovDQogICAgICAgIC5jaHUtdGhpY2ggLm5vaS1kdW5nOjphZnRlciB7DQogICAgICAgICAgICBjb250ZW50OiAiIjsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRvcDogMTAwJTsNCiAgICAgICAgICAgIGxlZnQ6IDUwJTsNCiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAtNXB4Ow0KICAgICAgICAgICAgYm9yZGVyLXdpZHRoOiA1cHg7DQogICAgICAgICAgICBib3JkZXItc3R5bGU6IHNvbGlkOw0KICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjZmZmZmNjIHRyYW5zcGFyZW50IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50Ow0KICAgICAgICB9DQoJCSAgICAvKiBUaMOqbSBDU1MgbeG7m2kgY2hvIGLhuqNuZyBs4buXaSAyIGPhu5l0ICovDQogIC5lcnJvci10YWJsZSB7DQogICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgIG1hcmdpbi10b3A6IDIwcHg7DQogICAgfQ0KICAgIC5lcnJvci10YWJsZSB0aCwgLmVycm9yLXRhYmxlIHRkIHsNCiAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDsNCiAgICB9DQogICAgLmVycm9yLXRhYmxlIHRoIHsNCiAgICAgICAgYmFja2dyb3VuZDogI2YyZjJmMjsNCiAgICAgICAgcG9zaXRpb246IHN0aWNreTsNCiAgICAgICAgdG9wOiAwOw0KICAgIH0NCiAgICAuZXJyb3ItdGFibGUgLmVycm9yLXJvdyB7DQogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGY3ZmE7DQogICAgfQ0KICAgIC5lcnJvci10YWJsZSAuZXJyb3ItZGV0YWlsIHsNCiAgICAgICAgd2hpdGUtc3BhY2U6IG5vcm1hbCAhaW1wb3J0YW50Ow0KICAgICAgICBsaW5lLWhlaWdodDogMS41Ow0KICAgICAgICBwYWRkaW5nOiA4cHg7DQogICAgfQ0KICAgICNvcGVyYXRvckZpbHRlckVycm9yIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOw0KICAgIHBhZGRpbmc6IDEwcHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIG1hcmdpbi10b3A6IDEwcHg7DQp9DQojb3BlcmF0b3JGaWx0ZXJFcnJvciBsYWJlbCB7DQogICAgbWFyZ2luLXJpZ2h0OiAxMHB4Ow0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KDQojb3BlcmF0b3JGaWx0ZXJFcnJvciBzZWxlY3Qgew0KICAgIHBhZGRpbmc6IDhweDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICB3aWR0aDogMjUwcHg7DQp9DQovKiA9PT09PT09PT09PT09PT09PT09IFRSQU5HIFRSw40gTsOCTkcgQ+G6pFAgPT09PT09PT09PT09PT09PT09PSAqLw0KDQovKiBOw7p0IGLhuqVtIGNodW5nICovDQouYnRuIHsNCiAgYm9yZGVyLXJhZGl1czogNnB4ICFpbXBvcnRhbnQ7DQogIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2UtaW4tb3V0ICFpbXBvcnRhbnQ7DQp9DQouYnRuOmhvdmVyIHsNCiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpOw0KICBib3gtc2hhZG93OiAwIDRweCAxMHB4IHJnYmEoMCwwLDAsMC4yKTsNCn0NCi8qIELhuqNuZyBk4buvIGxp4buHdSAqLw0KdGFibGUsIC5lcnJvci10YWJsZSB7DQogIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwwLDAsMC4xKTsNCn0NCnRoIHsNCiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMzQ5OGRiLCAjMjk4MGI5KSAhaW1wb3J0YW50Ow0KICBjb2xvcjogI2ZmZiAhaW1wb3J0YW50Ow0KICBmb250LXdlaWdodDogYm9sZDsNCn0NCnRkIHsNCiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzIGVhc2UtaW4tb3V0Ow0KfQ0KdHI6aG92ZXIgdGQgew0KICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuMDMpOw0KfQ0KDQovKiBMaWdodCBNb2RlOiBM4buNYyBuZ8aw4budaSB0aOG7sWMgaGnhu4duICovDQojb3BlcmF0b3JGaWx0ZXIsICNvcGVyYXRvckZpbHRlckVycm9yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsNCiAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICBwYWRkaW5nOiAxMHB4Ow0KICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOw0KICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjEpOw0KICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLWluLW91dDsNCn0NCiNvcGVyYXRvckZpbHRlcjpob3ZlciwgI29wZXJhdG9yRmlsdGVyRXJyb3I6aG92ZXIgew0KICBib3JkZXItY29sb3I6ICMzNDk4ZGI7DQogIGJveC1zaGFkb3c6IDAgMCA4cHggcmdiYSg1MiwxNTIsMjE5LDAuNSk7DQp9DQojb3BlcmF0b3JTZWxlY3QsICNvcGVyYXRvclNlbGVjdEVycm9yIHsNCiAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOw0KICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLWluLW91dDsNCn0NCiNvcGVyYXRvclNlbGVjdDpob3ZlciwgI29wZXJhdG9yU2VsZWN0RXJyb3I6aG92ZXIgew0KICBib3JkZXItY29sb3I6ICMzNDk4ZGI7DQogIGJveC1zaGFkb3c6IDAgMCA2cHggcmdiYSg1MiwxNTIsMjE5LDAuNCk7DQp9DQovKiBEYXJrIE1vZGUgbsOibmcgY+G6pXAgKi8NCmJvZHkuZGFyay1tb2RlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzEyMTIxMiAhaW1wb3J0YW50Ow0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ow0KfQ0KYm9keS5kYXJrLW1vZGUgI29wZXJhdG9yRmlsdGVyLA0KYm9keS5kYXJrLW1vZGUgI29wZXJhdG9yRmlsdGVyRXJyb3Igew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmMyYzJjICFpbXBvcnRhbnQ7DQogIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7DQogIGJvcmRlcjogMXB4IHNvbGlkICM1NTUgIWltcG9ydGFudDsNCiAgYm9yZGVyLXJhZGl1czogOHB4ICFpbXBvcnRhbnQ7DQogIHBhZGRpbmc6IDEycHggIWltcG9ydGFudDsNCiAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuNCkgIWltcG9ydGFudDsNCiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZS1pbi1vdXQgIWltcG9ydGFudDsNCn0NCmJvZHkuZGFyay1tb2RlICNvcGVyYXRvckZpbHRlcjpob3ZlciwNCmJvZHkuZGFyay1tb2RlICNvcGVyYXRvckZpbHRlckVycm9yOmhvdmVyIHsNCiAgYm9yZGVyLWNvbG9yOiAjMDBiY2Q0ICFpbXBvcnRhbnQ7DQogIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwgMTg4LCAyMTIsIDAuNikgIWltcG9ydGFudDsNCn0NCmJvZHkuZGFyay1tb2RlICNvcGVyYXRvclNlbGVjdCwNCmJvZHkuZGFyay1tb2RlICNvcGVyYXRvclNlbGVjdEVycm9yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUxZSAhaW1wb3J0YW50Ow0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ow0KICBib3JkZXI6IDFweCBzb2xpZCAjNTU1ICFpbXBvcnRhbnQ7DQogIGJvcmRlci1yYWRpdXM6IDVweCAhaW1wb3J0YW50Ow0KICBwYWRkaW5nOiA4cHggMTBweCAhaW1wb3J0YW50Ow0KICBmb250LXdlaWdodDogYm9sZCAhaW1wb3J0YW50Ow0KICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLWluLW91dCAhaW1wb3J0YW50Ow0KfQ0KYm9keS5kYXJrLW1vZGUgI29wZXJhdG9yU2VsZWN0OmhvdmVyLA0KYm9keS5kYXJrLW1vZGUgI29wZXJhdG9yU2VsZWN0RXJyb3I6aG92ZXIgew0KICBib3JkZXItY29sb3I6ICMwMGJjZDQgIWltcG9ydGFudDsNCiAgYm94LXNoYWRvdzogMCAwIDhweCByZ2JhKDAsIDE4OCwgMjEyLCAwLjUpICFpbXBvcnRhbnQ7DQp9DQpib2R5LmRhcmstbW9kZSAubGlzdDEgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICMyYzNlNTA7DQogICAgYm9yZGVyLWNvbG9yOiAjMzQ0OTVlOw0KICAgIGNvbG9yOiAjZWNmMGYxOw0KfQ0KLmRvY3Rvci1jb2x1bW4gew0KICAgIGRpc3BsYXk6IG5vbmU7IC8qIE3hurdjIMSR4buLbmgg4bqpbiAqLw0KfQ0KDQouc2hvdy1kb2N0b3IgLmRvY3Rvci1jb2x1bW4gew0KICAgIGRpc3BsYXk6IHRhYmxlLWNlbGw7IC8qIEhp4buDbiB0aOG7iyBraGkgY8OzIGNsYXNzIHNob3ctZG9jdG9yICovDQp9DQogICAgaHRtbCB7DQogICAgICAgIHNjcm9sbC1iZWhhdmlvcjogc21vb3RoOw0KICAgIH0NCiAgICAvKiBIaeG7h3Ug4bupbmcgaGlnaGxpZ2h0IGtoaSBjdeG7mW4gdOG7m2kgKi8NCiAgICAuaGlnaGxpZ2h0LWVycm9yLXNlY3Rpb24gew0KICAgICAgICBhbmltYXRpb246IGhpZ2hsaWdodC1mYWRlIDJzIGVhc2Utb3V0Ow0KICAgIH0NCiAgICBAa2V5ZnJhbWVzIGhpZ2hsaWdodC1mYWRlIHsNCiAgICAgICAgMCUgew0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgNHB4IHJnYmEoNTIsIDE1MiwgMjE5LCAwLjcpOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg1MiwgMTUyLCAyMTksIDAuMSk7DQogICAgICAgIH0NCiAgICAgICAgMTAwJSB7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMCA0cHggcmdiYSg1MiwgMTUyLCAyMTksIDApOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg1MiwgMTUyLCAyMTksIDApOw0KICAgICAgICB9DQogICAgfQ0KCS8qIEPEg24gY2jhu4luaCBpY29uIHbDoCB0ZXh0IHRyb25nIHRpw6p1IMSR4buBICovDQp0aCBpIHsNCiAgICBtYXJnaW4tcmlnaHQ6IDhweDsNCiAgICBjb2xvcjogd2hpdGU7IC8qIE3DoHUgaWNvbiAqLw0KICAgIHdpZHRoOiAxNnB4Ow0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi8qIERhcmsgbW9kZSAqLw0KYm9keS5kYXJrLW1vZGUgdGggaSB7DQogICAgY29sb3I6ICMwMGJjZDQ7DQp9DQovKiBIaeG7h3Ug4bupbmcga2hpIGhvdmVyICovDQp0aDpob3ZlciBpIHsNCiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7DQogICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnMgZWFzZTsNCn0NCiAgLyogVGjDqm0gdsOgbyBwaOG6p24gc3R5bGUgKi8NCiAgICAuZmEtc3Bpbi1jb250aW51b3VzIHsNCiAgICAgICAgYW5pbWF0aW9uOiBmYS1zcGluIDJzIGluZmluaXRlIGxpbmVhcjsNCiAgICB9DQogICAgQGtleWZyYW1lcyBmYS1zcGluIHsNCiAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfQ0KICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfQ0KICAgIH0NCgkudGltZS1zdWdnZXN0aW9uIHN0cm9uZyB7DQogICAgY29sb3I6ICMyYzNlNTA7DQogICAgZm9udC13ZWlnaHQ6IDYwMDsNCn0NCg0KLmRhcmstbW9kZSAudGltZS1zdWdnZXN0aW9uIHN0cm9uZyB7DQogICAgY29sb3I6ICMwMGJjZDQ7DQp9DQoudGltZS1zdWdnZXN0aW9uIHsNCiAgICBsaW5lLWhlaWdodDogMS42Ow0KfQ0KLyogPT09PT09PSBUT0FTVCAmIERBU0hCT0FSRCA9PT09PT09ICovDQoudG9hc3Qgew0KICB2aXNpYmlsaXR5OiBoaWRkZW47DQogIG1pbi13aWR0aDogMjUwcHg7DQogIG1hcmdpbi1sZWZ0OiAtMTI1cHg7DQogIGJhY2tncm91bmQtY29sb3I6ICMzMzM7DQogIGNvbG9yOiAjZmZmOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgcGFkZGluZzogMTRweDsNCiAgcG9zaXRpb246IGZpeGVkOw0KICB6LWluZGV4OiA5OTk5Ow0KICBsZWZ0OiA1MCU7DQogIGJvdHRvbTogMzBweDsNCiAgZm9udC1zaXplOiAxNnB4Ow0KICBvcGFjaXR5OiAwOw0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNXMsIGJvdHRvbSAwLjVzOw0KfQ0KLnRvYXN0LnNob3cgew0KICB2aXNpYmlsaXR5OiB2aXNpYmxlOw0KICBvcGFjaXR5OiAxOw0KICBib3R0b206IDUwcHg7DQp9DQouZGFzaGJvYXJkIHsNCiAgZGlzcGxheTogZmxleDsNCiAgZ2FwOiAxMHB4Ow0KICBtYXJnaW46IDEwcHggMDsNCn0NCi5kYXNoYm9hcmQgLmNhcmQgew0KICBmbGV4OiAxOw0KICBiYWNrZ3JvdW5kOiAjZjhmOWZhOw0KICBib3JkZXItcmFkaXVzOiA2cHg7DQogIHBhZGRpbmc6IDEwcHg7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgZm9udC13ZWlnaHQ6IGJvbGQ7DQp9DQoNCiAgYm9keS5kYXJrLW1vZGUgI3BhdGllbnRDb3VudGVyIHsNCiAgICBjb2xvcjogIzAwYmNkNDsNCiAgfQ0KI2hlcmJPdXRsaWVyTW9kYWxbc3R5bGUqPSJkaXNwbGF5Il0gKyBiciwNCiNoZXJiT3V0bGllck1vZGFsW3N0eWxlKj0iZGlzcGxheSJdICsgYnIgKyBiciB7DQogIGRpc3BsYXk6IG5vbmU7DQp9DQoNCi5oZXJiLW91dGxpZXIgdGQgew0KICAgIGJhY2tncm91bmQtY29sb3I6I2ZmZGRkZCAhaW1wb3J0YW50Ow0KICAgIGNvbG9yOiNiNzFjMWMgIWltcG9ydGFudDsNCiAgICBmb250LXdlaWdodDo2MDA7DQogIH0NCiAgDQogDQovKiBEYXJrIG1vZGUgY2hvIGtodSB24buxYyBtYWluYmxvayAodXBsb2FkICsgdMO5eSBjaOG7jW4pICovDQpib2R5LmRhcmstbW9kZSAubWFpbmJsb2sgew0KICBiYWNrZ3JvdW5kOiAjMWUxZTFlICFpbXBvcnRhbnQ7DQogIGJvcmRlcjogMnB4IHNvbGlkICM1NTUgIWltcG9ydGFudDsNCiAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDsNCiAgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLDE4OCwyMTIsMC4yNSk7IC8qIG5o4bq5LCDEkeG7k25nIGLhu5kgdGhlbWUgKi8NCiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzIGVhc2UsIGJvcmRlci1jb2xvciAwLjJzIGVhc2U7DQp9DQoNCi8qIEPDoWMgY29udHJvbCBiw6puIHRyb25nIG1haW5ibG9rICovDQpib2R5LmRhcmstbW9kZSAubWFpbmJsb2sgaW5wdXQsDQpib2R5LmRhcmstbW9kZSAubWFpbmJsb2sgc2VsZWN0LA0KYm9keS5kYXJrLW1vZGUgLm1haW5ibG9rIGJ1dHRvbiB7DQogIGJhY2tncm91bmQ6ICMyYzJjMmMgIWltcG9ydGFudDsNCiAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDsNCiAgYm9yZGVyOiAxcHggc29saWQgIzY2NiAhaW1wb3J0YW50Ow0KfQ0KDQovKiBEYXJrIG1vZGU6IHRvb2x0aXAg4bufIG3hu41pIG7GoWkgKHRpw6p1IMSR4buBICYgbuG7mWkgZHVuZykgKi8NCmJvZHkuZGFyay1tb2RlIC5jaHUtdGhpY2ggLm5vaS1kdW5nIHsNCiAgYmFja2dyb3VuZDogIzJjM2U1MCAhaW1wb3J0YW50OyAgLyogxJHhu5VpIHNhbmcgbuG7gW4gdOG7kWkgZOG7hSDEkeG7jWM7IG114buRbiBnaeG7ryBu4buBbiB2w6BuZyB0aMOsIHjDs2EgZMOybmcgbsOgeSAqLw0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50OyAgICAgICAgLyogbuG6v3UgZ2nhu68gbuG7gW4gdsOgbmcsIMSR4buVaSB0aMOgbmggIzAwMCAhaW1wb3J0YW50ICovDQogIGJvcmRlcjogMXB4IHNvbGlkICMwMGJjZDQgIWltcG9ydGFudDsNCn0NCg0KIDwvc3R5bGU+DQo8c2NyaXB0Pg0KICAgIGFzeW5jIGZ1bmN0aW9uIGNoZWNrQWNjZXNzKCkgew0KICAgICAgICBjb25zdCBqc29uVXJsID0gJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9jaGF1aHV5bmgwMTA0L2NoYXVodXluaDAxMDQudHh0L3JlZnMvaGVhZHMvbWFpbi9kcmNoYXUuanNvbic7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChqc29uVXJsICsgJz92PScgKyBEYXRlLm5vdygpKTsNCiAgICAgICAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoJ0tow7RuZyB0aOG7gyB04bqjaSBmaWxlIEpTT04nKTsNCiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IGF3YWl0IHJlcy5qc29uKCk7DQoNCiAgICAgICAgICAgIGlmICghY29uZmlnLkFDQ0VTU19BTExPV0VEKSB7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0icGFkZGluZzo1MHB4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOnJlZDtmb250LXNpemU6MjBweCI+DQogICAgICAgICAgICAgICAgICAgIDxoMj5C4bqiTyBUUsOMIEjhu4YgVEjhu5BORzwvaDI+DQogICAgICAgICAgICAgICAgICAgIDxwPiR7Y29uZmlnLk1FU1NBR0V9PC9wPg0KICAgICAgICAgICAgICAgICAgICAke2NvbmZpZy5SRURJUkVDVF9VUkwgPyBgPHA+U+G6vSBjaHV54buDbiBoxrDhu5tuZyBzYXUgPHNwYW4gaWQ9J2NvdW50ZG93bic+NTwvc3Bhbj4gZ2nDonkuLi48L3A+YCA6ICcnfQ0KICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5SRURJUkVDVF9VUkwpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHNlY29uZHMgPSA1Ow0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHMtLTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb3VudGRvd24nKS5pbm5lclRleHQgPSBzZWNvbmRzOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZHMgPD0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gY29uZmlnLlJFRElSRUNUX1VSTDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gYDxkaXYgc3R5bGU9J3BhZGRpbmc6NTBweDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjpyZWQnPg0KICAgICAgICAgICAgICAgIDxoMj5LSMOUTkcgVOG6okkgxJDGr+G7okMgQ+G6pFUgSMOMTkg8L2gyPjxwPkzhu5dpIHRydXkgY+G6rXAga2hpIGvhur90IG7hu5FpIG3huqFuZy48YnIvPiBWdWkgbMOybmcga2nhu4NtIHRyYSBs4bqhaSDEkcaw4budbmcgdHJ1eeG7gW4gaW50ZXJuZXQuPC9wPg0KICAgICAgICAgICAgPC9kaXY+YDsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRBY2NvdW50c0Zyb21UWFQoKSB7DQogICAgICAgIGNvbnN0IHR4dFVybCA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY2hhdWh1eW5oMDEwNC9jaGF1aHV5bmgwMTA0LnR4dC9yZWZzL2hlYWRzL21haW4vdGtrLnR4dCc7DQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHR4dFVybCArICc/dj0nICsgRGF0ZS5ub3coKSk7DQogICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICBjb25zdCBhY2NvdW50cyA9IHt9Ow0KICAgICAgICB0ZXh0LnNwbGl0KCdcbicpLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICBjb25zdCBbdSwgcF0gPSBsaW5lLnRyaW0oKS5zcGxpdCgnOicpOw0KICAgICAgICAgICAgaWYgKHUgJiYgcCkgYWNjb3VudHNbdV0gPSBwOw0KICAgICAgICB9KTsNCiAgICAgICAgcmV0dXJuIGFjY291bnRzOw0KICAgIH0NCg0KICAgIGFzeW5jIGZ1bmN0aW9uIGVuYWJsZUxvZ2luKGFjY291bnRzKSB7DQogICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbkJ0bicpOw0KICAgICAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcm5hbWVJbnB1dCcpOw0KICAgICAgICBjb25zdCBwYXNzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRJbnB1dCcpOw0KICAgICAgICBjb25zdCBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbkVycm9yJyk7DQoNCiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgdXNlciA9IHVzZXJJbnB1dC52YWx1ZS50cmltKCk7DQogICAgICAgICAgICBjb25zdCBwYXNzID0gcGFzc0lucHV0LnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIGlmIChhY2NvdW50c1t1c2VyXSAmJiBhY2NvdW50c1t1c2VyXSA9PT0gcGFzcykgew0KICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ21lZFVzZXInLCB1c2VyKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2xvZ2luLXBhZ2UnKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5TZWN0aW9uJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkNvbnRlbnQnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkgew0KZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3dNb3JlU3VnZ2VzdGlvbnNDaGVja2JveCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKCkgew0KICAgIGlmIChhbGxQcm9jZWR1cmVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgZ2VuZXJhdGVUaW1lU3VnZ2VzdGlvbnMoYWxsUHJvY2VkdXJlcyk7DQogICAgICAgIGZpbHRlckJ5T3BlcmF0b3IoKTsNCiAgICB9DQp9KTsNCn0pOw0KDQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhc3luYyAoKSA9PiB7DQogICAgICAgIGNvbnN0IGFsbG93ID0gYXdhaXQgY2hlY2tBY2Nlc3MoKTsNCiAgICAgICAgaWYgKCFhbGxvdykgcmV0dXJuOw0KICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGxvYWRBY2NvdW50c0Zyb21UWFQoKTsNCgkJIGF3YWl0IFByb21pc2UuYWxsKFsNCiAgICBsb2FkUHJvY2VkdXJlcygpLA0KICAgIGxvYWRDb25mbGljdFJ1bGVzKCkNCl0pOw0KICAgICAgICBjb25zdCBzYXZlZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ21lZFVzZXInKTsNCiAgICAgICAgaWYgKHNhdmVkICYmIGFjY291bnRzW3NhdmVkXSkgew0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luU2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkNvbnRlbnQnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpblNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgIGVuYWJsZUxvZ2luKGFjY291bnRzKTsNCiAgICAgICAgfQ0KICAgIH0pOw0KPC9zY3JpcHQ+DQo8c3R5bGU+DQogIGJvZHkuZGFyay1tb2RlICNsb2FkaW5nUG9wdXAgew0KICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTsNCiAgfQ0KICBib2R5LmRhcmstbW9kZSAjbG9hZGluZ1BvcHVwIGRpdiB7DQogICAgYmFja2dyb3VuZDogIzFlMWUxZSAhaW1wb3J0YW50Ow0KICAgIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7DQogICAgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLCAxODgsIDIxMiwgMC4zKTsNCiAgfQ0KDQogIGJvZHkuZGFyay1tb2RlICNwYXRpZW50Q291bnRlciB7DQogICAgY29sb3I6ICMwMGJjZDQ7DQogIH0NCjwvc3R5bGU+DQo8c3R5bGU+DQogIC8qIEhp4buHdSDhu6luZyBtxrDhu6N0ICovDQogICNsb2FkaW5nUG9wdXAgew0KICAgIG9wYWNpdHk6IDA7DQogICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjVzIGVhc2U7DQogIH0NCiAgI2xvYWRpbmdQb3B1cC5zaG93IHsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQogIC8qIFByb2dyZXNzIGJhciAqLw0KICAjcHJvZ3Jlc3NCYXJDb250YWluZXIgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGJhY2tncm91bmQ6ICNkZGQ7DQogICAgaGVpZ2h0OiA2cHg7DQogICAgbWFyZ2luLXRvcDogMjBweDsNCiAgICBib3JkZXItcmFkaXVzOiAzcHg7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgfQ0KICAjcHJvZ3Jlc3NCYXIgew0KICAgIHdpZHRoOiAwJTsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgYmFja2dyb3VuZDogIzM0OThkYjsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjVzIGVhc2U7DQogIH0NCiAgYm9keS5kYXJrLW1vZGUgI3Byb2dyZXNzQmFyQ29udGFpbmVyIHsNCiAgICBiYWNrZ3JvdW5kOiAjNTU1Ow0KICB9DQogIGJvZHkuZGFyay1tb2RlICNwcm9ncmVzc0JhciB7DQogICAgYmFja2dyb3VuZDogIzAwYmNkNDsNCiAgfQ0KDQogIGJvZHkuZGFyay1tb2RlICNwYXRpZW50Q291bnRlciB7DQogICAgY29sb3I6ICMwMGJjZDQ7DQogIH0NCjwvc3R5bGU+DQo8c3R5bGU+DQouc2Nyb2xsaW5nLXRleHQgew0KICBvdmVyZmxvdzogaGlkZGVuOw0KICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCi5zY3JvbGxpbmctdGV4dCBzcGFuIHsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBwYWRkaW5nLWxlZnQ6IDAlOyAvKiByZW1vdmUgaW5pdGlhbCBibGFuayBzcGFjZSAqLw0KICBhbmltYXRpb246IHNjcm9sbC1sZWZ0IDhzIGxpbmVhciBpbmZpbml0ZTsgLyogZmFzdGVyIHNjcm9sbCAqLw0KfQ0KDQpAa2V5ZnJhbWVzIHNjcm9sbC1sZWZ0IHsNCiAgMCUgew0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTsNCiAgfQ0KICAxMDAlIHsNCiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwMCUpOw0KICB9DQp9DQo8L3N0eWxlPg0KDQo8IS0tIFRIRU1FIEFDQ0VOVCBWQVJTIChBVVRPLUlOSkVDVEVEKSAtLT4NCjxzdHlsZSBpZD0idGhlbWUtYWNjZW50LXZhcnMiPg0KICA6cm9vdCB7DQogICAgLS1hY2NlbnQ6ICMzNDk4ZGI7DQogICAgLS1hY2NlbnQtaG92ZXI6ICMyOTgwYjk7DQogICAgLS1hY2NlbnQtYm9yZGVyOiAjMzQ5OGRiOw0KICB9DQogIGJvZHkudGhlbWUtZGVmYXVsdCB7IC0tYWNjZW50OiMzNDk4ZGI7IC0tYWNjZW50LWhvdmVyOiMyOTgwYjk7IC0tYWNjZW50LWJvcmRlcjojMzQ5OGRiOyB9DQogIGJvZHkudGhlbWUtb3JhbmdlICB7IC0tYWNjZW50OiNGRjY2MDA7IC0tYWNjZW50LWhvdmVyOiNlNjVjMDA7IC0tYWNjZW50LWJvcmRlcjojRkY2NjAwOyB9DQogIGJvZHkudGhlbWUtcmVkICAgICB7IC0tYWNjZW50OiNGRjAwMDA7IC0tYWNjZW50LWhvdmVyOiNjYzAwMDA7IC0tYWNjZW50LWJvcmRlcjojRkYwMDAwOyB9DQogIGJvZHkudGhlbWUtZ3JlZW4gICB7IC0tYWNjZW50OiMwMEFBMDA7IC0tYWNjZW50LWhvdmVyOiMwMDg4MDA7IC0tYWNjZW50LWJvcmRlcjojMDBBQTAwOyB9DQoNCiAgLyogw4FwIGThu6VuZyBiaeG6v24gbMOqbiBjw6FjIHRow6BuaCBwaOG6p24gY2jDrW5oICovDQogIC5idG4geyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1hY2NlbnQpICFpbXBvcnRhbnQ7IGNvbG9yOiNmZmYgIWltcG9ydGFudDsgfQ0KICAuYnRuOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYWNjZW50LWhvdmVyKSAhaW1wb3J0YW50OyB9DQogIC51cGxvYWQtc2VjdGlvbiB7IGJvcmRlci1jb2xvcjogdmFyKC0tYWNjZW50LWJvcmRlcikgIWltcG9ydGFudDsgfQ0KICAjc2NhblN0YXR1cyB7IGNvbG9yOiB2YXIoLS1hY2NlbnQtYm9yZGVyKSAhaW1wb3J0YW50OyB9DQogIHRoIHsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLHZhcigtLWFjY2VudCksdmFyKC0tYWNjZW50LWhvdmVyKSkgIWltcG9ydGFudDsgfQ0KICAjb3BlcmF0b3JGaWx0ZXI6aG92ZXIsICNvcGVyYXRvckZpbHRlckVycm9yOmhvdmVyIHsNCiAgICBib3JkZXItY29sb3I6IHZhcigtLWFjY2VudC1ib3JkZXIpICFpbXBvcnRhbnQ7DQogICAgYm94LXNoYWRvdzogMCAwIDhweCByZ2JhKDAsMCwwLDAuMTUpLDAgMCA4cHggdmFyKC0tYWNjZW50LWJvcmRlcikgIWltcG9ydGFudDsNCiAgfQ0KICAuaGlnaGxpZ2h0LWVycm9yLXNlY3Rpb24gew0KICAgIGJveC1zaGFkb3c6IDAgMCAwIDRweCB2YXIoLS1hY2NlbnQtYm9yZGVyKSAhaW1wb3J0YW50Ow0KICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC4wMikgIWltcG9ydGFudDsNCiAgfQ0KICAudGltZS1zdWdnZXN0aW9uIHN0cm9uZyB7IGNvbG9yOiB2YXIoLS1hY2NlbnQtaG92ZXIpICFpbXBvcnRhbnQ7IH0NCjwvc3R5bGU+DQoNCjwvaGVhZD4NCjxib2R5Pg0KPCEtLSBUSEVNRSBQSUNLRVIgLS0+DQo8ZGl2IGlkPSJ0aGVtZVBpY2tlciIgY2xhc3M9InRoZW1lLXBpY2tlciIgdGl0bGU9IkNo4buNbiBtw6B1IGNo4bunIMSR4buBIGdpYW8gZGnhu4duIj4NCiANCiANCiAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJ0aGVtZS1zd2F0Y2giIGRhdGEtdGhlbWU9ImRlZmF1bHQiIHN0eWxlPSItLXN3YXRjaDojMzQ5OGRiIiBhcmlhLWxhYmVsPSJN4bq3YyDEkeG7i25oIChYYW5oIGTGsMahbmcpIj48L2J1dHRvbj4NCiAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJ0aGVtZS1zd2F0Y2giIGRhdGEtdGhlbWU9Im9yYW5nZSIgIHN0eWxlPSItLXN3YXRjaDojRkY2NjAwIiBhcmlhLWxhYmVsPSJNw6B1IGNhbSI+PC9idXR0b24+DQogIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0idGhlbWUtc3dhdGNoIiBkYXRhLXRoZW1lPSJyZWQiICAgICBzdHlsZT0iLS1zd2F0Y2g6I0ZGMDAwMCIgYXJpYS1sYWJlbD0iTcOgdSDEkeG7jyI+PC9idXR0b24+DQogIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0idGhlbWUtc3dhdGNoIiBkYXRhLXRoZW1lPSJncmVlbiIgICBzdHlsZT0iLS1zd2F0Y2g6IzAwQUEwMCIgYXJpYS1sYWJlbD0iTcOgdSB4YW5oIGzDoSI+PC9idXR0b24+DQogICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9ImRhcmtUb2dnbGUiIGNsYXNzPSJ0aGVtZS1kYXJrLXRvZ2dsZSIgb25jbGljaz0idG9nZ2xlRGFya01vZGUoKSIgYXJpYS1sYWJlbD0iQuG6rXQvVOG6r3QgY2jhur8gxJHhu5kgdOG7kWkiPg0KICAgIDxzcGFuIGlkPSJkYXJrSWNvbiI+PHNtYWxsPvCfjJk8L3NtYWxsPjwvc3Bhbj4gPHNwYW4gaWQ9ImRhcmtUZXh0Ij5U4buRaTwvc3Bhbj4NCiAgPC9idXR0b24+DQogIA0KPC9kaXY+DQoNCjxzdHlsZT4NCiAgI3RoZW1lUGlja2VyLnRoZW1lLXBpY2tlciB7DQogICAgcG9zaXRpb246YWJzb2x1dGU7DQogICAgdG9wOjIwcHg7IGxlZnQ6MTBweDsNCiAgICB6LWluZGV4OjEwMDAwOw0KICAgIGRpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo0cHg7Zm9udC1zaXplOjE0cHg7Zm9udC1mYW1pbHk6SW50ZXIsc2Fucy1zZXJpZjsNCiAgICBwYWRkaW5nOjRweCA4cHg7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LC44NSk7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2JvcmRlci1yYWRpdXM6NnB4Ow0KICB9DQogIGJvZHkuZGFyay1tb2RlICN0aGVtZVBpY2tlci50aGVtZS1waWNrZXIgew0KICAgIGJhY2tncm91bmQ6cmdiYSgwLDAsMCwuNik7Ym9yZGVyLWNvbG9yOiM2NjY7Y29sb3I6I2ZmZjsNCiAgfQ0KICAjdGhlbWVQaWNrZXIgLnRoZW1lLXN3YXRjaHsNCiAgICB3aWR0aDoyMHB4O2hlaWdodDoyMHB4O3BhZGRpbmc6MDttYXJnaW46MDtib3JkZXI6MnB4IHNvbGlkICNmZmY7Ym9yZGVyLXJhZGl1czo1MCU7Y3Vyc29yOnBvaW50ZXI7DQogICAgYmFja2dyb3VuZDp2YXIoLS1zd2F0Y2gpO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2xpbmUtaGVpZ2h0OjA7b3V0bGluZTpub25lOw0KICB9DQogICN0aGVtZVBpY2tlciAudGhlbWUtc3dhdGNoOmZvY3Vze291dGxpbmU6MnB4IHNvbGlkICMwMDA7fQ0KICBib2R5LmRhcmstbW9kZSAjdGhlbWVQaWNrZXIgLnRoZW1lLXN3YXRjaHtib3JkZXItY29sb3I6IzAwMDt9DQogICN0aGVtZVBpY2tlciAudGhlbWUtc3dhdGNoLmlzLWFjdGl2ZXtib3gtc2hhZG93OjAgMCAwIDJweCAjMDAwIGluc2V0LDAgMCAwIDRweCAjZmZmO30NCiAgYm9keS5kYXJrLW1vZGUgI3RoZW1lUGlja2VyIC50aGVtZS1zd2F0Y2guaXMtYWN0aXZle2JveC1zaGFkb3c6MCAwIDAgMnB4ICNmZmYgaW5zZXQsMCAwIDAgNHB4ICMwMDA7fQ0KPC9zdHlsZT4NCjxzdHlsZT4NCiAgLyogRGFyayB0b2dnbGUgaW5zaWRlIHRoZW1lUGlja2VyICovDQogICN0aGVtZVBpY2tlciAudGhlbWUtZGFyay10b2dnbGV7DQogICAgZm9udC1mYW1pbHk6J0ludGVyJyxzYW5zLXNlcmlmOw0KICAgIGRpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo0cHg7DQogICAgcGFkZGluZzoycHggNnB4Ow0KICAgIGZvbnQtc2l6ZToxMnB4Ow0KICAgIGJvcmRlcjpub25lOw0KICAgIGJhY2tncm91bmQ6dHJhbnNwYXJlbnQ7DQogICAgY29sb3I6aW5oZXJpdDsNCiAgICBjdXJzb3I6cG9pbnRlcjsNCiAgfQ0KICAjdGhlbWVQaWNrZXIgLnRoZW1lLWRhcmstdG9nZ2xlOmhvdmVyew0KICAgIHRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7DQogIH0NCiAgI3RoZW1lUGlja2VyIC50aGVtZS1kYXJrLXRvZ2dsZSAjZGFya0ljb257Zm9udC1zaXplOjE2cHg7bGluZS1oZWlnaHQ6MTt9DQogIC8qIEhpZGUgbGVnYWN5IGZsb2F0aW5nIGRhcmsgdG9nZ2xlIGJ1dHRvbiBpZiBzdGlsbCBwcmVzZW50ICovDQogIC5kYXJrLXRvZ2dsZS1idG57ZGlzcGxheTpub25lIWltcG9ydGFudDt9DQo8L3N0eWxlPg0KDQoNCjxzdHlsZT4NCiAgYm9keS5kYXJrLW1vZGUgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICMxMjEyMTI7DQogICAgY29sb3I6ICNmZmZmZmY7DQogIH0NCmJvZHkuZGFyay1tb2RlLCANCmJvZHkuZGFyay1tb2RlICogew0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ow0KfQ0KYm9keS5kYXJrLW1vZGUgc2VsZWN0LA0KYm9keS5kYXJrLW1vZGUgb3B0aW9uIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUxZSAhaW1wb3J0YW50Ow0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ow0KfQ0KICBib2R5LmRhcmstbW9kZSAuY29udGFpbmVyLA0KICBib2R5LmRhcmstbW9kZSAudXBsb2FkLXNlY3Rpb24sDQogIGJvZHkuZGFyay1tb2RlIC5sb2dpbi1zZWN0aW9uLA0KICBib2R5LmRhcmstbW9kZSAucHJvY2VkdXJlLWluZm8sDQogIGJvZHkuZGFyay1tb2RlIC5vcHRpb24tc2VjdGlvbiwNCiAgYm9keS5kYXJrLW1vZGUgLnRpbWUtb3B0aW9ucywNCiAgYm9keS5kYXJrLW1vZGUgLmZpbGUtcmVxdWlyZW1lbnRzLA0KICBib2R5LmRhcmstbW9kZSAudGFibGUtY29udGFpbmVyLA0KICBib2R5LmRhcmstbW9kZSB0YWJsZSwNCiAgYm9keS5kYXJrLW1vZGUgdGgsDQogIGJvZHkuZGFyay1tb2RlIHRkIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWUxZTFlICFpbXBvcnRhbnQ7DQogICAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDsNCiAgICBib3JkZXItY29sb3I6ICM0NDQgIWltcG9ydGFudDsNCiAgfQ0KICANCiAgLmRhcmstdG9nZ2xlLWJ0biB7DQogICAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7DQogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjMmMzZTUwLCAjNGNhMWFmKTsNCiAgICBmb250LXdlaWdodDogNjAwOw0KICAgIGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjIpOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBnYXA6IDZweDsNCg0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50Ow0KICAgIHRvcDogMjBweCAhaW1wb3J0YW50Ow0KICAgIGxlZnQ6IDIwcHggIWltcG9ydGFudDsNCiAgICB6LWluZGV4OiAxMDAwMCAhaW1wb3J0YW50Ow0KDQogICAgcGFkZGluZzogOHB4IDEycHg7DQogICAgYm9yZGVyOiBub25lOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICM0NDQ7DQogICAgY29sb3I6ICNmZmY7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgfQ0KDQoNCi8qID09PT09PT0gVE9BU1QgJiBEQVNIQk9BUkQgPT09PT09PSAqLw0KLnRvYXN0IHsNCiAgdmlzaWJpbGl0eTogaGlkZGVuOw0KICBtaW4td2lkdGg6IDI1MHB4Ow0KICBtYXJnaW4tbGVmdDogLTEyNXB4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzOw0KICBjb2xvcjogI2ZmZjsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBib3JkZXItcmFkaXVzOiA0cHg7DQogIHBhZGRpbmc6IDE0cHg7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgei1pbmRleDogOTk5OTsNCiAgbGVmdDogNTAlOw0KICBib3R0b206IDMwcHg7DQogIGZvbnQtc2l6ZTogMTZweDsNCiAgb3BhY2l0eTogMDsNCiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjVzLCBib3R0b20gMC41czsNCn0NCi50b2FzdC5zaG93IHsNCiAgdmlzaWJpbGl0eTogdmlzaWJsZTsNCiAgb3BhY2l0eTogMTsNCiAgYm90dG9tOiA1MHB4Ow0KfQ0KLmRhc2hib2FyZCB7DQogIGRpc3BsYXk6IGZsZXg7DQogIGdhcDogMTBweDsNCiAgbWFyZ2luOiAxMHB4IDA7DQp9DQouZGFzaGJvYXJkIC5jYXJkIHsNCiAgZmxleDogMTsNCiAgYmFja2dyb3VuZDogI2Y4ZjlmYTsNCiAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICBwYWRkaW5nOiAxMHB4Ow0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMSk7DQogIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KLm1haW5ibG9rIHsNCiAgICBiYWNrZ3JvdW5kOiAjZWRmN2ZmOw0KICAgIGJvcmRlcjogMnB4IHNvbGlkICNmM2YzZjM7DQogICAgbWFyZ2luOiAwOw0KICAgIHBhZGRpbmc6IDJweCAycHggMnB4IDJweDsNCiAgICB9DQoubGlzdDEgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZhZjA7DQogICAgYm9yZGVyOiAycHggZGFzaGVkICNmZmNmNjY7DQogICAgbWFyZ2luLWJvdHRvbTogNXB4Ow0KICAgIHBhZGRpbmc6IDVweDsNCn0NCg0KICBib2R5LmRhcmstbW9kZSAjcGF0aWVudENvdW50ZXIgew0KICAgIGNvbG9yOiAjMDBiY2Q0Ow0KICB9DQoNCg0KLmhlcmItcm93IHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBmN2ZhICFpbXBvcnRhbnQ7DQp9DQogLmhlcmItb3V0bGllciB0ZCB7DQogICAgYmFja2dyb3VuZDojZmZkZGRkICFpbXBvcnRhbnQ7DQogICAgY29sb3I6I2I3MWMxYyAhaW1wb3J0YW50Ow0KICAgIGZvbnQtd2VpZ2h0OjYwMDsNCiAgfQ0KICAjaGVyYk91dGxpZXJTdW1tYXJ5IGEgew0KICAgIGNvbG9yOiNkMzJmMmY7DQogICAgZm9udC13ZWlnaHQ6NjAwOw0KICAgIHRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7DQogICAgY3Vyc29yOnBvaW50ZXI7DQogIH0NCiAgYm9keS5kYXJrLW1vZGUgLmhlcmItb3V0bGllciB0ZCB7DQogICAgYmFja2dyb3VuZDojNWMxZjFmICFpbXBvcnRhbnQ7DQogICAgY29sb3I6I2ZmOGE4MCAhaW1wb3J0YW50Ow0KICB9DQogIGJvZHkuZGFyay1tb2RlICNoZXJiT3V0bGllclN1bW1hcnkgYSB7DQogICAgY29sb3I6I2ZmOGE4MCAhaW1wb3J0YW50Ow0KICB9DQouZGFyay1tb2RlICNoZXJiT3V0bGllck1vZGFsIFtyb2xlPSJkaWFsb2ciXSB7DQogIGJhY2tncm91bmQ6IzFlMWUxZSAhaW1wb3J0YW50Ow0KICBjb2xvcjojZjVmNWY1ICFpbXBvcnRhbnQ7DQogIGJvcmRlci1jb2xvcjojZmY2NjY2ICFpbXBvcnRhbnQ7DQp9DQoNCi8qIEtow7RuZyBn4bqhY2ggY2jDom4ga2hpIC5jaHUtdGhpY2ggZMO5bmcgY2hvIHRpw6p1IMSR4buBICovDQouY2h1LXRoaWNoLm5vLXVuZGVybGluZSwNCi5jaHUtdGhpY2gubm8tdW5kZXJsaW5lIGEgew0KICB0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsNCn0NCi8qIERBUksgTU9ERTogcG9wdXAgdGjhu6cgdGh14bqtdCBjaGkgdGnhur90ICovDQpib2R5LmRhcmstbW9kZSAjcHJvY2VkdXJlT3ZlcmxheSB7DQogIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC44KSAhaW1wb3J0YW50OyAvKiB04buRaSBoxqFuIGtoaSBi4bqtdCBkYXJrICovDQp9DQoNCmJvZHkuZGFyay1tb2RlICNwcm9jZWR1cmVQb3B1cCB7DQogIGJhY2tncm91bmQ6ICMxZTFlMWUgIWltcG9ydGFudDsNCiAgY29sb3I6ICNmNWY1ZjUgIWltcG9ydGFudDsNCiAgYm9yZGVyLWNvbG9yOiAjZmY2NjY2ICFpbXBvcnRhbnQ7ICAgICAgICAvKiB0deG7szogZ2nhu68gbcOgdSB4YW5oICMzNDk4ZGIgbuG6v3UgdGjDrWNoICovDQogIGJveC1zaGFkb3c6IDAgNXB4IDIwcHggcmdiYSgwLDAsMCwwLjYpICFpbXBvcnRhbnQ7DQp9DQoNCi8qIGNo4buvIHRpw6p1IMSR4buBIGLDqm4gdHJvbmcgKGtow7RuZyBi4bqvdCBideG7mWMsIGTDuW5nIG7hur91IG114buRbiDEkeG7lWkgbcOgdSByacOqbmcpICovDQpib2R5LmRhcmstbW9kZSAjcHJvY2VkdXJlUG9wdXAgaDMgew0KICBjb2xvcjogI2ZmOGE4MCAhaW1wb3J0YW50Ow0KfQ0KDQovKiBuw7p0IMSQw7NuZyB0cm9uZyBkYXJrIG1vZGUgKi8NCmJvZHkuZGFyay1tb2RlICNwcm9jZWR1cmVQb3B1cCAuYnRuIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmNjY2NiAhaW1wb3J0YW50Ow0KICBjb2xvcjogIzAwMCAhaW1wb3J0YW50Ow0KfQ0KLyogRGFyayBtb2RlIGNobyDDtCDEkcSDbmcgbmjhuq1wICovDQpib2R5LmRhcmstbW9kZSAubG9naW4tc2VjdGlvbiwNCmJvZHkuZGFyay1tb2RlIC5sb2dpbi1pbnB1dCB7DQogIGJhY2tncm91bmQtY29sb3I6ICMyYzJjMmMgIWltcG9ydGFudDsNCiAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDsNCiAgYm9yZGVyOiAxcHggc29saWQgIzY2NiAhaW1wb3J0YW50Ow0KfQ0KDQovKiBQbGFjZWhvbGRlciBk4buFIMSR4buNYyB0cm9uZyBkYXJrIG1vZGUgKi8NCmJvZHkuZGFyay1tb2RlIC5sb2dpbi1pbnB1dDo6cGxhY2Vob2xkZXIgew0KICBjb2xvcjogI2JiYmJiYiAhaW1wb3J0YW50Ow0KICBvcGFjaXR5OiAxOyAvKiBi4bqjbyDEkeG6o20ga2jDtG5nIGLhu4sgcXXDoSBt4budICovDQp9DQoNCi8qIENvbiB0cuG7jyBnw7UgY2jhu68gKGNhcmV0KSBjxaluZyBzw6FuZyAqLw0KYm9keS5kYXJrLW1vZGUgLmxvZ2luLWlucHV0IHsNCiAgY2FyZXQtY29sb3I6ICNmZmZmZmY7DQp9DQpib2R5LmRhcmstbW9kZSAjbG9hZGluZ1BvcHVwICNwcm9ncmVzc0JhciB7DQogIGJhY2tncm91bmQ6ICMwMGJjZDQgIWltcG9ydGFudDsgLyogdGhhbmggdGnhur9uIHRyw6xuaCAqLw0KfQ0KDQoudG9wLWJ1dHRvbi1ncm91cCB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAyMHB4Ow0KICByaWdodDogMjBweDsNCiAgZGlzcGxheTogZmxleDsNCiAgZ2FwOiAxMnB4Ow0KICB6LWluZGV4OiA5OTk5Ow0KfQ0KDQoudG9wLWJ1dHRvbi1ncm91cCAuYnRuIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzM0OThkYjsNCiAgY29sb3I6IHdoaXRlOw0KICBwYWRkaW5nOiAxMHB4IDE2cHg7DQogIGJvcmRlcjogbm9uZTsNCiAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICBmb250LXNpemU6IDE0cHg7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgYm94LXNoYWRvdzogMCAycHggNnB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7DQogIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlOw0KfQ0KDQoudG9wLWJ1dHRvbi1ncm91cCAuYnRuOmhvdmVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzI5ODBiOTsNCn0NCg0KDQoNCg0KPC9zdHlsZT4NCg0KPHNjcmlwdD4NCiAgICAgIGZ1bmN0aW9uIHRvZ2dsZURhcmtNb2RlKCkgew0KICAgICAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keTsNCiAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkYXJrSWNvbiIpOw0KICAgICAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRhcmtUZXh0Iik7DQogICAgICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgiZGFyay1tb2RlIik7DQogICAgICAgIGNvbnN0IGlzRGFyayA9IGJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCJkYXJrLW1vZGUiKTsNCiAgICAgICAgaWNvbi50ZXh0Q29udGVudCA9IGlzRGFyayA/ICLimIDvuI8iIDogIvCfjJkiOw0KICAgICAgICB0ZXh0LnRleHRDb250ZW50ID0gaXNEYXJrID8gIlPDoW5nIiA6ICJU4buRaSI7DQogICAgICB9DQogICAgPC9zY3JpcHQ+DQo8c2NyaXB0Pg0KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHsNCi8vIEzhuqV5IGPDoWMgcGjhuqduIHThu60NCiAgICAgICAgICAgIGNvbnN0IHRyaWdnZXJCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJpZ2dlckJ1dHRvbicpOw0KICAgICAgICAgICAgY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVJbnB1dCcpOw0KDQogICAgICAgICAgICAvLyBLaeG7g20gdHJhIHhlbSBwaOG6p24gdOG7rSBjw7MgdOG7k24gdOG6oWkga2jDtG5nDQogICAgICAgICAgICBpZiAoIXRyaWdnZXJCdXR0b24gfHwgIWZpbGVJbnB1dCkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0zhu5dpOiBLaMO0bmcgdMOsbSB0aOG6pXkgdHJpZ2dlckJ1dHRvbiBob+G6t2MgZmlsZUlucHV0Jyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBUaMOqbSBz4buxIGtp4buHbiBjbGljayBjaG8gYnV0dG9uDQogICAgICAgICAgICB0cmlnZ2VyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgIGZpbGVJbnB1dC5jbGljaygpOyAvLyBLw61jaCBob+G6oXQgaW5wdXQgZmlsZQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgfSk7DQoNCjwvc2NyaXB0Pg0KPGRpdiBjbGFzcz0iY29udGFpbmVyIj4NCjxkaXYgY2xhc3M9ImxvZ2luLXNlY3Rpb24iIGlkPSJsb2dpblNlY3Rpb24iPg0KPGgyIGNsYXNzPSJsb2dpbi10aXRsZSI+xJDEgk5HIE5I4bqsUCBI4buGIFRI4buQTkc8L2gyPg0KPGlucHV0IGNsYXNzPSJsb2dpbi1pbnB1dCIgaWQ9InVzZXJuYW1lSW5wdXQiIHBsYWNlaG9sZGVyPSJUw6puIMSRxINuZyBuaOG6rXAiIHR5cGU9InRleHQiLz4NCjxpbnB1dCBjbGFzcz0ibG9naW4taW5wdXQiIGlkPSJwYXNzd29yZElucHV0IiBwbGFjZWhvbGRlcj0iTeG6rXQga2jhuql1IiB0eXBlPSJwYXNzd29yZCIvPg0KPGJyLz48YnV0dG9uIGNsYXNzPSJidG4iIGlkPSJsb2dpbkJ0biI+xJDEg25nIG5o4bqtcDwvYnV0dG9uPg0KPGRpdiBjbGFzcz0ibG9naW4tZXJyb3IiIGlkPSJsb2dpbkVycm9yIj5Uw6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdSBraMO0bmcgxJHDum5nPC9kaXY+DQo8L2Rpdj4NCjxkaXYgY2xhc3M9Im1haW4tY29udGVudCIgaWQ9Im1haW5Db250ZW50Ij4NCjxkaXYgY2xhc3M9InRvcC1idXR0b24tZ3JvdXAiPg0KPGJ1dHRvbiBvbmNsaWNrPSJzaG93RHJvcGJveFBhbmVsKCkiIGNsYXNzPSJidG4iPlBhbmVsPC9idXR0b24+DQoNCiAgPGJ1dHRvbiBvbmNsaWNrPSJ3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7IiBjbGFzcz0iYnRuIj5Yb8OhIENhY2hlPC9idXR0b24+DQogIDxidXR0b24gY2xhc3M9ImJ0biJpZD0ibG9nb3V0QnRuIj7EkMSDbmcgeHXhuqV0PC9idXR0b24+DQo8L2Rpdj4NCg0KDQo8c3BhbiBjbGFzcz0iY2h1LXRoaWNoIj48aDE+IDxhIGhyZWY9Imh0dHBzOi8vZmIuY29tL2NoYXVodXluaDAxMDQiIHN0eWxlPSJhbGw6IHVuc2V0OyBjdXJzb3I6IHBvaW50ZXI7IiB0YXJnZXQ9Il9ibGFuayI+S2nhu4NtIFRyYSBUaOG7pyBUaHXhuq10IFkgVOG6vzwvYT48L2gxPjxzcGFuIGNsYXNzPSJub2ktZHVuZyI+RGVzaWduIEJ5IENow6J1IEh14buzbmg8L3NwYW4+PC9zcGFuPg0KPGRpdiBjbGFzcz0ibGlzdDEiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDhweDsiPg0KPGkgY2xhc3M9ImZhIGZhLWJ1bGxob3JuIj48L2k+DQo8Yj48Zm9udCBjb2xvcj0icmVkIj5UaMO0bmcgYsOhbzo8L2ZvbnQ+PC9iPg0KPGRpdiBjbGFzcz0ic2Nyb2xsaW5nLXRleHQiIHN0eWxlPSJmbGV4OiAxOyBvdmVyZmxvdzogaGlkZGVuOyI+DQo8ZGl2IGNsYXNzPSJzY3JvbGxpbmctY29udGVudCIgaWQ9Im5vaWR1bmciPg0KDQo8L2Rpdj4NCjwvZGl2Pg0KPC9kaXY+DQo8c2NyaXB0Pg0KDQoNCmZldGNoKCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY2hhdWh1eW5oMDEwNC9jaGF1aHV5bmgwMTA0LnR4dC9yZWZzL2hlYWRzL21haW4vdGhvbmdiYW8udHh0JykNCiAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKQ0KICAudGhlbihkYXRhID0+IHsNCiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub2lkdW5nJyk7DQogICAgZWwuaW5uZXJIVE1MID0gZGF0YTsNCg0KICAgIC8vIFTEg25nIMSR4buZIGTDoGkgbuG7mWkgZHVuZyDEkeG7gyDEkeG6o20gYuG6o28gY3Xhu5luDQogICAgZWwuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snOw0KICAgIGVsLnN0eWxlLm1pbldpZHRoID0gJzEwMCUnOw0KDQogICAgLy8gUmVzZXQgYW5pbWF0aW9uIHRvIGZvcmNlIHJlZmxvdw0KICAgIGVsLnN0eWxlLmFuaW1hdGlvbiA9ICdub25lJzsNCiAgICB2b2lkIGVsLm9mZnNldFdpZHRoOw0KICAgIGVsLnN0eWxlLmFuaW1hdGlvbiA9ICdzY3JvbGwtbGVmdCAxMHMgbGluZWFyIGluZmluaXRlJzsNCiAgfSkNCiAgLmNhdGNoKGVycm9yID0+IHsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm9pZHVuZycpLnRleHRDb250ZW50ID0gJ0tow7RuZyB0aOG7gyB04bqjaSBu4buZaSBkdW5nLic7DQogICAgY29uc29sZS5lcnJvcihlcnJvcik7DQogIH0pOw0KDQoNCjwvc2NyaXB0Pg0KPGRpdiBjbGFzcz0idXBsb2FkLXNlY3Rpb24iPjxkaXYgY2xhc3M9Im1haW5ibG9rIj4NCg0KPGlucHV0IGFjY2VwdD0iLnhsc3gsIC54bHMsIC5jc3YiIGlkPSJmaWxlSW5wdXQiIHN0eWxlPSJkaXNwbGF5Om5vbmUiIHR5cGU9ImZpbGUiLz4NCjxidXR0b24gY2xhc3M9ImJ0biIgaWQ9InRyaWdnZXJCdXR0b24iPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS11cGxvYWQiPjwvaT4gQ2jhu41uIGZpbGUgdGjhu6cgY8O0bmc8L2J1dHRvbj4NCjxici8+PGJyLz4NCjxpbnB1dCBkaXJlY3Rvcnk9IiIgaWQ9ImZvbGRlcklucHV0IiBtdWx0aXBsZT0iIiBzdHlsZT0iZGlzcGxheTpub25lIiB0eXBlPSJmaWxlIiB3ZWJraXRkaXJlY3Rvcnk9IiIvPg0KPGJ1dHRvbiBjbGFzcz0iYnRuIiBpZD0iZm9sZGVyQnRuIj48aSBjbGFzcz0iZmFzIGZhLWZvbGRlci1vcGVuIj48L2k+IENo4buNbiB0aMawIG3hu6VjIChU4buxIMSR4buZbmcgdMOsbSBmaWxlKTwvYnV0dG9uPg0KPGRpdiBpZD0ic2NhblN0YXR1cyIgc3R5bGU9Im1hcmdpbi10b3A6MTBweDtjb2xvcjojMzQ5OGRiO2ZvbnQtd2VpZ2h0OmJvbGQiPjwvZGl2Pg0KDQoNCjxsYWJlbD4NCjxpbnB1dCBuYW1lPSJ0aW1lT3B0aW9uIiB0eXBlPSJyYWRpbyIgdmFsdWU9Ijc6MDAiLz4gDQogICAgICAgICAgICAgICAgICAgICAgICBH4bujaSDDvSB04burIDA3OjAwDQogICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+DQo8bGFiZWw+DQo8aW5wdXQgY2hlY2tlZD0iIiBuYW1lPSJ0aW1lT3B0aW9uIiB0eXBlPSJyYWRpbyIgdmFsdWU9Ijc6MzAiLz4gDQogICAgICAgICAgICAgICAgICAgICAgICBH4bujaSDDvSB04burIDA3OjMwDQogICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+DQo8YnIvPjxici8+DQoNCiAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tcmlnaHQ6IDEwcHg7Ij4NCjxpbnB1dCBjaGVja2VkPSIxIiBpZD0iaWdub3JlQWRqYWNlbnRDaGVja2JveCIgdHlwZT0iY2hlY2tib3giLz4NCjxzcGFuIGNsYXNzPSJjaHUtdGhpY2giPkLhu48gcXVhIHRo4bunIHRodeG6rXQgbGnhu4FuIGvhu4E8c3BhbiBjbGFzcz0ibm9pLWR1bmciPlZEOiA4aDAwLThoMzAgeG9hIGLDs3AuIDA4aDMwLTA4aDUwIMSRaeG7h24gY2jDom0uIGxpw6puIHRp4bq/cCBtw6Aga28gY8OhY2ggMSBwaMO6dCA8L3NwYW4+PC9zcGFuPg0KPC9sYWJlbD4NCg0KICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1yaWdodDogMTBweDsiPg0KPGlucHV0IGlkPSJzaG93TW9yZVN1Z2dlc3Rpb25zQ2hlY2tib3giIHR5cGU9ImNoZWNrYm94Ii8+IA0KICAgICAgICBIaeG7g24gdGjhu4sgNiBraHVuZyBnaeG7nSBn4bujaSDDvSAgICAgICAgIA0KICAgIDwvbGFiZWw+DQoNCjxsYWJlbD4NCjxpbnB1dCBpZD0ic2hvd0RvY3RvckNoZWNrYm94IiB0eXBlPSJjaGVja2JveCIvPiANCiAgICAgICAgSGnhu4NuIHRo4buLIELDoWMgc8SpIGNo4buJIMSR4buLbmgNCiAgICA8L2xhYmVsPg0KPGJyLz48YnIvPg0KPGJ1dHRvbiBjbGFzcz0iYnRuIiBpZD0iYW5hbHl6ZUJ0biI+S2nhu4NtIFRyYTwvYnV0dG9uPg0KDQoNCg0KDQoNCg0KDQoNCg0KPHNjcmlwdD4NCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlSW5wdXQnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7DQogICAgY29uc3QgZmlsZSA9IHRoaXMuZmlsZXNbMF07DQogICAgaWYgKGZpbGUpIHsNCiAgICAgICAgY29uc3Qgc3RhdHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjYW5TdGF0dXMnKTsNCiAgICAgICAgc3RhdHVzLmlubmVySFRNTCA9IGA8aSBjbGFzcz0iZmFzIGZhLWZpbGUiPjwvaT7EkMOjIGNo4buNbiBmaWxlOiA8Yj4ke2ZpbGUubmFtZX08L2I+YDsNCiAgICAgICAgc3RhdHVzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICBzdGF0dXMuc3R5bGUuY29sb3IgPSAnIzJjM2U1MCc7DQogICAgfQ0KfSk7DQoNCjwvc2NyaXB0Pg0KPGRpdiBpZD0ic2NhblN0YXR1cyIgc3R5bGU9Im1hcmdpbi10b3A6MTBweDsgY29sb3I6IzJjM2U1MDsgZm9udC13ZWlnaHQ6Ym9sZDsgZGlzcGxheTogbm9uZTsiPjwvZGl2Pg0KPGRpdiBpZD0ib3BlcmF0b3JGaWx0ZXIiIHN0eWxlPSJtYXJnaW4tdG9wOiAxNXB4OyBkaXNwbGF5OiBub25lOyI+DQo8bGFiZWwgZm9yPSJvcGVyYXRvclNlbGVjdCI+TOG7jWMgdGhlbyBuZ8aw4budaSB0aOG7sWMgaGnhu4duOjwvbGFiZWw+DQo8c2VsZWN0IGNsYXNzPSJsb2dpbi1pbnB1dCIgaWQ9Im9wZXJhdG9yU2VsZWN0Ij4NCjxvcHRpb24gdmFsdWU9ImFsbCI+VOG6pXQgY+G6ozwvb3B0aW9uPg0KPC9zZWxlY3Q+DQo8L2Rpdj48YnIvPg0KPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsiPjxpPlBo4bqnbiBt4buBbSDEkcO0aSBraGkgY8OzIHRo4buDIG3huq9jIGzhu5dpLiBYaW4gaMOjeSBraeG7g20gdHJhIGPDoWMgdGjDtG5nIHRpbiBxdWFuIHRy4buNbmcuPC9pPjwvc3Bhbj4NCjxkaXYgaWQ9ImZpbGVSZXF1aXJlbWVudHMiPjwvZGl2Pg0KPC9kaXY+PC9kaXY+DQoNCg0KPCEtLSBC4bquVCDEkOG6plU6IELhuqJORyBHSeG7nCBUUuG7kE5HIFThu6pORyBOR8av4bucSSAtLT4NCiAgPGJ1dHRvbiBpZD0iaGVyYlRvZ2dsZUJ0biIgY2xhc3M9ImJ0biIgb25jbGljaz0idG9nZ2xlSGVyYkxpc3QoKSJzdHlsZT0iZGlzcGxheTpub25lIj5T4bqvYyB0aHXhu5FjIHRoYW5nPC9idXR0b24+DQogIDxidXR0b24gY2xhc3M9ImJ0biIgb25jbGljaz0idG9nZ2xlQXZhaWxhYmlsaXR5KCkiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPkdp4budIHRy4buRbmc8L2J1dHRvbj4NCg0KPGRpdiBpZD0iYXZhaWxhYmlsaXR5VGFibGUiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBtYXJnaW4tYm90dG9tOiAyMHB4OyI+DQogPGRpdiBjbGFzcz0ibWFpbmJsb2siIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxMHB4OyBkaXNwbGF5Om5vbmU7IiBpZD0iYXZhaWxhYmlsaXR5RmlsdGVyQmxvY2siPg0KICA8bGFiZWwgZm9yPSJmaWx0ZXJPcGVyYXRvciI+TmfGsOG7nWkgdGjhu7FjIGhp4buHbjo8L2xhYmVsPg0KICA8c2VsZWN0IGlkPSJmaWx0ZXJPcGVyYXRvciIgY2xhc3M9ImxvZ2luLWlucHV0IiBzdHlsZT0id2lkdGg6YXV0bzttYXJnaW4tcmlnaHQ6MjBweDsiPjwvc2VsZWN0Pg0KDQogIDxsYWJlbCBmb3I9ImZpbHRlckRhdGUiPk5nw6B5OjwvbGFiZWw+DQogIDxzZWxlY3QgaWQ9ImZpbHRlckRhdGUiIGNsYXNzPSJsb2dpbi1pbnB1dCIgc3R5bGU9IndpZHRoOmF1dG87Ij48L3NlbGVjdD4NCjwvZGl2Pg0KDQogIDx0YWJsZSBjbGFzcz0iZXJyb3ItdGFibGUgaGVyYi10YWJsZSI+DQogICAgPHRoZWFkPg0KICAgICAgPHRyPg0KICAgICAgICA8dGg+TmfGsOG7nWkgdGjhu7FjIGhp4buHbjwvdGg+DQogICAgICAgIDx0aD5OZ8OgeTwvdGg+DQogICAgICAgIA0KICAgICAgICA8dGg+S2h1bmcgZ2nhu50gdHLhu5FuZyBideG7lWkgc8Ohbmc8L3RoPg0KICAgICAgICA8dGg+S2h1bmcgZ2nhu50gdHLhu5FuZyBideG7lWkgY2hp4buBdTwvdGg+DQogICAgICA8L3RyPg0KICAgIDwvdGhlYWQ+DQogICAgPHRib2R5IGlkPSJhdmFpbGFiaWxpdHlCb2R5Ij48L3Rib2R5Pg0KICA8L3RhYmxlPg0KPC9kaXY+DQo8IS0tIEvhur5UIFRIw5pDOiBC4bqiTkcgR0nhu5wgVFLhu5BORyBU4buqTkcgTkfGr+G7nEkgLS0+DQoNCg0KDQoNCjwhLS0gTsOaVCBISeG7gk4gVEjhu4ogVEjhu6YgVEhV4bqsVCBT4bquQyBUSFXhu5BDIC0tPg0KDQoNCiAgDQo8IS0tIELhuqJORyBUSOG7piBUSFXhuqxUIFPhuq5DIFRIVeG7kEMgVEhBTkcgLS0+DQo8ZGl2IGlkPSJoZXJiUHJvY2VkdXJlVGFibGUiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBtYXJnaW4tdG9wOiAyMHB4OyI+DQogIDxkaXYgY2xhc3M9Im1haW5ibG9rInN0eWxlPSJtYXJnaW4tYm90dG9tOiAxMHB4OyI+DQogICAgPGRpdj4NCiAgICA8c2VsZWN0IGlkPSJoZXJiRG9jdG9yRmlsdGVyIiBjbGFzcz0ibG9naW4taW5wdXQiIHN0eWxlPSJ3aWR0aDphdXRvOyBtYXJnaW4tbGVmdDogMjBweDsiPg0KICAgICAgPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjIGLDoWMgc8SpPC9vcHRpb24+DQogICAgPC9zZWxlY3Q+DQogICAgPHNlbGVjdCBpZD0iaGVyYkRhdGVGaWx0ZXIiIGNsYXNzPSJsb2dpbi1pbnB1dCIgc3R5bGU9IndpZHRoOmF1dG87Ij48L3NlbGVjdD4NCiAgPC9kaXY+PC9kaXY+DQoNCjwhLS0gVMOTTSBU4bquVCBPVVRMSUVSIC0tPg0KPGRpdiBpZD0iaGVyYk91dGxpZXJTdW1tYXJ5IiBzdHlsZT0iZGlzcGxheTpub25lO21hcmdpbjo4cHggMjBweDtmb250LXNpemU6MTRweCI+DQogIDwhLS0gbuG7mWkgZHVuZyBz4bq9IMSRxrDhu6NjIEpTIGPhuq1wIG5o4bqtdCAtLT4NCjwvZGl2Pg0KICA8dGFibGUgY2xhc3M9ImVycm9yLXRhYmxlIj4NCiAgICA8dGhlYWQ+DQogICAgICA8dHI+DQogICAgICAgIDx0aD5I4buNIHTDqm4gYuG7h25oIG5ow6JuPC90aD4NCiAgICAgICAgPHRoPlRo4bunIHRodeG6rXQ8L3RoPg0KICAgICAgICA8dGg+TmfDoHk8L3RoPg0KICAgICAgICA8dGg+VGjhu51pIGdpYW48L3RoPg0KICAgICAgICA8dGg+TmfGsOG7nWkgdGjhu7FjIGhp4buHbjwvdGg+DQogICAgICA8L3RyPg0KICAgIDwvdGhlYWQ+DQogICAgPHRib2R5IGlkPSJoZXJiVGFibGVCb2R5Ij48L3Rib2R5Pg0KICA8L3RhYmxlPg0KPC9kaXY+DQoNCg0KPCEtLSBQT1BVUCBEQU5IIFPDgUNIIE9VVExJRVIgU+G6rkMgVEhV4buQQyBUSEFORyAtLT4NCjxkaXYgaWQ9ImhlcmJPdXRsaWVyTW9kYWwiIHN0eWxlPSJkaXNwbGF5Om5vbmU7cG9zaXRpb246Zml4ZWQ7aW5zZXQ6MDt6LWluZGV4OjExMDAwIj4NCiAgPGRpdiBpZD0iaGVyYk91dGxpZXJCYWNrZHJvcCIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSkiPjwvZGl2Pg0KICA8ZGl2IHJvbGU9ImRpYWxvZyIgYXJpYS1tb2RhbD0idHJ1ZSINCiAgICAgICBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7dG9wOjEwJTtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKTsNCiAgICAgICAgICAgICAgbWF4LXdpZHRoOjcwMHB4O21heC1oZWlnaHQ6ODB2aDtvdmVyZmxvdzphdXRvOw0KICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiNmZmY7Y29sb3I6IzAwMDtwYWRkaW5nOjIwcHg7Ym9yZGVyLXJhZGl1czo4cHg7DQogICAgICAgICAgICAgIGJvcmRlcjoycHggc29saWQgI2QzMmYyZjtib3gtc2hhZG93OjAgNXB4IDIwcHggcmdiYSgwLDAsMCwwLjMpO2ZvbnQtZmFtaWx5OkludGVyLHNhbnMtc2VyaWYiPg0KICAgIDxoMz5EYW5oIHPDoWNoIGNhIGtow6FjIMSRYSBz4buRPC9oMz4NCiAgICA8ZGl2IHN0eWxlPSJtYXJnaW46MTBweCAwO2ZvbnQtc2l6ZToxM3B4IiBpZD0iaGVyYk91dGxpZXJNb2RhbEluZm8iPjwvZGl2Pg0KICAgIDx0YWJsZSBjbGFzcz0iZXJyb3ItdGFibGUiIHN0eWxlPSJtYXJnaW4tdG9wOjEwcHgiPg0KICAgICAgPHRoZWFkPg0KICAgICAgICA8dHI+DQogICAgICAgICAgPHRoPkjhu40gdMOqbiBi4buHbmggbmjDom48L3RoPg0KICAgICAgICAgIDx0aD5UaOG7pyB0aHXhuq10PC90aD4NCiAgICAgICAgICA8dGg+TmfDoHk8L3RoPg0KICAgICAgICAgIDx0aD5UaOG7nWkgZ2lhbjwvdGg+DQogICAgICAgICAgPHRoPk5nxrDhu51pIHRo4buxYyBoaeG7h248L3RoPg0KICAgICAgICA8L3RyPg0KICAgICAgPC90aGVhZD4NCiAgICAgIDx0Ym9keSBpZD0iaGVyYk91dGxpZXJNb2RhbEJvZHkiPjwvdGJvZHk+DQogICAgPC90YWJsZT4NCiAgICA8YnIvPg0KICAgIDxidXR0b24gY2xhc3M9ImJ0biIgdHlwZT0iYnV0dG9uIiBpZD0iaGVyYk91dGxpZXJDbG9zZUJ0biI+xJDDs25nPC9idXR0b24+DQogIDwvZGl2Pg0KPC9kaXY+DQoNCg0KDQoNCg0KDQo8YnIvPg0KPGJyLz48ZGl2IGlkPSJlcnJvclNlY3Rpb24iIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+DQo8YnIvPg0KPGgzIGlkPSJlcnJvclNlY3Rpb25UaXRsZSI+TOG7l2kgTmjhuq1wIFNhaSBUaOG7nWkgR2lhbjwvaDI+DQo8ZGl2IGlkPSJvcGVyYXRvckZpbHRlckVycm9yIiBzdHlsZT0ibWFyZ2luLXRvcDogMTVweDsgZGlzcGxheTogbm9uZTsiPg0KPGxhYmVsIGZvcj0ib3BlcmF0b3JTZWxlY3RFcnJvciI+TOG7jWMgdGhlbyBuZ8aw4budaSB0aOG7sWMgaGnhu4duOjwvbGFiZWw+DQo8c2VsZWN0IGNsYXNzPSJsb2dpbi1pbnB1dCIgaWQ9Im9wZXJhdG9yU2VsZWN0RXJyb3IiPg0KPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjPC9vcHRpb24+DQo8L3NlbGVjdD4NCjwvZGl2Pg0KPGRpdiBpZD0iZXJyb3JMb2ciPjwvZGl2Pg0KPC9kaXY+DQo8YnIvPg0KPGRpdiBjbGFzcz0iZGFzaGJvYXJkIiBpZD0iZGFzaGJvYXJkIiBzdHlsZT0iZGlzcGxheTpub25lIj4NCjxkaXYgY2xhc3M9ImNhcmQiIGlkPSJjYXJkVG90YWwiPlThu5VuZzogMDwvZGl2Pg0KPGRpdiBjbGFzcz0iY2FyZCIgaWQ9ImNhcmRFcnJvcnMiPkzhu5dpOiAwPC9kaXY+DQo8ZGl2IGNsYXNzPSJjYXJkIiBpZD0iY2FyZENvbmZsaWN0cyI+WHVuZyDEkeG7mXQ6IDA8L2Rpdj4NCjwvZGl2Pg0KPGRpdiBpZD0icmVzdWx0U2VjdGlvbiIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4NCjxoMiBpZD0icmVzdWx0U2VjdGlvblRpdGxlIj5L4bq/dCBRdeG6oyBLaeG7g20gVHJhPC9oMj4gPGJyLz4NCjxkaXYgaWQ9InN1bW1hcnkiPjwvZGl2Pg0KPHRhYmxlIGlkPSJyZXN1bHRUYWJsZSI+DQo8dGhlYWQ+DQo8dHI+DQo8dGg+PGkgY2xhc3M9ImZhcyBmYS11c2VyIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBUw6puIEJOPC90aD4NCjx0aD48aSBjbGFzcz0iZmFzIGZhLXByb2NlZHVyZXMgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IFRo4bunIHRodeG6rXQ8L3RoPg0KPHRoPjxpIGNsYXNzPSJmYXIgZmEtY2FsZW5kYXItYWx0IGZhLXNwaW4tY29udGludW91cyI+PC9pPiBOZ8OgeTwvdGg+DQo8dGggY2xhc3M9ImRvY3Rvci1jb2x1bW4iPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1tZCBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gQsOhYyBz4bu5IGNo4buJIMSR4buLbmg8L3RoPg0KPHRoPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1udXJzZSBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gTmfGsOG7nWkgdGjhu7FjIGhp4buHbjwvdGg+DQo8dGg+PGkgY2xhc3M9ImZhciBmYS1jbG9jayBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gR+G7o2kgw70gZ2nhu508L3RoPg0KPC90cj4NCjwvdGhlYWQ+DQo8dGJvZHkgaWQ9InJlc3VsdEJvZHkiPjwvdGJvZHk+DQo8L3RhYmxlPg0KDQoNCjwvZGl2Pg0KPC9kaXY+DQo8L2Rpdj4NCjxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4NCjxzY3JpcHQ+DQogICAgIC8vIFTDoGkga2hv4bqjbiBo4bujcCBs4buHDQoNCg0KICAgICAgICAvLyBEYW5oIHPDoWNoIHRo4bunIHRodeG6rXQNCiAgICAgICBsZXQgUFJPQ0VEVVJFUyA9IHt9Ow0KDQphc3luYyBmdW5jdGlvbiBsb2FkUHJvY2VkdXJlcygpIHsNCiAgICB0cnkgew0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2NoYXVodXluaDAxMDQvY2hhdWh1eW5oMDEwNC50eHQvcmVmcy9oZWFkcy9tYWluL2NoYXVfdGh1dGh1YXQudHh0Jyk7DQogICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICBQUk9DRURVUkVTID0gSlNPTi5wYXJzZSh0ZXh0KTsNCiAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgYWxlcnQoJ0tow7RuZyB0aOG7gyB04bqjaSBkYW5oIHPDoWNoIHRo4bunIHRodeG6rXQ6ICcgKyBlcnIubWVzc2FnZSk7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsNCiAgICB9DQp9DQoNCgkJDQoNCiAgICAgICAgLy8gQmnhur9uIHRvw6BuIGPhu6VjDQogICAgICAgIGxldCBlcnJvckxvZyA9IFtdOw0KICAgICAgICBsZXQgY3VycmVudFVzZXIgPSBudWxsOw0KICAgICAgICBsZXQgYWxsUHJvY2VkdXJlcyA9IFtdOw0KDQoNCmNvbnN0IERST1BCT1hfQ09ORklHID0gew0KICAgIHJlZnJlc2hUb2tlbjogImN0Z0J2ajNJc3RjQUFBQUFBQUFBQVZGQ3NJWEl1el9DVFFwSW1ha2NDNGN1UVY4RHVta2ZnRFdJczhWR1B2RlQiLA0KICAgIGNsaWVudElkOiAidzhhd2oycXhvM2FpdjVlIiwNCiAgICBjbGllbnRTZWNyZXQ6ICJxa3FvMXU3YXRzN2JsOWciDQp9Ow0KDQphc3luYyBmdW5jdGlvbiBnZXRBY2Nlc3NUb2tlbigpIHsNCiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCJodHRwczovL2FwaS5kcm9wYm94YXBpLmNvbS9vYXV0aDIvdG9rZW4iLCB7DQogICAgICAgIG1ldGhvZDogIlBPU1QiLA0KICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6ICJCYXNpYyAiICsgYnRvYShgJHtEUk9QQk9YX0NPTkZJRy5jbGllbnRJZH06JHtEUk9QQk9YX0NPTkZJRy5jbGllbnRTZWNyZXR9YCksDQogICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCINCiAgICAgICAgfSwNCiAgICAgICAgYm9keTogYGdyYW50X3R5cGU9cmVmcmVzaF90b2tlbiZyZWZyZXNoX3Rva2VuPSR7RFJPUEJPWF9DT05GSUcucmVmcmVzaFRva2VufWANCiAgICB9KTsNCiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOw0KICAgIHJldHVybiBkYXRhLmFjY2Vzc190b2tlbjsNCn0NCg0KYXN5bmMgZnVuY3Rpb24gdXBsb2FkVG9Ecm9wYm94KGZpbGUsIGtob2FWYWx1ZSwgbmdheVZhbHVlKSB7DQogICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCBnZXRBY2Nlc3NUb2tlbigpOw0KICAgIGNvbnN0IGRieCA9IG5ldyBEcm9wYm94LkRyb3Bib3goeyBhY2Nlc3NUb2tlbiB9KTsNCg0KICAgIGNvbnN0IHBjTmFtZSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7DQogICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygndmktVk4nKTsNCiAgICBjb25zdCBmaWxlbmFtZSA9IGAke2ZpbGUubmFtZS5yZXBsYWNlKC9cLlteLy5dKyQvLCAiIil9XyR7RGF0ZS5ub3coKX0ueGxzeGA7DQoNCiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGRieC5maWxlc1VwbG9hZCh7DQogICAgICAgIHBhdGg6IGAvdGh1dGh1YXQvJHtmaWxlbmFtZX1gLA0KICAgICAgICBjb250ZW50czogZmlsZSwNCiAgICAgICAgbW9kZTogJ2FkZCcsDQogICAgICAgIGF1dG9yZW5hbWU6IHRydWUNCiAgICB9KTsNCg0KICAgIC8vIEdoaSBtZXRhZGF0YSB2w6BvIGZpbGUgSlNPTiB0cnVuZyB0w6JtIChk4bqhbmcgdGV4dCBhcHBlbmQpDQogICAgY29uc3QgbWV0YWRhdGEgPSB7DQogICAgICAgIHN0dDogRGF0ZS5ub3coKSwNCiAgICBraG9hOiBraG9hVmFsdWUsICAgICAgICAvLyDinIUgxJHDum5nIGJp4bq/bg0KICAgIG5nYXk6IG5nYXlWYWx1ZSwgICAgLy8g4pyFIMSRw7puZyBiaeG6v24NCiAgICAgICAgbGluazogImh0dHBzOi8vd3d3LmRyb3Bib3guY29tL2hvbWUvdGh1dGh1YXQ/cHJldmlldz0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGZpbGVuYW1lKSwNCiAgICAgICAgcGM6IHBjTmFtZSwNCiAgICAgICAgdGltZTogbm93DQogICAgfTsNCg0KICAgIGF3YWl0IGFwcGVuZERyb3Bib3hMb2cobWV0YWRhdGEpOw0KfQ0KDQphc3luYyBmdW5jdGlvbiBhcHBlbmREcm9wYm94TG9nKGxvZ0l0ZW0pIHsNCiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IGdldEFjY2Vzc1Rva2VuKCk7DQogICAgY29uc3QgZGJ4ID0gbmV3IERyb3Bib3guRHJvcGJveCh7IGFjY2Vzc1Rva2VuIH0pOw0KDQogICAgY29uc3QgbG9nUGF0aCA9ICcvdGh1dGh1YXQvbG9nLmpzb24nOw0KICAgIGxldCBsb2dzID0gW107DQoNCiAgICB0cnkgew0KICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGRieC5maWxlc0Rvd25sb2FkKHsgcGF0aDogbG9nUGF0aCB9KTsNCiAgICAgICAgY29uc3QgYmxvYiA9IHJlc3BvbnNlLnJlc3VsdC5maWxlQmxvYjsgLy8g4pyFIGTDuW5nIC5yZXN1bHQuZmlsZUJsb2INCiAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IGJsb2IudGV4dCgpOw0KICAgICAgICBsb2dzID0gSlNPTi5wYXJzZSh0ZXh0KTsNCiAgICB9IGNhdGNoIChlKSB7DQogICAgICAgIGNvbnNvbGUud2FybigiS2jDtG5nIHTDrG0gdGjhuqV5IGxvZy5qc29uIGPFqSBob+G6t2MgbOG7l2kgxJHhu41jOiIsIGUpOw0KICAgICAgICBsb2dzID0gW107DQogICAgfQ0KDQogICAgLy8gQ2jDqG4gbeG7m2kgbmjhuqV0IGzDqm4gxJHhuqd1DQogICAgbG9ncy51bnNoaWZ0KGxvZ0l0ZW0pOw0KDQogICAgYXdhaXQgZGJ4LmZpbGVzVXBsb2FkKHsNCiAgICAgICAgcGF0aDogbG9nUGF0aCwNCiAgICAgICAgY29udGVudHM6IEpTT04uc3RyaW5naWZ5KGxvZ3MsIG51bGwsIDIpLA0KICAgICAgICBtb2RlOiB7ICcudGFnJzogJ292ZXJ3cml0ZScgfSwgLy8g4pyFIEdoaSDEkcOoIGLhuq90IGJ14buZYw0KICAgICAgICBhdXRvcmVuYW1lOiBmYWxzZQ0KICAgIH0pOw0KfQ0KDQoNCg0KDQoNCg0KICAgICAgICAvLyA9PT09PT09PT09IFBI4bqmTiDEkMSCTkcgTkjhuqxQID09PT09PT09PT0gLy8NCiAgIGFzeW5jIGZ1bmN0aW9uIGNoZWNrU2F2ZWRMb2dpbigpIHsNCiAgICBjb25zdCBzYXZlZFVzZXIgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdtZWRVc2VyJyk7DQogICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCBsb2FkQWNjb3VudHNGcm9tVFhUKCk7IC8vIFThuqNpIGThu68gbGnhu4d1IHTDoGkga2hv4bqjbiB04burIGZpbGUgdHh0DQoNCiAgICBpZiAoc2F2ZWRVc2VyICYmIGFjY291bnRzW3NhdmVkVXNlcl0pIHsNCiAgICAgICAgY3VycmVudFVzZXIgPSBzYXZlZFVzZXI7DQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpblNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkNvbnRlbnQnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICB9DQp9DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gY2hlY2tMb2dpbigpIHsNCiAgICBjb25zdCB1c2VybmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VybmFtZUlucHV0JykudmFsdWUudHJpbSgpOw0KICAgIGNvbnN0IHBhc3N3b3JkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkSW5wdXQnKS52YWx1ZS50cmltKCk7DQogICAgY29uc3QgbG9naW5FcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbkVycm9yJyk7DQogICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCBsb2FkQWNjb3VudHNGcm9tVFhUKCk7IC8vIFThuqNpIGThu68gbGnhu4d1IHTDoGkga2hv4bqjbiB04burIGZpbGUgdHh0DQoNCiAgICBpZiAoYWNjb3VudHNbdXNlcm5hbWVdICYmIGFjY291bnRzW3VzZXJuYW1lXSA9PT0gcGFzc3dvcmQpIHsNCiAgICAgICAgY3VycmVudFVzZXIgPSB1c2VybmFtZTsNCiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnbWVkVXNlcicsIHVzZXJuYW1lKTsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luU2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluQ29udGVudCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICBsb2dpbkVycm9yLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbG9naW4tcGFnZScpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIGxvZ2luRXJyb3Iuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgfQ0KfQ0KDQogICAgICAgIGZ1bmN0aW9uIGxvZ291dCgpIHsNCiAgICAgICAgICAgIGN1cnJlbnRVc2VyID0gbnVsbDsNCiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ21lZFVzZXInKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpblNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluQ29udGVudCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcm5hbWVJbnB1dCcpLnZhbHVlID0gJyc7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRJbnB1dCcpLnZhbHVlID0gJyc7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5FcnJvcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2xvZ2luLXBhZ2UnKTsNCiAgICAgICAgfQ0KDQovLyA9PT09PT09PT09IEjDgE0gTE9BRCBEQU5IIFPDgUNIIEtIT0EgSOG7olAgTOG7hiA9PT09PT09PT09IC8vDQphc3luYyBmdW5jdGlvbiBsb2FkVmFsaWREZXBhcnRtZW50cygpIHsNCiAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2NoYXVodXluaDAxMDQvY2hhdWh1eW5oMDEwNC50eHQvcmVmcy9oZWFkcy9tYWluL2tob2EudHh0JzsNCiAgICB0cnkgew0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwgKyAnP3Y9JyArIERhdGUubm93KCkpOw0KICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgY29uc3Qga2hvYUxpc3QgPSB0ZXh0LnNwbGl0KCdcbicpLm1hcChsaW5lID0+IGxpbmUudHJpbSgpLnRvTG93ZXJDYXNlKCkpLmZpbHRlcihCb29sZWFuKTsNCiAgICAgICAgcmV0dXJuIGtob2FMaXN0Ow0KICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICBjb25zb2xlLmVycm9yKCJLaMO0bmcgdGjhu4MgdOG6o2kgZGFuaCBzw6FjaCBraG9hOiIsIGVycik7DQogICAgICAgIHJldHVybiBbXTsNCiAgICB9DQp9DQoNCiAgICAgICAgLy8gPT09PT09PT09PSBQSOG6pk4gWOG7rCBMw50gRklMRSA9PT09PT09PT09IC8vDQpmdW5jdGlvbiBoYW5kbGVGaWxlKCkgew0KICAgIGNvbnN0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlSW5wdXQnKTsNCiAgICBjb25zdCBhbmFseXplQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FuYWx5emVCdG4nKTsNCiAgICBjb25zdCBmaWxlID0gZmlsZUlucHV0LmZpbGVzWzBdOw0KCQ0KCQ0KICAgIGlmICghZmlsZSkgew0KICAgICAgICBhbGVydCgnVnVpIGzDsm5nIGNo4buNbiBmaWxlIHRyxrDhu5tjIGtoaSBraeG7g20gdHJhJyk7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZVJlcXVpcmVtZW50cycpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOw0KICAgIGVycm9yTG9nID0gW107DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdFNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvclNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIGFuYWx5emVCdG4uZGlzYWJsZWQgPSB0cnVlOw0KICAgIGFuYWx5emVCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtc3Bpbm5lciBmYS1zcGluIj48L2k+IMSQYW5nIGtp4buDbSB0cmEuLi4nOw0KICAgIA0KICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgDQogICAgcmVhZGVyLm9ubG9hZCA9IGFzeW5jIGZ1bmN0aW9uKGUpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShlLnRhcmdldC5yZXN1bHQpOw0KICAgICAgICAgICAgY29uc3Qgd29ya2Jvb2sgPSBYTFNYLnJlYWQoZGF0YSwgeyB0eXBlOiAnYXJyYXknIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAod29ya2Jvb2suU2hlZXROYW1lcy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpbGUgRXhjZWwga2jDtG5nIGPDsyBzaGVldCBuw6BvJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGZpcnN0U2hlZXQgPSB3b3JrYm9vay5TaGVldHNbd29ya2Jvb2suU2hlZXROYW1lc1sxXV07DQogICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbihmaXJzdFNoZWV0LCB7IA0KICAgICAgICAgICAgICAgIGhlYWRlcjogMSwgDQogICAgICAgICAgICAgICAgZGVmdmFsOiAiIiwgDQogICAgICAgICAgICAgICAgYmxhbmtyb3dzOiB0cnVlIA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBjb25zdCBkb25nNSA9IChqc29uRGF0YVs0XSAmJiBqc29uRGF0YVs0XVswXSkgPyBqc29uRGF0YVs0XVswXS50b1N0cmluZygpLnRyaW0oKSA6ICJLaMO0bmcgcsO1IjsNCmNvbnN0IGRvbmc2ID0gKGpzb25EYXRhWzVdICYmIGpzb25EYXRhWzVdWzBdKSA/IGpzb25EYXRhWzVdWzBdLnRvU3RyaW5nKCkudHJpbSgpIDogIktow7RuZyByw7UiOw0Kd2luZG93Lm5nYXlWYWx1ZSA9IGRvbmc1OyAgLy8g4qyFIGTDsm5nIDUgPSBOZ8OgeQ0Kd2luZG93Lmtob2FWYWx1ZSA9IGRvbmc2OyAgLy8g4qyFIGTDsm5nIDYgPSBLaG9hDQoNCmNvbnN0IGZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZUlucHV0JykuZmlsZXNbMF07DQp1cGxvYWRUb0Ryb3Bib3goZmlsZSwgd2luZG93Lmtob2FWYWx1ZSwgd2luZG93Lm5nYXlWYWx1ZSk7DQoJCQkvLy8vIEtp4buDbSB0cmEga2hvYSAvLy8vLw0KLy8g4pyFIEzhuqV5IGThu68gbGnhu4d1IGTDsm5nIDYsIGPhu5l0IEENCmNvbnN0IGtob2FSb3cgPSBqc29uRGF0YVs1XTsgLy8gZMOybmcgNg0KY29uc3Qga2hvYVRleHQgPSAoa2hvYVJvdyAmJiBraG9hUm93WzBdIHx8ICIiKS50b1N0cmluZygpLnRyaW0oKTsNCmNvbnN0IGtob2FMb3dlciA9IGtob2FUZXh0LnRvTG93ZXJDYXNlKCk7DQoNCi8vIOKchSBLaeG7g20gdHJhIHTDqm4ga2hvYQ0KY29uc3QgdmFsaWRLaG9hTGlzdCA9IGF3YWl0IGxvYWRWYWxpZERlcGFydG1lbnRzKCk7DQppZiAoIXZhbGlkS2hvYUxpc3Quc29tZShraG9hID0+IGtob2FMb3dlci5pbmNsdWRlcyhraG9hKSkpIHsNCiAgICAgIHdpbmRvdy5pc0tob2FMb2kgPSB0cnVlOw0KICAgIGNvbnN0IG1zZyA9IGDinYwgTcOheSBjaOG7pyB04burIGNo4buRaSAke2tob2FUZXh0IHx8ICdLaMO0bmcgeMOhYyDEkeG7i25oJ30gc+G7rSBk4bulbmcgcGjhuqduIG3hu4FtLiA8YnIvPlZ1aSBsw7JuZyBtdWEgYuG6o24gcXV54buBbiDEkeG7gyB0w7RuIHRy4buNbmcgdMOhYyBnaeG6oy4gYDsNCg0KICAgIC8vIEhp4buDbiBwb3B1cCBjaOG7qSBraMO0bmcgYWxlcnQNCiAvLyBIaeG7g24gdGjhu4sgcG9wdXANCiAgICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdQb3B1cCcpOw0KICAgIGNvbnN0IGxvYWRpbmdUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdUZXh0Jyk7DQogICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3NCYXInKTsNCg0KICAgIC8vIEhp4buDbiB0aOG7iyB0aMO0bmcgYsOhbyBs4buXaSB2xKluaCB2aeG7hW4NCiAgICBsb2FkaW5nVGV4dC5pbm5lckhUTUwgPSBgDQogICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtYmFuIiBzdHlsZT0iZm9udC1zaXplOjI0cHg7Y29sb3I6cmVkO2ZvbnQtc2l6ZToyMHB4O21hcmdpbi1ib3R0b206MTBweDsiPjwvaT48YnIvPg0KICAgICAgICA8c3Ryb25nPiR7bXNnfTwvc3Ryb25nPjxici8+PGJyLz4NCiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIiBvbmNsaWNrPSJ3aW5kb3cubG9jYXRpb24ucmVsb2FkKCkiPsSQw7NuZzwvYnV0dG9uPg0KICAgIGA7DQogICAgcHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSAnMCUnOw0KDQogICAgcG9wdXAuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7DQoNCiAgICAvLyDinIUgVsOUIEhJ4buGVSBIw5NBIGLhuqV0IGvhu7MgxJFv4bqhbiBuw6BvIGPhu5EgZ+G6r25nIOG6qW4gcG9wdXAgc2F1IMSRw7MNCiAgICB3aW5kb3cuaXNLaG9hTG9pID0gdHJ1ZTsNCg0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY2FuU3RhdHVzJykuaW5uZXJIVE1MID0gYDxzcGFuIHN0eWxlPSJjb2xvcjpyZWQ7Zm9udC13ZWlnaHQ6Ym9sZCI+JHttc2d9PC9zcGFuPmA7DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdFNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvclNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIHJldHVybjsNCn0NCg0KDQoNCgkJCQ0KICAgICAgICAgICAgaWYgKGpzb25EYXRhLmxlbmd0aCA8PSAxKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaWxlIEV4Y2VsIGtow7RuZyBjw7MgZOG7ryBsaeG7h3UgKGNo4buJIGPDsyB0acOqdSDEkeG7gSBob+G6t2MgdHLhu5FuZyknKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcHJvY2Vzc0RhdGEoanNvbkRhdGEpOw0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVSZXF1aXJlbWVudHMnKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsNCiAgICAgICAgICAgIGxvZ0Vycm9yKCdM4buXaSBraGkgxJHhu41jIGZpbGUgRXhjZWwnLCBudWxsLCBlcnJvci5tZXNzYWdlKTsNCiAgICAgICAgICAgIGRpc3BsYXlFcnJvcnMoKTsNCiAgICAgICAgICAgIGFsZXJ0KCdDw7MgbOG7l2kgeOG6o3kgcmEga2hpIMSR4buNYyBmaWxlOiAnICsgZXJyb3IubWVzc2FnZSk7DQogICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICBhbmFseXplQnRuLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICBhbmFseXplQnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXNlYXJjaCBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gS2nhu4NtIFRyYSc7DQogICAgICAgIH0NCiAgICB9Ow0KICAgIA0KICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7DQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlUmVxdWlyZW1lbnRzJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7DQogICAgICAgIGxvZ0Vycm9yKCdM4buXaSBraGkgxJHhu41jIGZpbGUnLCBudWxsLCAnS2jDtG5nIHRo4buDIMSR4buNYyBu4buZaSBkdW5nIGZpbGUnKTsNCiAgICAgICAgZGlzcGxheUVycm9ycygpOw0KICAgICAgICBhbmFseXplQnRuLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgIGFuYWx5emVCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtc2VhcmNoIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBLaeG7g20gVHJhJzsNCiAgICAgICAgYWxlcnQoJ0zhu5dpIGtoaSDEkeG7jWMgZmlsZS4gVnVpIGzDsm5nIHRo4butIGzhuqFpIHbhu5tpIGZpbGUga2jDoWMuJyk7DQogICAgfTsNCiAgICANCiAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7DQp9DQoNCiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0RhdGEoZGF0YSkgew0KICAgIA0KICAgIHRyeSB7DQogICAgICAgIGNvbnN0IGhlYWRlckxpbmUxID0gZGF0YVs3XSB8fCBbXTsNCiAgICAgICAgY29uc3QgaGVhZGVyTGluZTIgPSBkYXRhWzhdIHx8IFtdOw0KICAgICAgICBjb25zdCBjb21iaW5lZEhlYWRlcnMgPSBoZWFkZXJMaW5lMS5tYXAoKGNvbCwgaW5kZXgpID0+IA0KICAgICAgICAgICAgKGNvbCArICcgJyArIChoZWFkZXJMaW5lMltpbmRleF0gfHwgJycpKS50cmltKCkNCiAgICAgICAgKTsNCg0KICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCBwcm9jZWR1cmVJbmRleCA9IGNvbWJpbmVkSGVhZGVycy5maW5kSW5kZXgoaCA9PiBoLmluY2x1ZGVzKCJUaOG7pyB0aHXhuq10IikpOw0KCQkJCWNvbnN0IGRhdGVJbmRleCA9IGNvbWJpbmVkSGVhZGVycy5maW5kSW5kZXgoaCA9PiBoLmluY2x1ZGVzKCJOZ8OgeSB0aOG7sWMgaGnhu4duIikpOyAvLyBUaMOqbSBkw7JuZyBuw6B5DQogICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRJbmRleCA9IGNvbWJpbmVkSGVhZGVycy5maW5kSW5kZXgoaCA9PiBoLmluY2x1ZGVzKCJUaOG7nWkgZ2lhbiBi4bqvdCDEkeG6p3UgdGjhu7FjIGhp4buHbiIpKTsNCiAgICAgICAgICAgICAgICBjb25zdCBlbmRJbmRleCA9IGNvbWJpbmVkSGVhZGVycy5maW5kSW5kZXgoaCA9PiBoLmluY2x1ZGVzKCJUaOG7nWkgZ2lhbiBr4bq/dCB0aMO6YyIpKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvcGVyYXRvckluZGV4ID0gY29tYmluZWRIZWFkZXJzLmZpbmRJbmRleChoID0+IGguaW5jbHVkZXMoIlRo4bunIHRodeG6rXQgY2jDrW5oIikpOw0KICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVJbmRleCA9IGNvbWJpbmVkSGVhZGVycy5maW5kSW5kZXgoaCA9PiBoLmluY2x1ZGVzKCJI4buNIHTDqm4iKSk7DQogICAgICAgICAgICAgICAgY29uc3QgcGF0aWVudElkSW5kZXggPSBjb21iaW5lZEhlYWRlcnMuZmluZEluZGV4KGggPT4gaC5pbmNsdWRlcygiTcOjIEJOIikpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRvY3RvckluZGV4ID0gY29tYmluZWRIZWFkZXJzLmZpbmRJbmRleChoID0+IGguaW5jbHVkZXMoIkLDoWMgc+G7uSBjaOG7iSDEkeG7i25oIikpOw0KICAgICAgICAgICAgICAgIGNvbnN0IG1pc3NpbmdDb2x1bW5zID0gW107DQogICAgICAgICAgICAgICAgaWYgKHByb2NlZHVyZUluZGV4ID09PSAtMSkgbWlzc2luZ0NvbHVtbnMucHVzaCgnVGjhu6cgdGh14bqtdCcpOw0KICAgICAgICAgICAgICAgIGlmIChzdGFydEluZGV4ID09PSAtMSkgbWlzc2luZ0NvbHVtbnMucHVzaCgnVGjhu51pIGdpYW4gYuG6r3QgxJHhuqd1IHRo4buxYyBoaeG7h24nKTsNCiAgICAgICAgICAgICAgICBpZiAoZW5kSW5kZXggPT09IC0xKSBtaXNzaW5nQ29sdW1ucy5wdXNoKCdUaOG7nWkgZ2lhbiBr4bq/dCB0aMO6YycpOw0KICAgICAgICAgICAgICAgIGlmIChvcGVyYXRvckluZGV4ID09PSAtMSkgbWlzc2luZ0NvbHVtbnMucHVzaCgnVGjhu6cgdGh14bqtdCBjaMOtbmgnKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAobWlzc2luZ0NvbHVtbnMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEtow7RuZyB0w6xtIHRo4bqleSBjw6FjIGPhu5l0IGLhuq90IGJ14buZYzogJHttaXNzaW5nQ29sdW1ucy5qb2luKCcsICcpfWApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCByb3dzID0gZGF0YS5zbGljZSg5KTsNCiAgICAgICAgICAgICAgICBjb25zdCBwcm9jZWR1cmVzID0gW107DQogICAgICAgICAgICAgICAgY29uc3QgaGVyYlByb2NlZHVyZXMgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgc2tpcHBlZFJvd3MgPSAwOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHJvd3MuZm9yRWFjaCgocm93LCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dOdW1iZXIgPSBpbmRleCArIDEwOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcm93IHx8IHJvdy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dFcnJvcignRMOybmcgdHLhu5FuZycsIHJvd051bWJlcik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZFJvd3MrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2NlZHVyZU5hbWUgPSByb3dbcHJvY2VkdXJlSW5kZXhdOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXByb2NlZHVyZU5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2lwcGVkUm93cysrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFQUk9DRURVUkVTW3Byb2NlZHVyZU5hbWVdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nRXJyb3IoYFRo4bunIHRodeG6rXQga2jDtG5nIG7hurFtIHRyb25nIGRhbmggc8OhY2gga2nhu4NtIHRyYTogJHtwcm9jZWR1cmVOYW1lfWAsIHJvd051bWJlcik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZFJvd3MrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChQUk9DRURVUkVTW3Byb2NlZHVyZU5hbWVdLnNraXApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IHBhcnNlRGF0ZVRpbWUocm93W3N0YXJ0SW5kZXhdLCByb3dOdW1iZXIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IHBhcnNlRGF0ZVRpbWUocm93W2VuZEluZGV4XSwgcm93TnVtYmVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZXJiUHJvY2VkdXJlcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93SW5kZXg6IHJvd051bWJlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aWVudE5hbWU6IG5hbWVJbmRleCAhPT0gLTEgPyByb3dbbmFtZUluZGV4XSB8fCAnS2jDtG5nIGPDsycgOiAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGllbnRJZDogcGF0aWVudElkSW5kZXggIT09IC0xID8gcm93W3BhdGllbnRJZEluZGV4XSB8fCAnS2jDtG5nIGPDsycgOiAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2NlZHVyZTogcHJvY2VkdXJlTmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdG9yOiByb3dbZG9jdG9ySW5kZXhdIHx8ICdLaMO0bmcgY8OzJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogc3RhcnQ/LmRhdGVLZXkgfHwgJ0tow7RuZyB4w6FjIMSR4buLbmgnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQ/LnNlY29uZHMgfHwgMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBlbmQ/LnNlY29uZHMgfHwgMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVN0YXJ0OiBzdGFydD8uZGlzcGxheVRpbWUgfHwgJz8/JywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUVuZDogZW5kPy5kaXNwbGF5VGltZSB8fCAnPz8nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRvcjogcm93W29wZXJhdG9ySW5kZXhdIHx8ICdLaMO0bmcgY8OzJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlSW5mbzogUFJPQ0VEVVJFU1twcm9jZWR1cmVOYW1lXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBwYXJzZURhdGVUaW1lKHJvd1tzdGFydEluZGV4XSwgcm93TnVtYmVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IHBhcnNlRGF0ZVRpbWUocm93W2VuZEluZGV4XSwgcm93TnVtYmVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7DQogICANCiAgICBza2lwcGVkUm93cysrOw0KICAgIHJldHVybjsNCn0NCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0LmRhdGVLZXkgIT09IGVuZC5kYXRlS2V5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nRXJyb3IoJ1Ro4bunIHRodeG6rXQgYuG6r3QgxJHhuqd1IHbDoCBr4bq/dCB0aMO6YyBraMOhYyBuZ8OgeScsIHJvd051bWJlciwgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydERhdGU6IHN0YXJ0LmRhdGVLZXksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZERhdGU6IGVuZC5kYXRlS2V5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRpZW50TmFtZTogbmFtZUluZGV4ICE9PSAtMSA/IHJvd1tuYW1lSW5kZXhdIHx8ICdLaMO0bmcgY8OzJyA6ICdLaMO0bmcgY8OzJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlOiBwcm9jZWR1cmVOYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZFJvd3MrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmQuc2Vjb25kcyA8PSBzdGFydC5zZWNvbmRzKSB7DQogICAgbG9nRXJyb3IoJ1Ro4budaSBnaWFuIGvhur90IHRow7pjIHBo4bqjaSBzYXUgdGjhu51pIGdpYW4gYuG6r3QgxJHhuqd1Jywgcm93TnVtYmVyLCB7DQogICAgICAgIHN0YXJ0VGltZTogc3RhcnQuZGlzcGxheVRpbWUsDQogICAgICAgIGVuZFRpbWU6IGVuZC5kaXNwbGF5VGltZSwNCiAgICAgICAgc3RhcnRWYWx1ZTogcm93W3N0YXJ0SW5kZXhdLA0KICAgICAgICBlbmRWYWx1ZTogcm93W2VuZEluZGV4XSwNCiAgICAgICAgcGF0aWVudE5hbWU6IG5hbWVJbmRleCAhPT0gLTEgPyByb3dbbmFtZUluZGV4XSB8fCAnS2jDtG5nIGPDsycgOiAnS2jDtG5nIGPDsycsDQogICAgICAgIHByb2NlZHVyZTogcHJvY2VkdXJlTmFtZSwNCiAgICAgICAgbmdheVRodWNIaWVuOiBkYXRlSW5kZXggIT09IC0xID8gcm93W2RhdGVJbmRleF0gOiAnS2jDtG5nIHjDoWMgxJHhu4tuaCcNCiAgICB9KTsNCiAgICBza2lwcGVkUm93cysrOw0KICAgIHJldHVybjsNCn0NCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWREdXJhdGlvbiA9IFBST0NFRFVSRVNbcHJvY2VkdXJlTmFtZV0/LmR1cmF0aW9uIHx8IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWxEdXJhdGlvbk1pbnV0ZXMgPSAoZW5kLnNlY29uZHMgLSBzdGFydC5zZWNvbmRzKSAvIDYwOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQppZiAoZXhwZWN0ZWREdXJhdGlvbiA+IDAgJiYgTWF0aC5hYnMoYWN0dWFsRHVyYXRpb25NaW51dGVzIC0gZXhwZWN0ZWREdXJhdGlvbikgPiAxKSB7DQogICAgbG9nRXJyb3IoYGAsIHJvd051bWJlciwgew0KICAgICAgICBwcm9jZWR1cmU6IHByb2NlZHVyZU5hbWUsDQogICAgICAgIGV4cGVjdGVkOiBleHBlY3RlZER1cmF0aW9uLA0KICAgICAgICBhY3R1YWw6IGFjdHVhbER1cmF0aW9uTWludXRlcywNCiAgICAgICAgcGF0aWVudE5hbWU6IG5hbWVJbmRleCAhPT0gLTEgPyByb3dbbmFtZUluZGV4XSB8fCAnS2jDtG5nIGPDsycgOiAnS2jDtG5nIGPDsycsDQogICAgICAgIG9wZXJhdG9yOiByb3dbb3BlcmF0b3JJbmRleF0gPyByb3dbb3BlcmF0b3JJbmRleF0ucmVwbGFjZSgvLC9nLCAnJykgOiAnS2jDtG5nIGPDsycsDQogICAgICAgIGRhdGU6IHN0YXJ0LmRhdGVLZXksDQogICAgICAgIG5nYXlUaHVjSGllbjogZGF0ZUluZGV4ICE9PSAtMSA/IHJvd1tkYXRlSW5kZXhdIDogJ0tow7RuZyB4w6FjIMSR4buLbmgnLA0KICAgICAgICBzdGFydFRpbWU6IHN0YXJ0LmRpc3BsYXlUaW1lLA0KICAgICAgICBlbmRUaW1lOiBlbmQuZGlzcGxheVRpbWUsDQogICAgICAgIGRvY3Rvcjogcm93W2RvY3RvckluZGV4XSB8fCAnS2jDtG5nIGPDsycgLy8gVGjDqm0gZMOybmcgbsOgeQ0KICAgIH0pOw0KfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9jZWR1cmVOYW1lID09PSAnU+G6r2MgdGh14buRYyB0aGFuZycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZXJiUHJvY2VkdXJlcy5wdXNoKHByb2NlZHVyZXNbcHJvY2VkdXJlcy5sZW5ndGggLSAxXSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwcm9jZWR1cmVzLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4OiByb3dOdW1iZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aWVudE5hbWU6IG5hbWVJbmRleCAhPT0gLTEgPyByb3dbbmFtZUluZGV4XSB8fCAnS2jDtG5nIGPDsycgOiAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aWVudElkOiBwYXRpZW50SWRJbmRleCAhPT0gLTEgPyByb3dbcGF0aWVudElkSW5kZXhdIHx8ICdLaMO0bmcgY8OzJyA6ICdLaMO0bmcgY8OzJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZWR1cmU6IHByb2NlZHVyZU5hbWUsDQoJCQkJCQkJZG9jdG9yOiByb3dbZG9jdG9ySW5kZXhdIHx8ICdLaMO0bmcgY8OzJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBzdGFydC5kYXRlS2V5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydC5zZWNvbmRzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogZW5kLnNlY29uZHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVN0YXJ0OiBzdGFydC5kaXNwbGF5VGltZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5RW5kOiBlbmQuZGlzcGxheVRpbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0b3I6IHJvd1tvcGVyYXRvckluZGV4XSB8fCAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmxpY3Q6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0UmVhc29uOiAnJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZWR1cmVJbmZvOiBQUk9DRURVUkVTW3Byb2NlZHVyZU5hbWVdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb246ICcnDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0Vycm9yKGBM4buXaSB44butIGzDvSBkw7JuZzogJHtlcnJvci5tZXNzYWdlfWAsIHJvd051bWJlciwgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGllbnROYW1lOiBuYW1lSW5kZXggIT09IC0xID8gcm93W25hbWVJbmRleF0gfHwgJ0tow7RuZyBjw7MnIDogJ0tow7RuZyBjw7MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2NlZHVyZTogcm93W3Byb2NlZHVyZUluZGV4XSB8fCAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JEZXRhaWxzOiBlcnJvci5zdGFjaw0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICBza2lwcGVkUm93cysrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKHByb2NlZHVyZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignS2jDtG5nIGPDsyB0aOG7pyB0aHXhuq10IG7DoG8gaOG7o3AgbOG7hyDEkeG7gyBraeG7g20gdHJhLiBWdWkgbMOybmcga2nhu4NtIHRyYSBs4bqhaSBk4buvIGxp4buHdS4nKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY2hlY2tDb25mbGljdHMocHJvY2VkdXJlcyk7DQogICAgICAgICAgICAgICAgZ2VuZXJhdGVUaW1lU3VnZ2VzdGlvbnMocHJvY2VkdXJlcyk7DQogICAgICAgICAgICAgICAgZGlzcGxheVJlc3VsdHMocHJvY2VkdXJlcywgc2tpcHBlZFJvd3MpOw0KICAgICAgICAgICAgICAgIHdpbmRvdy5hbGxIZXJiUHJvY2VkdXJlcyA9IGhlcmJQcm9jZWR1cmVzOw0KCQkJCS8vIC0tLSBD4bqtcCBuaOG6rXQgc+G7kSBjYSBraMOhYyDEkWEgc+G7kSB0csOqbiBuw7p0IC0tLQ0Kc2V0VGltZW91dCgoKSA9PiB7DQogIGlmICh0eXBlb2YgdXBkYXRlSGVyYkJ1dHRvbldpdGhPdXRsaWVyQ291bnQgPT09ICdmdW5jdGlvbicpIHsNCiAgICB1cGRhdGVIZXJiQnV0dG9uV2l0aE91dGxpZXJDb3VudCgpOw0KICB9DQp9LCAxMDApOw0KDQogICAgICAgICAgICAgICAgZGlzcGxheUVycm9ycygpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgICBsb2dFcnJvcihlcnJvci5tZXNzYWdlLCBudWxsLCBlcnJvci5zdGFjayk7DQogICAgICAgICAgICAgICAgZGlzcGxheUVycm9ycygpOw0KICAgICAgICAgICAgICAgIGFsZXJ0KCdDw7MgbOG7l2kgeOG6o3kgcmEga2hpIHjhu60gbMO9IGThu68gbGnhu4d1OiAnICsgZXJyb3IubWVzc2FnZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQpsZXQgY29uZmxpY3RSdWxlc1RleHQgPSAnJzsNCg0KYXN5bmMgZnVuY3Rpb24gbG9hZENvbmZsaWN0UnVsZXMoKSB7DQogICAgdHJ5IHsNCiAgICAgICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9jaGF1aHV5bmgwMTA0L2NoYXVodXluaDAxMDQudHh0L3JlZnMvaGVhZHMvbWFpbi9jaGF1X3hsdGh1dGh1YXQudHh0P3RzPScgKyBEYXRlLm5vdygpOw0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpOw0KICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKCdLaMO0bmcgdOG6o2kgxJHGsOG7o2MgY2hhdV94bHRodXRodWF0LnR4dCcpOw0KICAgICAgICBjb25mbGljdFJ1bGVzVGV4dCA9IChhd2FpdCByZXMudGV4dCgpKS50cmltKCk7DQogICAgfSBjYXRjaCAoZSkgew0KICAgICAgICBjb25zb2xlLmVycm9yKCdM4buXaSB04bqjaSBjaGF1X3hsdGh1dGh1YXQudHh0OicsIGUpOw0KICAgICAgICBjb25mbGljdFJ1bGVzVGV4dCA9ICcnOyAvLyBmYWxsYmFjazogcuG7l25nIC0+IGNvaSBuaMawIGtow7RuZyBjw7Mgbmdv4bqhaSBs4buHDQogICAgfQ0KfQ0KDQoNCg0KDQogICAgICAgIGZ1bmN0aW9uIGNoZWNrQ29uZmxpY3RzKHByb2NlZHVyZXMpIHsNCiAgICAgICAgICAgIGNvbnN0IGlnbm9yZUFkamFjZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lnbm9yZUFkamFjZW50Q2hlY2tib3gnKS5jaGVja2VkOw0KICAgICAgICAgICAgY29uc3QgZ3JvdXBzID0ge307DQogICAgICAgICAgICANCiAgICAgICAgICAgIHByb2NlZHVyZXMuZm9yRWFjaChwcm9jID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBgJHtwcm9jLm9wZXJhdG9yfV8ke3Byb2MuZGF0ZX1gOw0KICAgICAgICAgICAgICAgIGlmICghZ3JvdXBzW2tleV0pIHsNCiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzW2tleV0gPSBbXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZ3JvdXBzW2tleV0ucHVzaChwcm9jKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBPYmplY3QudmFsdWVzKGdyb3VwcykuZm9yRWFjaChncm91cCA9PiB7DQogICAgICAgICAgICAgICAgZ3JvdXAuc29ydCgoYSwgYikgPT4gYS5zdGFydCAtIGIuc3RhcnQpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgZ3JvdXAubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldiA9IGdyb3VwW2kgLSAxXTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IGdyb3VwW2ldOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2RW5kV2l0aEJ1ZmZlciA9IHByZXYuZW5kICsgKHByZXYucHJvY2VkdXJlSW5mbz8uYnVmZmVyIHx8IDApICogNjA7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0FkamFjZW50ID0gaWdub3JlQWRqYWNlbnQgJiYgY3VycmVudC5zdGFydCA9PT0gcHJldi5lbmQ7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5zdGFydCA8IHByZXZFbmRXaXRoQnVmZmVyICYmICFpc0FkamFjZW50KSB7DQogICAgICAgICAgICAgICAgIA0KDQpsZXQgaXNDb25mbGljdCA9IHRydWU7DQogICAgdHJ5IHsNCiAgICAgICAgaWYgKGNvbmZsaWN0UnVsZXNUZXh0ICYmIGNvbmZsaWN0UnVsZXNUZXh0LnRyaW0oKSkgew0KICAgICAgICAgICAgY29uc3QgY29uZmxpY3RDb25kaXRpb24gPSBuZXcgRnVuY3Rpb24oJ3ByZXYnLCdjdXJyZW50JywncmV0dXJuICcgKyBjb25mbGljdFJ1bGVzVGV4dC50cmltKCkpOw0KICAgICAgICAgICAgLy8gY29uZmxpY3RDb25kaXRpb24oKSBUUuG6oiBW4buAIHRydWUgbuG6v3UgKsSRxrDhu6NjIG1p4buFbiB4dW5nIMSR4buZdCoNCiAgICAgICAgICAgIGNvbnN0IGFsbG93ZWQgPSBjb25mbGljdENvbmRpdGlvbihwcmV2LCBjdXJyZW50KTsNCiAgICAgICAgICAgIGlzQ29uZmxpY3QgPSAhYWxsb3dlZDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGlzQ29uZmxpY3QgPSB0cnVlOyAvLyBraMO0bmcgY8OzIHJ1bGUgLT4gY+G7qSBiw6FvIHh1bmcgxJHhu5l0DQogICAgICAgIH0NCiAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcignTOG7l2kga2hpIMSRw6FuaCBnacOhIHh1bmcgxJHhu5l0IHRo4budaSBnaWFuOicsIGVycik7DQogICAgICAgIGlzQ29uZmxpY3QgPSB0cnVlOw0KICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ29uZmxpY3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LmNvbmZsaWN0ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LmNvbmZsaWN0UmVhc29uID0gYCR7cHJldi5wcm9jZWR1cmV9PGJyPuKAoiBC4buHbmggbmjDom46ICR7cHJldi5wYXRpZW50TmFtZX08YnI+4oCiIE5nw6B5OiAke3ByZXYuZGF0ZX08YnI+4oCiIFRo4budaSBnaWFuOiAke3ByZXYuZGlzcGxheVN0YXJ0fS0ke3ByZXYuZGlzcGxheUVuZH1gOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5jb25mbGljdCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2LmNvbmZsaWN0UmVhc29uLmluY2x1ZGVzKGN1cnJlbnQucHJvY2VkdXJlKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmNvbmZsaWN0UmVhc29uICs9IChwcmV2LmNvbmZsaWN0UmVhc29uID8gJzxicj48YnI+JyA6ICcnKSArIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCAke2N1cnJlbnQucHJvY2VkdXJlfTxicj7igKIgQuG7h25oIG5ow6JuOiAke2N1cnJlbnQucGF0aWVudE5hbWV9PGJyPuKAoiBOZ8OgeTogJHtjdXJyZW50LmRhdGV9PGJyPuKAoiBUaOG7nWkgZ2lhbjogJHtjdXJyZW50LmRpc3BsYXlTdGFydH0tJHtjdXJyZW50LmRpc3BsYXlFbmR9YDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQpmdW5jdGlvbiBnZW5lcmF0ZVRpbWVTdWdnZXN0aW9ucyhwcm9jZWR1cmVzKSB7DQogICAgY29uc3QgdGltZU9wdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9InRpbWVPcHRpb24iXTpjaGVja2VkJykudmFsdWU7DQogICAgY29uc3Qgc3RhcnRIb3VyID0gdGltZU9wdGlvbiA9PT0gJzc6MzAnID8gNy41IDogNzsNCiAgICBjb25zdCBpZ25vcmVBZGphY2VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZ25vcmVBZGphY2VudENoZWNrYm94JykuY2hlY2tlZDsNCiAgICBjb25zdCBidWZmZXJNaW51dGVzID0gaWdub3JlQWRqYWNlbnQgPyAwIDogMTsNCiAgICBjb25zdCBzaG93TW9yZVN1Z2dlc3Rpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3dNb3JlU3VnZ2VzdGlvbnNDaGVja2JveCcpLmNoZWNrZWQ7DQogICAgDQogICAgLy8gU+G7kSBraHVuZyBnaeG7nSB04buRaSDEkWEgbeG7l2kgYnXhu5VpIChu4bq/dSBjaOG7jW4gNiBraHVuZyB0aMOsIDMgc8OhbmcgKyAzIGNoaeG7gXUpDQogICAgY29uc3QgbWF4TW9ybmluZyA9IHNob3dNb3JlU3VnZ2VzdGlvbnMgPyAzIDogMjsNCiAgICBjb25zdCBtYXhBZnRlcm5vb24gPSBzaG93TW9yZVN1Z2dlc3Rpb25zID8gMyA6IDE7DQoNCiAgICBwcm9jZWR1cmVzLmZvckVhY2gocHJvYyA9PiB7DQogICAgICAgIGlmICghcHJvYy5jb25mbGljdCkgcmV0dXJuOw0KDQogICAgICAgIGNvbnN0IHNhbWVEYXlQcm9jZWR1cmVzID0gcHJvY2VkdXJlcy5maWx0ZXIocCA9PiANCiAgICAgICAgICAgIHAuZGF0ZSA9PT0gcHJvYy5kYXRlICYmIA0KICAgICAgICAgICAgcC5vcGVyYXRvciA9PT0gcHJvYy5vcGVyYXRvciAmJg0KICAgICAgICAgICAgcC5yb3dJbmRleCAhPT0gcHJvYy5yb3dJbmRleA0KICAgICAgICApOw0KDQogICAgICAgIGNvbnN0IGR1cmF0aW9uU2Vjb25kcyA9IHByb2MuZW5kIC0gcHJvYy5zdGFydCArIChidWZmZXJNaW51dGVzICogNjApOw0KICAgICAgICANCiAgICAgICAgLy8gVMOsbSBraHVuZyBnaeG7nSBideG7lWkgc8OhbmcNCiAgICAgICAgY29uc3QgbW9ybmluZ1Nsb3RzID0gZmluZEF2YWlsYWJsZVNsb3RzKA0KICAgICAgICAgICAgc3RhcnRIb3VyICogMzYwMCwgDQogICAgICAgICAgICAxMS41ICogMzYwMCwgDQogICAgICAgICAgICBkdXJhdGlvblNlY29uZHMsIA0KICAgICAgICAgICAgc2FtZURheVByb2NlZHVyZXMsIA0KICAgICAgICAgICAgbWF4TW9ybmluZw0KICAgICAgICApOw0KICAgICAgICANCiAgICAgICAgLy8gVMOsbSBraHVuZyBnaeG7nSBideG7lWkgY2hp4buBdQ0KICAgICAgICBjb25zdCBhZnRlcm5vb25TbG90cyA9IGZpbmRBdmFpbGFibGVTbG90cygNCiAgICAgICAgICAgIDEzLjUgKiAzNjAwLCANCiAgICAgICAgICAgIDE3ICogMzYwMCwgDQogICAgICAgICAgICBkdXJhdGlvblNlY29uZHMsIA0KICAgICAgICAgICAgc2FtZURheVByb2NlZHVyZXMsIA0KICAgICAgICAgICAgbWF4QWZ0ZXJub29uDQogICAgICAgICk7DQoNCiAgICAgICAgLy8gRm9ybWF0IGvhur90IHF14bqjDQogICAgICAgIGxldCBzdWdnZXN0aW9ucyA9IFtdOw0KICAgICAgICBpZiAobW9ybmluZ1Nsb3RzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJzxzdHJvbmc+U8Ohbmc6PC9zdHJvbmc+PGJyPicgKyANCiAgICAgICAgICAgICAgICBtb3JuaW5nU2xvdHMubWFwKHNsb3QgPT4gYCR7c2xvdC5zdGFydH0gLSAke3Nsb3QuZW5kfWApLmpvaW4oJzxicj4nKSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGFmdGVybm9vblNsb3RzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJzxzdHJvbmc+Q2hp4buBdTo8L3N0cm9uZz48YnI+JyArIA0KICAgICAgICAgICAgICAgIGFmdGVybm9vblNsb3RzLm1hcChzbG90ID0+IGAke3Nsb3Quc3RhcnR9IC0gJHtzbG90LmVuZH1gKS5qb2luKCc8YnI+JykpOw0KICAgICAgICB9DQoNCiAgICAgICAgDQppZiAobW9ybmluZ1Nsb3RzLmxlbmd0aCArIGFmdGVybm9vblNsb3RzLmxlbmd0aCA+IDApIHsNCiAgICBjb25zdCBmaXJzdFNsb3QgPSBtb3JuaW5nU2xvdHNbMF0gfHwgYWZ0ZXJub29uU2xvdHNbMF07DQogICAgY29uc3Qgc21hcnRIaW50ID0gYDxicj48ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjZweDtjb2xvcjojMDA3OTZiO2ZvbnQtd2VpZ2h0OjYwMCI+DQogICAg8J+RiSBH4bujaSDDvTogROG7nWkgdOG7qyA8dT4ke3Byb2MuZGlzcGxheVN0YXJ0fTwvdT4g4oaSIDx1PiR7Zmlyc3RTbG90LnN0YXJ0fTwvdT4NCiAgICA8L2Rpdj5gOw0KDQogICAgcHJvYy5zdWdnZXN0aW9uID0gc3VnZ2VzdGlvbnMuam9pbignPGJyPicpICsgc21hcnRIaW50Ow0KfSBlbHNlIHsNCiAgICBwcm9jLnN1Z2dlc3Rpb24gPSAnPHNwYW4gY2xhc3M9Im5vLXN1Z2dlc3Rpb24iPktow7RuZyBjw7Mga2h1bmcgZ2nhu50gdHLhu5FuZzwvc3Bhbj4nOw0KfQ0KDQogICAgfSk7DQp9DQovLyBIw6BtIGtp4buDbSB0cmEgeHVuZyDEkeG7mXQgdGjhu51pIGdpYW4NCmZ1bmN0aW9uIGhhc1RpbWVDb25mbGljdChzdGFydFRpbWUsIGR1cmF0aW9uLCBwcm9jZWR1cmVzKSB7DQogICAgY29uc3QgZW5kVGltZSA9IHN0YXJ0VGltZSArIGR1cmF0aW9uOw0KICAgIA0KICAgIGZvciAoY29uc3QgcHJvYyBvZiBwcm9jZWR1cmVzKSB7DQogICAgICAgIGNvbnN0IHByb2NTdGFydCA9IHByb2Muc3RhcnQ7DQogICAgICAgIGNvbnN0IHByb2NFbmQgPSBwcm9jLmVuZCArIChwcm9jLnByb2NlZHVyZUluZm8/LmJ1ZmZlciB8fCAwKSAqIDYwOw0KICAgICAgICANCiAgICAgICAgaWYgKChzdGFydFRpbWUgPj0gcHJvY1N0YXJ0ICYmIHN0YXJ0VGltZSA8IHByb2NFbmQpIHx8IA0KICAgICAgICAgICAgKGVuZFRpbWUgPiBwcm9jU3RhcnQgJiYgZW5kVGltZSA8PSBwcm9jRW5kKSB8fA0KICAgICAgICAgICAgKHN0YXJ0VGltZSA8PSBwcm9jU3RhcnQgJiYgZW5kVGltZSA+PSBwcm9jRW5kKSkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgcmV0dXJuIGZhbHNlOw0KfQ0KLy8gSMOgbSB0w6xtIGtodW5nIGdp4budIHRy4buRbmcNCmZ1bmN0aW9uIGZpbmRBdmFpbGFibGVTbG90cyhzdGFydFRpbWUsIGVuZFRpbWUsIGR1cmF0aW9uLCBwcm9jZWR1cmVzLCBtYXhTbG90cykgew0KICAgIGNvbnN0IHNsb3RzID0gW107DQogICAgbGV0IGN1cnJlbnRUaW1lID0gc3RhcnRUaW1lOw0KICAgIGNvbnN0IGlnbm9yZUFkamFjZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lnbm9yZUFkamFjZW50Q2hlY2tib3gnKS5jaGVja2VkOw0KICAgIGNvbnN0IGJ1ZmZlck1pbnV0ZXMgPSBpZ25vcmVBZGphY2VudCA/IDAgOiAxOw0KICAgIA0KICAgIHdoaWxlIChjdXJyZW50VGltZSArIGR1cmF0aW9uIDw9IGVuZFRpbWUgJiYgc2xvdHMubGVuZ3RoIDwgbWF4U2xvdHMpIHsNCiAgICAgICAgaWYgKCFoYXNUaW1lQ29uZmxpY3QoY3VycmVudFRpbWUsIGR1cmF0aW9uLCBwcm9jZWR1cmVzKSkgew0KICAgICAgICAgICAgc2xvdHMucHVzaCh7DQogICAgICAgICAgICAgICAgc3RhcnQ6IHNlY29uZHNUb1RpbWVTdHIoY3VycmVudFRpbWUpLA0KICAgICAgICAgICAgICAgIGVuZDogc2Vjb25kc1RvVGltZVN0cihjdXJyZW50VGltZSArIChkdXJhdGlvbiAtIChidWZmZXJNaW51dGVzICogNjApKSkgLy8gVHLhu6sgYnVmZmVyIMSR4buDIGhp4buDbiB0aOG7iw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgICAgY3VycmVudFRpbWUgKz0gMTUgKiA2MDsgLy8gS2nhu4NtIHRyYSBt4buXaSAxNSBwaMO6dA0KICAgIH0NCiAgICANCiAgICByZXR1cm4gc2xvdHM7DQp9DQoNCiAgICAgICAgZnVuY3Rpb24gc2Vjb25kc1RvVGltZVN0cihzZWNvbmRzKSB7DQogICAgICAgICAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDM2MDApOw0KICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHNlY29uZHMgJSAzNjAwKSAvIDYwKTsNCiAgICAgICAgICAgIHJldHVybiBgJHtob3Vycy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7bWludXRlcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDsNCiAgICAgICAgfQ0KDQogICAgICAgZnVuY3Rpb24gZGlzcGxheVJlc3VsdHMocHJvY2VkdXJlcywgc2tpcHBlZFJvd3MgPSAwKSB7DQogICAgYWxsUHJvY2VkdXJlcyA9IHByb2NlZHVyZXM7DQogICAgDQogICAgY29uc3Qgb3BlcmF0b3JzID0gWy4uLm5ldyBTZXQocHJvY2VkdXJlcy5tYXAocCA9PiBwLm9wZXJhdG9yKSldOw0KICAgIGNvbnN0IG9wZXJhdG9yU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZXJhdG9yU2VsZWN0Jyk7DQogICAgY29uc3Qgb3BlcmF0b3JTZWxlY3RFcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVyYXRvclNlbGVjdEVycm9yJyk7DQogICAgDQogICAgb3BlcmF0b3JTZWxlY3QuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9ImFsbCI+VOG6pXQgY+G6ozwvb3B0aW9uPicgKyANCiAgICAgICAgb3BlcmF0b3JzLm1hcChvcCA9PiBgPG9wdGlvbiB2YWx1ZT0iJHtvcH0iPiR7b3AucmVwbGFjZSgvLC9nLCAnJyl9PC9vcHRpb24+YCkuam9pbignJyk7DQogICAgDQogICAgb3BlcmF0b3JTZWxlY3RFcnJvci5pbm5lckhUTUwgPSBvcGVyYXRvclNlbGVjdC5pbm5lckhUTUw7IC8vIMSQ4buTbmcgYuG7mSBu4buZaSBkdW5nDQogICAgDQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZXJhdG9yRmlsdGVyJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZXJhdG9yRmlsdGVyRXJyb3InKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgY29uZmxpY3RQcm9jZWR1cmVzID0gcHJvY2VkdXJlcy5maWx0ZXIocCA9PiBwLmNvbmZsaWN0KTsNCiAgICAgICAgICAgIGNvbnN0IGNvbmZsaWN0Q291bnQgPSBjb25mbGljdFByb2NlZHVyZXMubGVuZ3RoOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VtbWFyeScpLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICA8cD5U4buVbmcgc+G7kSBkw7JuZyDEkcOjIHjhu60gbMO9OiA8c3Ryb25nPiR7cHJvY2VkdXJlcy5sZW5ndGggKyBza2lwcGVkUm93c308L3N0cm9uZz4gDQogICAgICAgICAgICAgICAgICB8fCBT4buRIGTDsm5nIGPDsyB4dW5nIMSR4buZdDogPHN0cm9uZz4ke2NvbmZsaWN0Q291bnR9PC9zdHJvbmc+PC9wPiA8YnIvPg0KICAgICAgICAgICAgICAgDQogICAgICAgICAgICBgOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBmaWx0ZXJCeU9wZXJhdG9yKCk7DQogICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdFNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICANCiAgICAvLyBO4bq/dSBraMO0bmcgY8OzIGzhu5dpLCBjdeG7mW4geHXhu5FuZyBwaOG6p24ga+G6v3QgcXXhuqMNCiAgICBpZiAoZXJyb3JMb2cubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgcmVzdWx0U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRTZWN0aW9uJyk7DQogICAgICAgICAgICBpZiAocmVzdWx0U2VjdGlvbikgew0KICAgICAgICAgICAgICAgIHNtb290aFNjcm9sbFRvKHJlc3VsdFNlY3Rpb24sIC00MCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sIDMwMCk7DQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBmaWx0ZXJCeU9wZXJhdG9yKCkgew0KICAgIGNvbnN0IG9wZXJhdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZXJhdG9yU2VsZWN0JykudmFsdWU7DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZXJhdG9yU2VsZWN0RXJyb3InKS52YWx1ZSA9IG9wZXJhdG9yOyAvLyDEkOG7k25nIGLhu5kgZ2nDoSB0cuG7iyBkcm9wZG93biBs4buXaQ0KIGNvbnN0IHNob3dEb2N0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hvd0RvY3RvckNoZWNrYm94JykuY2hlY2tlZDsNCiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3ctZG9jdG9yJywgc2hvd0RvY3Rvcik7DQogICAgLy8gPT09PT0gMS4gTOG7jEMgVsOAIEhJ4buCTiBUSOG7iiBC4bqiTkcgS+G6vlQgUVXhuqIgS0nhu4JNIFRSQSBYVU5HIMSQ4buYVCA9PT09PQ0KICAgIGNvbnN0IGZpbHRlcmVkUHJvY2VkdXJlcyA9IG9wZXJhdG9yID09PSAnYWxsJyANCiAgICAgICAgPyBhbGxQcm9jZWR1cmVzLmZpbHRlcihwID0+IHAuY29uZmxpY3QpIA0KICAgICAgICA6IGFsbFByb2NlZHVyZXMuZmlsdGVyKHAgPT4gcC5vcGVyYXRvci5yZXBsYWNlKC8sL2csICcnKSA9PT0gb3BlcmF0b3IucmVwbGFjZSgvLC9nLCAnJykgJiYgcC5jb25mbGljdCk7DQoNCiAgICBjb25zdCByZXN1bHRCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdEJvZHknKTsNCiAgICByZXN1bHRCb2R5LmlubmVySFRNTCA9ICcnOw0KDQogICAgLy8gTmjDs20gY8OhYyB0aOG7pyB0aHXhuq10IHh1bmcgxJHhu5l0IHbhu5tpIG5oYXUNCiAgICBjb25zdCBjb25mbGljdEdyb3VwcyA9IFtdOw0KICAgIGNvbnN0IHByb2Nlc3NlZFJvd3MgPSBuZXcgU2V0KCk7DQoNCiAgICBmaWx0ZXJlZFByb2NlZHVyZXMuZm9yRWFjaChwcm9jID0+IHsNCiAgICAgICAgaWYgKCFwcm9jZXNzZWRSb3dzLmhhcyhwcm9jLnJvd0luZGV4KSkgew0KICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBbcHJvY107DQogICAgICAgICAgICBwcm9jZXNzZWRSb3dzLmFkZChwcm9jLnJvd0luZGV4KTsNCg0KICAgICAgICAgICAgLy8gVMOsbSB0aOG7pyB0aHXhuq10IGxpw6puIHF1YW4gdHJvbmcgeHVuZyDEkeG7mXQNCiAgICAgICAgICAgIGlmIChwcm9jLmNvbmZsaWN0UmVhc29uKSB7DQogICAgICAgICAgICAgICAgY29uc3QgY29uZmxpY3RNYXRjaGVzID0gcHJvYy5jb25mbGljdFJlYXNvbi5tYXRjaCgvQuG7h25oIG5ow6JuOiAoLio/KTxicj7igKIgTmfDoHk6ICguKj8pPGJyPuKAoiBUaOG7nWkgZ2lhbjogKC4qPyktL2cpOw0KICAgICAgICAgICAgICAgIGlmIChjb25mbGljdE1hdGNoZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uZmxpY3RNYXRjaGVzLmZvckVhY2gobWF0Y2ggPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF0aWVudE5hbWUgPSBtYXRjaC5tYXRjaCgvQuG7h25oIG5ow6JuOiAoLio/KTxicj4vKVsxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBtYXRjaC5tYXRjaCgvTmfDoHk6ICguKj8pPGJyPi8pWzFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IG1hdGNoLm1hdGNoKC9UaOG7nWkgZ2lhbjogKC4qPyktLylbMV07DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZsaWN0UHJvYyA9IGZpbHRlcmVkUHJvY2VkdXJlcy5maW5kKHAgPT4gDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wYXRpZW50TmFtZSA9PT0gcGF0aWVudE5hbWUgJiYgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5kYXRlID09PSBkYXRlICYmIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuZGlzcGxheVN0YXJ0ID09PSB0aW1lICYmDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIXByb2Nlc3NlZFJvd3MuaGFzKHAucm93SW5kZXgpDQogICAgICAgICAgICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmxpY3RQcm9jKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXAucHVzaChjb25mbGljdFByb2MpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZFJvd3MuYWRkKGNvbmZsaWN0UHJvYy5yb3dJbmRleCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbmZsaWN0R3JvdXBzLnB1c2goZ3JvdXApOw0KICAgICAgICB9DQogICAgfSk7DQoNCiAgICAvLyBIaeG7g24gdGjhu4sga+G6v3QgcXXhuqMNCiAgICBjb25mbGljdEdyb3Vwcy5mb3JFYWNoKGdyb3VwID0+IHsNCiAgICAgICAgZ3JvdXAuZm9yRWFjaChwcm9jID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7DQogICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCJoZXJiLXJvdyIpOw0KICAgICAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ2NvbmZsaWN0LXJvdycpOw0KICAgICAgICAgICAgcm93LmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICA8dGQ+JHtwcm9jLnBhdGllbnROYW1lfSA8YnIvPiAke3Byb2MucGF0aWVudElkfTwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPiR7cHJvYy5wcm9jZWR1cmV9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+PGNlbnRlcj4ke3Byb2MuZGF0ZX08YnIvPiR7cHJvYy5kaXNwbGF5U3RhcnR9IC0gJHtwcm9jLmRpc3BsYXlFbmR9PC9jZW50ZXI+PC90ZD4NCgkJCQkgIDx0ZCBjbGFzcz0iZG9jdG9yLWNvbHVtbiI+JHtwcm9jLmRvY3Rvcn08L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4ke3Byb2Mub3BlcmF0b3IucmVwbGFjZSgvLC9nLCAnJyl9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InRpbWUtc3VnZ2VzdGlvbiI+JHtwcm9jLnN1Z2dlc3Rpb24gfHwgJ0tow7RuZyBjw7MgeHVuZyDEkeG7mXQnfTwvdGQ+DQogICAgICAgICAgICBgOw0KICAgICAgICAgICAgcmVzdWx0Qm9keS5hcHBlbmRDaGlsZChyb3cpOw0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBUaMOqbSBkw7JuZyBwaMOibiBjw6FjaA0KICAgICAgICBpZiAoZ3JvdXAubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgY29uc3Qgc2VwYXJhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsNCiAgICAgICAgICAgIHNlcGFyYXRvci5pbm5lckhUTUwgPSAnPHRkIGNvbHNwYW49IjgiIGNsYXNzPSJncm91cC1zZXBhcmF0b3IiPjwvdGQ+JzsNCiAgICAgICAgICAgIHJlc3VsdEJvZHkuYXBwZW5kQ2hpbGQoc2VwYXJhdG9yKTsNCiAgICAgICAgfQ0KICAgIH0pOw0KDQogICAgLy8gPT09PT0gMi4gTOG7jEMgVsOAIEhJ4buCTiBUSOG7iiBC4bqiTkcgTOG7lkkgPT09PT0NCiAgICBjb25zdCBmaWx0ZXJlZEVycm9ycyA9IG9wZXJhdG9yID09PSAnYWxsJyANCiAgICAgICAgPyBlcnJvckxvZyANCiAgICAgICAgOiBlcnJvckxvZy5maWx0ZXIoZXJyb3IgPT4gDQogICAgICAgICAgICBlcnJvci5kZXRhaWxzICYmIA0KICAgICAgICAgICAgZXJyb3IuZGV0YWlscy5vcGVyYXRvciAmJiANCiAgICAgICAgICAgIGVycm9yLmRldGFpbHMub3BlcmF0b3IucmVwbGFjZSgvLC9nLCAnJykgPT09IG9wZXJhdG9yLnJlcGxhY2UoLywvZywgJycpDQogICAgICAgICk7DQoNCiAgICAvLyBIaeG7g24gdGjhu4sgbOG7l2kgxJHDoyBs4buNYw0KICAgIGNvbnN0IGVycm9yTG9nRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yTG9nJyk7DQogICAgaWYgKGZpbHRlcmVkRXJyb3JzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICBlcnJvckxvZ0Rpdi5pbm5lckhUTUwgPSAnPHA+S2jDtG5nIGPDsyBs4buXaSBuw6BvIMSRxrDhu6NjIGdoaSBuaOG6rW48L3A+JzsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGxldCBodG1sID0gYA0KICAgIDx0YWJsZSBjbGFzcz0iZXJyb3ItdGFibGUiPg0KICAgICAgICA8dGhlYWQ+DQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFzIGZhLXVzZXIgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IFTDqm4gQk48L3RoPg0KICAgICAgICAgICAgPHRoPjxpIGNsYXNzPSJmYXMgZmEtcHJvY2VkdXJlcyBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gVGjhu6cgdGh14bqtdDwvdGg+DQogICAgICAgICAgICA8dGggY2xhc3M9ImRvY3Rvci1jb2x1bW4iPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1tZCBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gQsOhYyBz4bu5IGNo4buJIMSR4buLbmg8L3RoPg0KICAgICAgICAgICAgPHRoPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1udXJzZSBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gTmfGsOG7nWkgdGjhu7FjIGhp4buHbjwvdGg+DQogICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhciBmYS1jbG9jayBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gVGjhu51pIGdpYW48L3RoPg0KICAgICAgICAgICAgPHRoPjxpIGNsYXNzPSJmYXMgZmEtZXhjbGFtYXRpb24tdHJpYW5nbGUgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IEzhu5dpPC90aD4NCiAgICAgICAgICAgIDwvdHI+DQogICAgICAgIDwvdGhlYWQ+DQogICAgICAgIDx0Ym9keT5gOw0KDQogICAgZmlsdGVyZWRFcnJvcnMuZm9yRWFjaChlcnJvciA9PiB7DQogICAgICAgIGlmIChlcnJvci5kZXRhaWxzKSB7DQogICAgICAgICAgICBodG1sICs9IGANCiAgICAgICAgICAgIDx0ciBjbGFzcz0iZXJyb3Itcm93Ij4NCiAgICAgICAgICAgICAgICA8dGQ+JHtlcnJvci5kZXRhaWxzLnBhdGllbnROYW1lIHx8ICdLaMO0bmcgY8OzJ308L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4ke2Vycm9yLmRldGFpbHMucHJvY2VkdXJlIHx8ICdLaMO0bmcgY8OzJ308L3RkPg0KCQkJCTx0ZCBjbGFzcz0iZG9jdG9yLWNvbHVtbiI+JHtlcnJvci5kZXRhaWxzLmRvY3RvciB8fCAnS2jDtG5nIGPDsyd9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+JHtlcnJvci5kZXRhaWxzLm9wZXJhdG9yID8gZXJyb3IuZGV0YWlscy5vcGVyYXRvci5yZXBsYWNlKC8sL2csICcnKSA6ICdLaMO0bmcgY8OzJ308L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD48Y2VudGVyPiR7ZXJyb3IuZGV0YWlscy5uZ2F5VGh1Y0hpZW4gfHwgKGVycm9yLmRldGFpbHMuZGF0ZSB8fCAnS2jDtG5nIGPDsycpfSA8YnIvPiR7DQogICAgICAgICAgICAgICAgICAgIGVycm9yLmRldGFpbHMuc3RhcnRUaW1lID8gYCR7ZXJyb3IuZGV0YWlscy5zdGFydFRpbWV9IC0gJHtlcnJvci5kZXRhaWxzLmVuZFRpbWV9YCA6ICdLaMO0bmcgY8OzJw0KICAgICAgICAgICAgICAgIH08L2NlbnRlcj48L3RkPg0KICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iZXJyb3ItZGV0YWlsIj4NCiAgICAgICAgICAgICAgICAgICAgJHtlcnJvci5tZXNzYWdlfQ0KICAgICAgICAgICAgICAgICAgICAke2Vycm9yLmRldGFpbHMuZXhwZWN0ZWQgPyBgJHtlcnJvci5kZXRhaWxzLmFjdHVhbH0gcGjDunQgKFF1eSDEkeG7i25oOiAke2Vycm9yLmRldGFpbHMuZXhwZWN0ZWR9IHBow7p0KWAgOiAnJ30NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj5gOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaHRtbCArPSBgDQogICAgICAgICAgICA8dHIgY2xhc3M9ImVycm9yLXJvdyI+DQogICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjUiIGNsYXNzPSJlcnJvci1kZXRhaWwiPg0KICAgICAgICAgICAgICAgICAgICAke2Vycm9yLm1lc3NhZ2V9ICR7ZXJyb3Iucm93ID8gJyhEw7JuZyAnICsgZXJyb3Iucm93ICsgJyknIDogJyd9DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+YDsNCiAgICAgICAgfQ0KICAgIH0pOw0KDQogICAgaHRtbCArPSBgPC90Ym9keT48L3RhYmxlPmA7DQogICAgZXJyb3JMb2dEaXYuaW5uZXJIVE1MID0gaHRtbDsNCn0NCg0KZnVuY3Rpb24gZGlzcGxheUZpbHRlcmVkRXJyb3JzKGZpbHRlcmVkRXJyb3JzKSB7DQogICAgY29uc3QgZXJyb3JMb2dEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXJyb3JMb2cnKTsNCiAgICANCiAgICBpZiAoZmlsdGVyZWRFcnJvcnMubGVuZ3RoID09PSAwKSB7DQogICAgICAgIGVycm9yTG9nRGl2LmlubmVySFRNTCA9ICc8cD5LaMO0bmcgY8OzIGzhu5dpIG7DoG8gxJHGsOG7o2MgZ2hpIG5o4bqtbjwvcD4nOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIA0KICAgIGxldCBodG1sID0gYA0KICAgIDx0YWJsZSBjbGFzcz0iZXJyb3ItdGFibGUiPg0KICAgICAgICA8dGhlYWQ+DQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS11c2VyIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBUw6puIEJOPC90aD4NCiAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFzIGZhLXByb2NlZHVyZXMgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IFRo4bunIHRodeG6rXQ8L3RoPg0KICAgICAgICAgICAgPHRoIGNsYXNzPSJkb2N0b3ItY29sdW1uIj48aSBjbGFzcz0iZmFzIGZhLXVzZXItbWQgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IELDoWMgc+G7uSBjaOG7iSDEkeG7i25oPC90aD4NCiAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFzIGZhLXVzZXItbnVyc2UgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IE5nxrDhu51pIHRo4buxYyBoaeG7h248L3RoPg0KICAgICAgICAgICAgPHRoPjxpIGNsYXNzPSJmYXIgZmEtY2xvY2sgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IFRo4budaSBnaWFuPC90aD4NCiAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFzIGZhLWV4Y2xhbWF0aW9uLXRyaWFuZ2xlIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBM4buXaTwvdGg+DQogICAgICAgICAgICA8L3RyPg0KICAgICAgICA8L3RoZWFkPg0KICAgICAgICA8dGJvZHk+YDsNCiAgICANCiAgICBmaWx0ZXJlZEVycm9ycy5mb3JFYWNoKGVycm9yID0+IHsNCiAgICAgICAgaWYgKGVycm9yLmRldGFpbHMpIHsNCiAgICAgICAgICAgIGh0bWwgKz0gYA0KICAgICAgICAgICAgPHRyIGNsYXNzPSJlcnJvci1yb3ciPg0KICAgICAgICAgICAgICAgIDx0ZD4ke2Vycm9yLmRldGFpbHMucGF0aWVudE5hbWUgfHwgJ0tow7RuZyBjw7MnfTwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPiR7ZXJyb3IuZGV0YWlscy5wcm9jZWR1cmUgfHwgJ0tow7RuZyBjw7MnfTwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPiR7ZXJyb3IuZGV0YWlscy5vcGVyYXRvciA/IGVycm9yLmRldGFpbHMub3BlcmF0b3IucmVwbGFjZSgvLC9nLCAnJykgOiAnS2jDtG5nIGPDsyd9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+PGNlbnRlcj4ke2Vycm9yLmRldGFpbHMubmdheVRodWNIaWVuIHx8IChlcnJvci5kZXRhaWxzLmRhdGUgfHwgJ0tow7RuZyBjw7MnKX0gPGJyLz4ke2Vycm9yLmRldGFpbHMuc3RhcnRUaW1lID8gYCR7ZXJyb3IuZGV0YWlscy5zdGFydFRpbWV9IC0gJHtlcnJvci5kZXRhaWxzLmVuZFRpbWV9YCA6ICdLaMO0bmcgY8OzJ308L2NlbnRlcj48L3RkPg0KICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iZXJyb3ItZGV0YWlsIj4NCiAgICAgICAgICAgICAgICAgICAgJHtlcnJvci5tZXNzYWdlfQ0KICAgICAgICAgICAgICAgICAgICAke2Vycm9yLmRldGFpbHMuZXhwZWN0ZWQgPyBgJHtlcnJvci5kZXRhaWxzLmFjdHVhbH0gcGjDunQgICAoUXV5IMSR4buLbmg6ICR7ZXJyb3IuZGV0YWlscy5leHBlY3RlZH0gcGjDunQpYCA6ICcnfQ0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPmA7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBodG1sICs9IGANCiAgICAgICAgICAgIDx0ciBjbGFzcz0iZXJyb3Itcm93Ij4NCiAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iNiIgY2xhc3M9ImVycm9yLWRldGFpbCI+DQogICAgICAgICAgICAgICAgICAgICR7ZXJyb3IubWVzc2FnZX0gJHtlcnJvci5yb3cgPyAnKETDsm5nICcgKyBlcnJvci5yb3cgKyAnKScgOiAnJ30NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj5gOw0KICAgICAgICB9DQogICAgfSk7DQogICAgDQogICAgaHRtbCArPSBgPC90Ym9keT48L3RhYmxlPmA7DQogICAgZXJyb3JMb2dEaXYuaW5uZXJIVE1MID0gaHRtbDsNCn0NCg0KICAgICAgICBmdW5jdGlvbiBsb2dFcnJvcihtZXNzYWdlLCByb3cgPSBudWxsLCBkZXRhaWxzID0gbnVsbCkgew0KICAgICAgICAgICAgZXJyb3JMb2cucHVzaCh7DQogICAgICAgICAgICAgICAgbWVzc2FnZSwNCiAgICAgICAgICAgICAgICByb3csDQogICAgICAgICAgICAgICAgZGV0YWlscywNCiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCksDQogICAgICAgICAgICAgICAgdXNlcjogY3VycmVudFVzZXINCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCmZ1bmN0aW9uIGRpc3BsYXlFcnJvcnMoKSB7DQogICAgY29uc3QgZXJyb3JMb2dEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXJyb3JMb2cnKTsNCiAgICANCiAgICBpZiAoZXJyb3JMb2cubGVuZ3RoID09PSAwKSB7DQogICAgICAgIGVycm9yTG9nRGl2LmlubmVySFRNTCA9ICc8cD5LaMO0bmcgY8OzIGzhu5dpIG7DoG8gxJHGsOG7o2MgZ2hpIG5o4bqtbjwvcD4nOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXJyb3JTZWN0aW9uJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgDQogICAgICAgIC8vIE7hur91IGtow7RuZyBjw7MgbOG7l2ksIGN14buZbiB4deG7kW5nIHBo4bqnbiBL4bq/dCBRdeG6oyBLaeG7g20gVHJhDQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgcmVzdWx0U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRTZWN0aW9uJyk7DQogICAgICAgICAgICBpZiAocmVzdWx0U2VjdGlvbiAmJiByZXN1bHRTZWN0aW9uLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJykgew0KICAgICAgICAgICAgICAgIHNtb290aFNjcm9sbFRvKHJlc3VsdFNlY3Rpb24sIC00MCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sIDMwMCk7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgDQogICAgbGV0IGh0bWwgPSBgDQogICAgPHRhYmxlIGNsYXNzPSJlcnJvci10YWJsZSI+DQogICAgICAgIDx0aGVhZD4NCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS11c2VyIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBUw6puIEJOPC90aD4NCiAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFzIGZhLXByb2NlZHVyZXMgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IFRo4bunIHRodeG6rXQ8L3RoPg0KICAgICAgICAgICAgPHRoIGNsYXNzPSJkb2N0b3ItY29sdW1uIj48aSBjbGFzcz0iZmFzIGZhLXVzZXItbWQgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IELDoWMgc+G7uSBjaOG7iSDEkeG7i25oPC90aD4NCiAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFzIGZhLXVzZXItbnVyc2UgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IE5nxrDhu51pIHRo4buxYyBoaeG7h248L3RoPg0KICAgICAgICAgICAgPHRoPjxpIGNsYXNzPSJmYXIgZmEtY2xvY2sgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IFRo4budaSBnaWFuPC90aD4NCiAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFzIGZhLWV4Y2xhbWF0aW9uLXRyaWFuZ2xlIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBM4buXaTwvdGg+DQogICAgICAgICAgICA8L3RyPg0KICAgICAgICA8L3RoZWFkPg0KICAgICAgICA8dGJvZHk+YDsNCiAgICANCiAgICAvLyBIaeG7g24gdGjhu4sgdOG7q25nIGzhu5dpDQogICAgZXJyb3JMb2cuZm9yRWFjaChlcnJvciA9PiB7DQogICAgICAgIGlmIChlcnJvci5kZXRhaWxzKSB7DQogICAgICAgICAgICBodG1sICs9IGANCiAgICAgICAgICAgIDx0ciBjbGFzcz0iZXJyb3Itcm93Ij4NCiAgICAgICAgICAgICAgICA8dGQ+JHtlcnJvci5kZXRhaWxzLnBhdGllbnROYW1lIHx8ICdLaMO0bmcgY8OzJ308L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4ke2Vycm9yLmRldGFpbHMucHJvY2VkdXJlIHx8ICdLaMO0bmcgY8OzJ308L3RkPg0KICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iZG9jdG9yLWNvbHVtbiI+JHtlcnJvci5kZXRhaWxzLmRvY3RvciB8fCAnS2jDtG5nIGPDsyd9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+JHtlcnJvci5kZXRhaWxzLm9wZXJhdG9yID8gZXJyb3IuZGV0YWlscy5vcGVyYXRvci5yZXBsYWNlKC8sL2csICcnKSA6ICdLaMO0bmcgY8OzJ308L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD48Y2VudGVyPiR7ZXJyb3IuZGV0YWlscy5uZ2F5VGh1Y0hpZW4gfHwgKGVycm9yLmRldGFpbHMuZGF0ZSB8fCAnS2jDtG5nIGPDsycpfSA8YnIvPiR7ZXJyb3IuZGV0YWlscy5zdGFydFRpbWUgPyBgJHtlcnJvci5kZXRhaWxzLnN0YXJ0VGltZX0gLSAke2Vycm9yLmRldGFpbHMuZW5kVGltZX1gIDogJ0tow7RuZyBjw7MnfTwvY2VudGVyPjwvdGQ+DQogICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJlcnJvci1kZXRhaWwiPg0KICAgICAgICAgICAgICAgICAgICAke2Vycm9yLm1lc3NhZ2V9DQogICAgICAgICAgICAgICAgICAgICR7ZXJyb3IuZGV0YWlscy5leHBlY3RlZCA/IGAke2Vycm9yLmRldGFpbHMuYWN0dWFsfSBwaMO6dCAgIChRdXkgxJHhu4tuaDogJHtlcnJvci5kZXRhaWxzLmV4cGVjdGVkfSBwaMO6dClgIDogJyd9DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+YDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGh0bWwgKz0gYA0KICAgICAgICAgICAgPHRyIGNsYXNzPSJlcnJvci1yb3ciPg0KICAgICAgICAgICAgICAgIDx0ZCBjb2xzcGFuPSI2IiBjbGFzcz0iZXJyb3ItZGV0YWlsIj4NCiAgICAgICAgICAgICAgICAgICAgJHtlcnJvci5tZXNzYWdlfSAke2Vycm9yLnJvdyA/ICcoRMOybmcgJyArIGVycm9yLnJvdyArICcpJyA6ICcnfQ0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPmA7DQogICAgICAgIH0NCiAgICB9KTsNCiAgICANCiAgICBodG1sICs9IGA8L3Rib2R5PjwvdGFibGU+YDsNCiAgICANCiAgICBlcnJvckxvZ0Rpdi5pbm5lckhUTUwgPSBodG1sOw0KICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yU2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgIA0KICAgIC8vIEN14buZbiB4deG7kW5nIHBo4bqnbiBs4buXaSBu4bq/dSBjw7MNCiAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgY29uc3QgZXJyb3JTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yU2VjdGlvbicpOw0KICAgICAgICBpZiAoZXJyb3JTZWN0aW9uKSB7DQogICAgICAgICAgICBzbW9vdGhTY3JvbGxUbyhlcnJvclNlY3Rpb24sIC0xMzApOw0KICAgICAgICB9DQogICAgfSwgMzAwKTsNCn0NCg0KLy8gSMOgbSBjdeG7mW4gbcaw4bujdCB04buVbmcgcXXDoXQNCmZ1bmN0aW9uIHNtb290aFNjcm9sbFRvKGVsZW1lbnQsIG9mZnNldCA9IDApIHsNCiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodC1lcnJvci1zZWN0aW9uJyk7DQogICAgDQogICAgY29uc3QgZWxlbWVudFBvc2l0aW9uID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7DQogICAgY29uc3Qgb2Zmc2V0UG9zaXRpb24gPSBlbGVtZW50UG9zaXRpb24gKyB3aW5kb3cucGFnZVlPZmZzZXQgLSBvZmZzZXQ7DQogICAgDQogICAgY29uc3QgZHVyYXRpb24gPSAxNTAwOw0KICAgIGNvbnN0IHN0YXJ0ID0gd2luZG93LnBhZ2VZT2Zmc2V0Ow0KICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpOw0KICAgIA0KICAgIGZ1bmN0aW9uIHNjcm9sbFN0ZXAodGltZXN0YW1wKSB7DQogICAgICAgIGNvbnN0IGVsYXBzZWQgPSB0aW1lc3RhbXAgLSBzdGFydFRpbWU7DQogICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4oZWxhcHNlZCAvIGR1cmF0aW9uLCAxKTsNCiAgICAgICAgY29uc3QgZWFzaW5nID0gZWFzZUluT3V0Q3ViaWMocHJvZ3Jlc3MpOw0KICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgc3RhcnQgKyAob2Zmc2V0UG9zaXRpb24gLSBzdGFydCkgKiBlYXNpbmcpOw0KICAgICAgICANCiAgICAgICAgaWYgKHByb2dyZXNzIDwgMSkgew0KICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzY3JvbGxTdGVwKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBlYXNlSW5PdXRDdWJpYyh0KSB7DQogICAgICAgIHJldHVybiB0IDwgMC41ID8gNCAqIHQgKiB0ICogdCA6IDEgLSBNYXRoLnBvdygtMiAqIHQgKyAyLCAzKSAvIDI7DQogICAgfQ0KICAgIA0KICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2Nyb2xsU3RlcCk7DQogICAgDQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0LWVycm9yLXNlY3Rpb24nKTsNCiAgICB9LCAyMDAwKTsNCn0NCg0KDQogDQoNCiAgICAgICAgZnVuY3Rpb24gcGFyc2VEYXRlVGltZShkYXRldGltZVN0ciwgcm93SW5kZXgpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgaWYgKCFkYXRldGltZVN0cikgew0KICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRhdGV0aW1lU3RyID09PSAnbnVtYmVyJykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBleGNlbERhdGUgPSBuZXcgRGF0ZShNYXRoLnJvdW5kKChkYXRldGltZVN0ciAtIDI1NTY5KSAqIDg2NDAwICogMTAwMCkpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXkgPSBleGNlbERhdGUuZ2V0RGF0ZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtb250aCA9IGV4Y2VsRGF0ZS5nZXRNb250aCgpICsgMTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgeWVhciA9IGV4Y2VsRGF0ZS5nZXRGdWxsWWVhcigpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBob3VycyA9IGV4Y2VsRGF0ZS5nZXRIb3VycygpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtaW51dGVzID0gZXhjZWxEYXRlLmdldE1pbnV0ZXMoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kcyA9IGV4Y2VsRGF0ZS5nZXRTZWNvbmRzKCk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iajogZXhjZWxEYXRlLA0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUtleTogYCR7ZGF5fS8ke21vbnRofS8ke3llYXJ9YCwNCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZXM6IGhvdXJzICogNjAgKyBtaW51dGVzLA0KICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogaG91cnMgKiAzNjAwICsgbWludXRlcyAqIDYwICsgc2Vjb25kcywNCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUaW1lOiBgJHtob3Vycy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7bWludXRlcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7c2Vjb25kcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YA0KICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIH0gDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRldGltZVN0ciA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGVQYXJ0LCB0aW1lUGFydCA9ICcwMDowMDowMCc7DQogICAgICAgICAgICAgICAgICAgIGlmIChkYXRldGltZVN0ci5pbmNsdWRlcygnICcpKSBbZGF0ZVBhcnQsIHRpbWVQYXJ0XSA9IGRhdGV0aW1lU3RyLnNwbGl0KCcgJyk7DQogICAgICAgICAgICAgICAgICAgIGVsc2UgZGF0ZVBhcnQgPSBkYXRldGltZVN0cjsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGxldCBkYXksIG1vbnRoLCB5ZWFyOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZVBhcnQuaW5jbHVkZXMoJy8nKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBkYXRlUGFydC5zcGxpdCgnLycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMykgW2RheSwgbW9udGgsIHllYXJdID0gcGFydHMubWFwKE51bWJlcik7DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJ0cy5sZW5ndGggPT09IDIpIFtkYXksIG1vbnRoXSA9IHBhcnRzLm1hcChOdW1iZXIpLCB5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGVQYXJ0LmluY2x1ZGVzKCctJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gZGF0ZVBhcnQuc3BsaXQoJy0nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDMpIFt5ZWFyLCBtb250aCwgZGF5XSA9IHBhcnRzLm1hcChOdW1iZXIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFydHMubGVuZ3RoID09PSAyKSBbbW9udGgsIGRheV0gPSBwYXJ0cy5tYXAoTnVtYmVyKSwgeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHRocm93IG5ldyBFcnJvcignxJDhu4tuaCBk4bqhbmcgbmfDoHkga2jDtG5nIMSRxrDhu6NjIGjhu5cgdHLhu6MnKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmIChpc05hTihkYXkpIHx8IGlzTmFOKG1vbnRoKSB8fCBpc05hTih5ZWFyKSB8fCBkYXkgPCAxIHx8IGRheSA+IDMxIHx8IG1vbnRoIDwgMSB8fCBtb250aCA+IDEyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dpw6EgdHLhu4sgbmfDoHkga2jDtG5nIGjhu6NwIGzhu4cnKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgbGV0IGhvdXJzID0gMCwgbWludXRlcyA9IDAsIHNlY29uZHMgPSAwOw0KICAgICAgICAgICAgICAgICAgICBpZiAodGltZVBhcnQuaW5jbHVkZXMoJzonKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZVBhcnRzID0gdGltZVBhcnQuc3BsaXQoJzonKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXJzID0gcGFyc2VJbnQodGltZVBhcnRzWzBdKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgbWludXRlcyA9IHBhcnNlSW50KHRpbWVQYXJ0c1sxXSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHMgPSBwYXJzZUludCh0aW1lUGFydHNbMl0pIHx8IDA7DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hTihob3VycykgfHwgaXNOYU4obWludXRlcykgfHwgaXNOYU4oc2Vjb25kcykgfHwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91cnMgPCAwIHx8IGhvdXJzID4gMjMgfHwgbWludXRlcyA8IDAgfHwgbWludXRlcyA+IDU5IHx8IHNlY29uZHMgPCAwIHx8IHNlY29uZHMgPiA1OSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0Vycm9yKCdHacOhIHRy4buLIHRo4budaSBnaWFuIGtow7RuZyBo4bujcCBs4buHJywgcm93SW5kZXgsIHsgdGltZTogdGltZVBhcnQgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91cnMgPSAwOyBtaW51dGVzID0gMDsgc2Vjb25kcyA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVPYmogPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheSwgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4oZGF0ZU9iai5nZXRUaW1lKCkpKSB0aHJvdyBuZXcgRXJyb3IoJ05nw6B5IGtow7RuZyBo4bujcCBs4buHJyk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmRzSW5EYXkgPSBob3VycyAqIDM2MDAgKyBtaW51dGVzICogNjAgKyBzZWNvbmRzOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtaW51dGVzSW5EYXkgPSBob3VycyAqIDYwICsgbWludXRlczsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqLA0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUtleTogYCR7ZGF5fS8ke21vbnRofS8ke3llYXJ9YCwNCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZXM6IG1pbnV0ZXNJbkRheSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM6IHNlY29uZHNJbkRheSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUaW1lOiBgJHtob3Vycy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7bWludXRlcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7c2Vjb25kcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YA0KICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ8SQ4buLbmggZOG6oW5nIHRo4budaSBnaWFuIGtow7RuZyDEkcaw4bujYyBo4buXIHRy4bujJyk7DQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgIGxvZ0Vycm9yKGBM4buXaSBwaMOibiB0w61jaCB0aOG7nWkgZ2lhbjogJHtlcnJvci5tZXNzYWdlfWAsIHJvd0luZGV4LCB7IA0KICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZGF0ZXRpbWVTdHIsDQogICAgICAgICAgICAgICAgICAgIGVycm9yRGV0YWlsczogZXJyb3Iuc3RhY2sgDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09IEtI4bueSSBU4bqgTyBT4buwIEtJ4buGTiA9PT09PT09PT09IC8vDQogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIC8vIEtoaSB0cmFuZyBsb2FkDQogICAgICAgICAgICBpZiAoIXNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ21lZFVzZXInKSkgew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnbG9naW4tcGFnZScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBLaeG7g20gdHJhIMSRxINuZyBuaOG6rXAga2hpIHRyYW5nIHThuqNpDQoJCQ0KCQkJDQogICAgICAgICAgICBjaGVja1NhdmVkTG9naW4oKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gR8OhbiBz4buxIGtp4buHbiBjaG8gbsO6dCDEkcSDbmcgbmjhuq1wDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5CdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoZWNrTG9naW4pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBHw6FuIHPhu7Ega2nhu4duIGNobyBuw7p0IMSRxINuZyB4deG6pXQNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvdXRCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxvZ291dCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIMSQxINuZyBuaOG6rXAgYuG6sW5nIHBow61tIEVudGVyDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRJbnB1dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7DQogICAgICAgICAgICAgICAgICAgIGNoZWNrTG9naW4oKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gR8OhbiBz4buxIGtp4buHbiBjaG8gbsO6dCBwaMOibiB0w61jaCBmaWxlDQogICAgICAgICAgICANCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbmFseXplQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7DQogICAgY29uc3QgZmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlSW5wdXQnKS5maWxlc1swXTsNCiAgICBpZiAoIWZpbGUpIHsNCiAgICAgICAgYWxlcnQoJ1Z1aSBsw7JuZyBjaOG7jW4gZmlsZSB0csaw4bubYyBraGkga2nhu4NtIHRyYScpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ1BvcHVwJyk7DQogICAgY29uc3QgbG9hZGluZ1RleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ1RleHQnKTsNCiAgICBjb25zdCBwcm9ncmVzc0JhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzc0JhcicpOw0KDQogICAgcG9wdXAuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gcG9wdXAuY2xhc3NMaXN0LmFkZCgnc2hvdycpKTsNCg0KICAgIGxvYWRpbmdUZXh0LmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXBhcGVyLXBsYW5lIiBzdHlsZT0iZm9udC1zaXplOjI0cHg7Y29sb3I6IzM0OThkYjttYXJnaW4tYm90dG9tOjEwcHg7Ij48L2k+PGJyLz7EkGFuZyBn4butaSBk4buvIGxp4buHdSB24buBIG3DoXkgY2jhu6cuLi4nOw0KICAgIHByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gJzMzJSc7DQoJDQoJDQoJDQoJY29uc3QgcHJvZ3Jlc3NCYXJDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3NCYXJDb250YWluZXInKTsNCg0KLy8gQ2jhu4kgdOG6oW8gMSBs4bqnbg0KaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3JlZGl0TGluZUJlbG93JykpIHsNCiAgY29uc3QgY3JlZGl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogIGNyZWRpdC5pZCA9ICdjcmVkaXRMaW5lQmVsb3cnOw0KICBjcmVkaXQuaW5uZXJUZXh0ID0gJ8KpIFRoaeG6v3Qga+G6vyAmIHBow6F0IHRyaeG7g24gYuG7n2kgQ2jDonUgSHXhu7NuaCc7DQogIGNyZWRpdC5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7DQogIGNyZWRpdC5zdHlsZS5mb250U2l6ZSA9ICcxNnB4JzsNCiAgY3JlZGl0LnN0eWxlLmNvbG9yID0gJyNGRjAwMDAnOw0KICBjcmVkaXQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7DQoNCiAgcHJvZ3Jlc3NCYXJDb250YWluZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY3JlZGl0LCBwcm9ncmVzc0JhckNvbnRhaW5lci5uZXh0U2libGluZyk7DQp9DQoJDQoJDQoJDQoJDQogICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MCkpKTsNCiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNzAwKSk7DQoNCiAgICBwcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9ICc2NiUnOw0KDQogICAgbGV0IHRvdGFsID0gMDsNCiAgICB0cnkgew0KICAgICAgICBjb25zdCBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgICAgIGZpbGVSZWFkZXIub25sb2FkID0gZSA9PiByZXNvbHZlKG5ldyBVaW50OEFycmF5KGUudGFyZ2V0LnJlc3VsdCkpOw0KICAgICAgICAgICAgZmlsZVJlYWRlci5vbmVycm9yID0gKCkgPT4gcmVqZWN0KG5ldyBFcnJvcigiTOG7l2kgxJHhu41jIGZpbGUiKSk7DQogICAgICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOw0KICAgICAgICB9KTsNCg0KICAgICAgICBjb25zdCB3b3JrYm9vayA9IFhMU1gucmVhZChkYXRhLCB7IHR5cGU6ICdhcnJheScgfSk7DQogICAgICAgIGNvbnN0IGZpcnN0U2hlZXQgPSB3b3JrYm9vay5TaGVldHNbd29ya2Jvb2suU2hlZXROYW1lc1sxXV07DQogICAgICAgIGNvbnN0IGpzb25EYXRhID0gWExTWC51dGlscy5zaGVldF90b19qc29uKGZpcnN0U2hlZXQsIHsNCiAgICAgICAgICAgIGhlYWRlcjogMSwNCiAgICAgICAgICAgIGRlZnZhbDogIiIsDQogICAgICAgICAgICBibGFua3Jvd3M6IHRydWUNCiAgICAgICAgfSk7DQoNCiAgICAgICAgY29uc3Qgcm93cyA9IGpzb25EYXRhLnNsaWNlKDkpOw0KICAgICAgICB0b3RhbCA9IHJvd3MubGVuZ3RoOw0KICAgIH0gY2F0Y2ggew0KICAgICAgICB0b3RhbCA9IDEwMDA7DQogICAgfQ0KDQogICAgY29uc3Qgc3RlcCA9IDEwMDsNCiAgICBjb25zdCBzdGVwcyA9IE1hdGguY2VpbCh0b3RhbCAvIHN0ZXApOw0KICAgIGNvbnN0IGludGVydmFsID0gMjYwMCAvIHN0ZXBzOw0KDQogICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gc3RlcHM7IGkrKykgew0KICAgICAgICBjb25zdCBjdXJyZW50ID0gTWF0aC5taW4oaSAqIHN0ZXAsIHRvdGFsKTsNCiAgICAgICAgbG9hZGluZ1RleHQuaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtdXNlci1tZCIgc3R5bGU9ImZvbnQtc2l6ZToyNHB4O2NvbG9yOiMyOTgwYjk7bWFyZ2luLWJvdHRvbToxMHB4OyI+PC9pPjxici8+xJBhbmcgcGjDom4gdMOtY2ggZOG7ryBsaeG7h3UgdOG7q25nIGLhu4duaCBuaMOibi4uLjxicj4nICsgY3VycmVudCArICcgLyAnICsgdG90YWw7DQogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCBpbnRlcnZhbCkpOw0KICAgIH0NCg0KICAgIGxvYWRpbmdUZXh0LmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLWNoZWNrLWNpcmNsZSIgc3R5bGU9ImZvbnQtc2l6ZToyNHB4O2NvbG9yOmdyZWVuO21hcmdpbi1ib3R0b206MTBweDsiPjwvaT48YnIvPsSQw6Mga2nhu4NtIHRyYSB4b25nLi4uJzsNCiAgICBwcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9ICcxMDAlJzsNCiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpOw0KDQppZiAoIXdpbmRvdy5pc0tob2FMb2kpIHsNCiAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7DQogICAgc2V0VGltZW91dCgoKSA9PiB7IHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0sIDUwMCk7DQoNCg0KfQ0KDQoNCg0KIGVsc2Ugew0KICAgIC8vIE7hur91IMSRYW5nIGzhu5dpIEtob2EsIEtIw5RORyDEkcaw4bujYyDhuqluIHBvcHVwDQogICAgcG9wdXAuY2xhc3NMaXN0LmFkZCgnc2hvdycpOw0KICAgIHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQp9DQogICAgaGFuZGxlRmlsZSgpOw0KCQ0KCQ0KCQ0KCQ0Kc2V0VGltZW91dCgoKSA9PiB7DQogICAgLy8g4p2MIE7hur91IMSRYW5nIGzhu5dpIHTDqm4ga2hvYSB0aMOsIGdp4buvIG5ndXnDqm4gcG9wdXAsIEtIw5RORyDEkcaw4bujYyDhuqluLCBLSMOUTkcgaGnhu4duIG7DunQNCiAgICBpZiAod2luZG93LmlzS2hvYUxvaSkgew0KICAgICAgICBwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgICAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICAvLyDinIUgTuG6v3Uga2jDtG5nIGzhu5dpLCB0aMOsIOG6qW4gcG9wdXAgdsOgIGhp4buHbiBuw7p0IGNo4bupYyBuxINuZw0KICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICBwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KDQogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uLmJ0bicpLmZvckVhY2goYnRuID0+IHsNCiAgICAgICAgaWYgKGJ0bi50ZXh0Q29udGVudC5pbmNsdWRlcygnR2nhu50gdHLhu5FuZycpIHx8IGJ0bi50ZXh0Q29udGVudC5pbmNsdWRlcygnU+G6r2MgdGh14buRYyB0aGFuZycpKSB7DQogICAgICAgICAgICBidG4uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snOw0KICAgICAgICB9DQogICAgfSk7DQp9LCA1MDApOw0KDQoNCgkNCn0pOw0KDQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEfDoW4gc+G7sSBraeG7h24gY2hvIGRyb3Bkb3duIGzhu41jDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlcmF0b3JTZWxlY3QnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmaWx0ZXJCeU9wZXJhdG9yKTsNCiAgICAgICAgICAgIA0KCQkJDQoJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hvd0RvY3RvckNoZWNrYm94JykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZmlsdGVyQnlPcGVyYXRvcik7DQoJCQkNCgkJCQ0KICAgICAgICAgICAgLy8gR8OhbiBz4buxIGtp4buHbiBjaG8gcmFkaW8gYnV0dG9uIGNo4buNbiBraHVuZyBnaeG7nQ0KICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT0idGltZU9wdGlvbiJdJykuZm9yRWFjaChyYWRpbyA9PiB7DQogICAgICAgICAgICAgICAgcmFkaW8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChhbGxQcm9jZWR1cmVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlVGltZVN1Z2dlc3Rpb25zKGFsbFByb2NlZHVyZXMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyQnlPcGVyYXRvcigpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCgkJCQ0KCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZXJhdG9yU2VsZWN0JykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oKSB7DQogICAgZmlsdGVyQnlPcGVyYXRvcigpOw0KfSk7DQoNCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVyYXRvclNlbGVjdEVycm9yJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oKSB7DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZXJhdG9yU2VsZWN0JykudmFsdWUgPSB0aGlzLnZhbHVlOw0KICAgIGZpbHRlckJ5T3BlcmF0b3IoKTsNCn0pOw0KCQkJDQogICAgICAgIH0pOw0KICAgIDwvc2NyaXB0Pg0KPGRpdiBjbGFzcz0icHJvY2VkdXJlLWluZm8iPjxjZW50ZXI+IA0KRGVzaWduIEJ5IDxhIGhyZWY9Imh0dHA6Ly9mYi5jb20vY2hhdWh1eW5oMDEwNCIgdGFyZ2V0PSJfYmxhbmsiPiBEci5DaMOidTwvYT48YnIvPg0KICAgICAgICAgICAgICAgIE7hur91IEPDsyBC4bqldCBL4buzIFbGsOG7m25nIE3huq9jIEfDrCBWdWkgTMOybmcgTEggOiA8YnIvPg0KICAgICAgICAgICAgICAgIEVtYWlsOiBjaGF1aHV5bmgwMTA0QGdtYWlsLmNvbTxici8+DQogICAgICAgICAgICAgICAgU0RUOiAwNzkuNTY3LjkzNTA8L2NlbnRlcj4NCjwvZGl2Pg0KPHNjcmlwdD4NCiAgLy8gSOG7lyB0cuG7oyBuaOG6pW4gRW50ZXIgdOG7qyDDtCB1c2VybmFtZSBob+G6t2MgcGFzc3dvcmQNCiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJuYW1lSW5wdXQnKS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGV2ZW50KSB7DQogICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykgew0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkSW5wdXQnKS5mb2N1cygpOw0KICAgIH0NCiAgfSk7DQoNCiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkSW5wdXQnKS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGV2ZW50KSB7DQogICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykgew0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luQnRuJykuY2xpY2soKTsNCiAgICB9DQogIH0pOw0KDQovLyA9PT09PT0gVOG7sCDEkOG7mE5HIFFVw4lUIFRIxq8gTeG7pEMgJiBDSOG7jE4gRklMRSBN4buaSSBOSOG6pFQgPT09PT09DQoNCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb2xkZXJCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9sZGVySW5wdXQnKS5jbGljaygpOw0KfSk7DQoNCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb2xkZXJJbnB1dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jIChlKSA9PiB7DQogICAgY29uc3QgZmlsZXMgPSBBcnJheS5mcm9tKGUudGFyZ2V0LmZpbGVzKS5maWx0ZXIoZiA9PiAvXC4oeGxzeHx4bHN8Y3N2KSQvaS50ZXN0KGYubmFtZSkpOw0KICAgIGNvbnN0IHN0YXR1c0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY2FuU3RhdHVzJyk7DQogICAgY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVJbnB1dCcpOw0KDQogICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICBzdGF0dXNEaXYuc3R5bGUuY29sb3IgPSAncmVkJzsNCiAgICAgICAgc3RhdHVzRGl2LmlubmVySFRNTCA9ICdLaMO0bmcgdMOsbSB0aOG6pXkgZmlsZSBFeGNlbCBo4bujcCBs4buHIHRyb25nIHRoxrAgbeG7pWMuJzsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGxldCB2YWxpZEZpbGUgPSBudWxsOw0KDQogICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzLnNvcnQoKGEsIGIpID0+IGIubGFzdE1vZGlmaWVkIC0gYS5sYXN0TW9kaWZpZWQpKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgY29uc3Qgd29ya2Jvb2sgPSBYTFNYLnJlYWQoZGF0YSwgeyB0eXBlOiAnYXJyYXknIH0pOw0KDQogICAgICAgICAgICBpZiAoIXdvcmtib29rLlNoZWV0TmFtZXNbMV0pIGNvbnRpbnVlOyAvLyBj4bqnbiBTaGVldCB0aOG7qSAyDQoNCiAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gd29ya2Jvb2suU2hlZXRzW3dvcmtib29rLlNoZWV0TmFtZXNbMV1dOw0KICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24oc2hlZXQsIHsgaGVhZGVyOiAxLCBkZWZ2YWw6ICIiLCBibGFua3Jvd3M6IHRydWUgfSk7DQoNCiAgICAgICAgICAgIGlmIChqc29uRGF0YS5sZW5ndGggPj0gMTApIHsgLy8gw610IG5o4bqldCAyIGTDsm5nIGhlYWRlciB2w6AgY8OzIGThu68gbGnhu4d1IGTDsm5nIDEwDQogICAgICAgICAgICAgICAgdmFsaWRGaWxlID0gZmlsZTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICBjb25zb2xlLmVycm9yKGBM4buXaSDEkeG7jWMgZmlsZSAke2ZpbGUubmFtZX06YCwgZXJyKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmICh2YWxpZEZpbGUpIHsNCiAgICAgICAgY29uc3QgZHQgPSBuZXcgRGF0YVRyYW5zZmVyKCk7DQogICAgICAgIGR0Lml0ZW1zLmFkZCh2YWxpZEZpbGUpOw0KICAgICAgICBmaWxlSW5wdXQuZmlsZXMgPSBkdC5maWxlczsNCg0KICAgICAgICAvLyBj4bqtcCBuaOG6rXQgdHLhuqFuZyB0aMOhaQ0KICAgICAgICBzdGF0dXNEaXYuaW5uZXJIVE1MID0gYDxpIGNsYXNzPSJmYXMgZmEtZm9sZGVyLW9wZW4iPjwvaT4gxJDDoyBjaOG7jW4gZmlsZTogPGI+JHt2YWxpZEZpbGUubmFtZX08L2I+YDsNCiAgICAgICAgc3RhdHVzRGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICBzdGF0dXNEaXYuc3R5bGUuY29sb3IgPSAnIzJjM2U1MCc7DQoNCiAgICAgICAgLy8gR+G7jWkga2nhu4NtIHRyYQ0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5hbHl6ZUJ0bicpLmNsaWNrKCk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgc3RhdHVzRGl2LnN0eWxlLmNvbG9yID0gJ3JlZCc7DQogICAgICAgIHN0YXR1c0Rpdi5pbm5lckhUTUwgPSAnS2jDtG5nIHTDrG0gxJHGsOG7o2MgZmlsZSBjw7MgY+G6pXUgdHLDumMgaOG7o3AgbOG7hy4gVnVpIGzDsm5nIGtp4buDbSB0cmEgbOG6oWkuJzsNCiAgICB9DQp9KTsNCg0KDQo8L3NjcmlwdD4NCjxkaXYgY2xhc3M9InRvYXN0IiBpZD0idG9hc3QiPjwvZGl2Pg0KPCEtLSBQb3B1cCBsb2FkaW5nIC0tPg0KPGRpdiBpZD0ibG9hZGluZ1BvcHVwIiBzdHlsZT0iZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjUpO3otaW5kZXg6OTk5OTtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtmb250LWZhbWlseTonSW50ZXInLHNhbnMtc2VyaWYiPg0KPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZmZmO3BhZGRpbmc6MzBweCA0MHB4O2JvcmRlci1yYWRpdXM6MTBweDt0ZXh0LWFsaWduOmNlbnRlcjtib3gtc2hhZG93OjAgMCAxNXB4IHJnYmEoMCwwLDAsMC4zKTttYXgtd2lkdGg6OTAlO2ZvbnQtc2l6ZToxOHB4Ij4NCjxkaXYgaWQ9ImxvYWRpbmdUZXh0Ij4NCjxpIGNsYXNzPSJmYXMgZmEtc3Bpbm5lciBmYS1zcGluIiBzdHlsZT0iZm9udC1zaXplOjI0cHg7Y29sb3I6IzM0OThkYjttYXJnaW4tYm90dG9tOjEwcHg7Ij48L2k+PGJyLz4NCiAgICAgIMSQYW5nIGfhu61pIGThu68gbGnhu4d1IHbhu4EgbcOheSBjaOG7py4uLg0KICAgIDwvZGl2Pg0KPGRpdiBpZD0icHJvZ3Jlc3NCYXJDb250YWluZXIiPg0KPGRpdiBpZD0icHJvZ3Jlc3NCYXIiPjwvZGl2Pg0KPGRpdiBpZD0iYXZhaWxhYmlsaXR5VGFibGUiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBtYXJnaW4tdG9wOiAyMHB4OyI+DQogIDxoMj5UaOG7kW5nIGvDqiBnaeG7nSB0cuG7kW5nIHThu6tuZyBuZ8aw4budaTwvaDI+DQogIDx0YWJsZSBjbGFzcz0iZXJyb3ItdGFibGUiPg0KICAgIDx0aGVhZD4NCiAgICAgIDx0cj4NCiAgICAgICAgPHRoPk5nxrDhu51pIHRo4buxYyBoaeG7h248L3RoPg0KICAgICAgICA8dGg+TmfDoHk8L3RoPg0KICAgICAgICANCiAgICAgICAgPHRoPkdp4budIHRy4buRbmcgYnXhu5VpIHPDoW5nPC90aD4NCiAgICAgICAgPHRoPkdp4budIHRy4buRbmcgYnXhu5VpIGNoaeG7gXU8L3RoPg0KICAgICAgPC90cj4NCiAgICA8L3RoZWFkPg0KICAgIDx0Ym9keSBpZD0iYXZhaWxhYmlsaXR5Qm9keSI+PC90Ym9keT4NCiAgPC90YWJsZT4NCjwvZGl2Pg0KPCEtLSBL4bq+VCBUSMOaQzogQuG6ok5HIEdJ4bucIFRS4buQTkcgVOG7qk5HIE5Hxq/hu5xJIC0tPg0KPC9kaXY+DQo8L2Rpdj4NCjwvZGl2Pg0KPC9kaXY+DQoNCjxzY3JpcHQ+DQpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgZnVuY3Rpb24oKSB7DQogIGNvbnN0IG5vaWR1bmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibm9pZHVuZyIpOw0KICBjb25zdCBsaXN0MSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5saXN0MSIpOw0KDQogIGlmIChub2lkdW5nICYmIGxpc3QxKSB7DQogICAgY29uc3QgdGV4dCA9IG5vaWR1bmcudGV4dENvbnRlbnQgfHwgbm9pZHVuZy5pbm5lclRleHQgfHwgIiI7DQogICAgaWYgKHRleHQudHJpbSgpID09PSAiIikgew0KICAgICAgbGlzdDEuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICB9DQogIH0NCn0pOw0KDQovLyA9PT09IFTDjU5IIFRPw4FOIEdJ4bucIFRS4buQTkcgQ0hPIFThu6pORyBOR8av4bucSSA9PT09DQoNCg0KDQpmdW5jdGlvbiB0b2dnbGVBdmFpbGFiaWxpdHkoKSB7DQogICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXZhaWxhYmlsaXR5VGFibGUnKTsNCiAgICBjb25zdCBmaWx0ZXJCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdmFpbGFiaWxpdHlGaWx0ZXJCbG9jaycpOw0KICAgIGlmICh0YWJsZS5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHsNCiAgICAgICAgdGFibGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgIGlmIChmaWx0ZXJCbG9jaykgZmlsdGVyQmxvY2suc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgIGNhbGN1bGF0ZUF2YWlsYWJpbGl0eSgpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIHRhYmxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgIGlmIChmaWx0ZXJCbG9jaykgZmlsdGVyQmxvY2suc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICB9DQp9DQoNCg0KZnVuY3Rpb24gY2FsY3VsYXRlQXZhaWxhYmlsaXR5KCkgew0KICAgIGNvbnN0IGdyb3VwcyA9IHt9Ow0KICAgIGFsbFByb2NlZHVyZXMuZm9yRWFjaChwcm9jID0+IHsNCiAgICAgICAgY29uc3Qga2V5ID0gYCR7cHJvYy5vcGVyYXRvcn1fJHtwcm9jLmRhdGV9YDsNCiAgICAgICAgaWYgKCFncm91cHNba2V5XSkgZ3JvdXBzW2tleV0gPSBbXTsNCiAgICAgICAgZ3JvdXBzW2tleV0ucHVzaChwcm9jKTsNCiAgICB9KTsNCg0KICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F2YWlsYWJpbGl0eUJvZHknKTsNCiAgICB0Ym9keS5pbm5lckhUTUwgPSAnJzsNCg0KICAgIGNvbnN0IHNlbGVjdGVkT3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsdGVyT3BlcmF0b3InKT8udmFsdWUgfHwgJ2FsbCc7DQogICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlckRhdGUnKT8udmFsdWUgfHwgJ2FsbCc7DQoNCiAgICAvLyBDaOG7iSBraOG7n2kgdOG6oW8gZHJvcGRvd24gMSBs4bqnbg0KICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlck9wZXJhdG9yJykuZGF0YXNldC5pbml0aWFsaXplZCkgew0KICAgICAgICBjb25zdCBvcGVyYXRvcnMgPSBbLi4ubmV3IFNldChhbGxQcm9jZWR1cmVzLm1hcChwID0+IHAub3BlcmF0b3IpKV0uc29ydCgpOw0KICAgICAgICBjb25zdCBkYXRlcyA9IFsuLi5uZXcgU2V0KGFsbFByb2NlZHVyZXMubWFwKHAgPT4gcC5kYXRlKSldLnNvcnQoKGEsIGIpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IFtkYSwgbWEsIHlhXSA9IGEuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTsNCiAgICAgICAgICAgIGNvbnN0IFtkYiwgbWIsIHliXSA9IGIuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh5YSwgbWEgLSAxLCBkYSkgLSBuZXcgRGF0ZSh5YiwgbWIgLSAxLCBkYik7DQogICAgICAgIH0pOw0KDQogICAgICAgIGNvbnN0IG9wU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlck9wZXJhdG9yJyk7DQogICAgICAgIGNvbnN0IGRhdGVTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsdGVyRGF0ZScpOw0KDQogICAgICAgIG9wU2VsZWN0LmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJhbGwiPlThuqV0IGPhuqM8L29wdGlvbj4nICsNCiAgICAgICAgICAgIG9wZXJhdG9ycy5tYXAob3AgPT4gYDxvcHRpb24gdmFsdWU9IiR7b3B9Ij4ke29wLnJlcGxhY2UoLywvZywgJycpfTwvb3B0aW9uPmApLmpvaW4oJycpOw0KICAgICAgICBkYXRlU2VsZWN0LmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJhbGwiPlThuqV0IGPhuqM8L29wdGlvbj4nICsNCiAgICAgICAgICAgIGRhdGVzLm1hcChkID0+IGA8b3B0aW9uIHZhbHVlPSIke2R9Ij4ke2R9PC9vcHRpb24+YCkuam9pbignJyk7DQoNCiAgICAgICAgb3BTZWxlY3QuZGF0YXNldC5pbml0aWFsaXplZCA9ICd0cnVlJzsNCiAgICAgICAgZGF0ZVNlbGVjdC5kYXRhc2V0LmluaXRpYWxpemVkID0gJ3RydWUnOw0KDQogICAgICAgIG9wU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNhbGN1bGF0ZUF2YWlsYWJpbGl0eSk7DQogICAgICAgIGRhdGVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY2FsY3VsYXRlQXZhaWxhYmlsaXR5KTsNCiAgICB9DQoNCiAgICBPYmplY3Qua2V5cyhncm91cHMpLmZvckVhY2goa2V5ID0+IHsNCiAgICAgICAgY29uc3QgW29wZXJhdG9yLCBkYXRlXSA9IGtleS5zcGxpdCgnXycpOw0KICAgICAgICBpZiAoKHNlbGVjdGVkT3AgIT09ICdhbGwnICYmIG9wZXJhdG9yICE9PSBzZWxlY3RlZE9wKSB8fA0KICAgICAgICAgICAgKHNlbGVjdGVkRGF0ZSAhPT0gJ2FsbCcgJiYgZGF0ZSAhPT0gc2VsZWN0ZWREYXRlKSkgcmV0dXJuOw0KDQogICAgICAgIGNvbnN0IHByb2NlZHVyZXMgPSBncm91cHNba2V5XTsNCiAgICAgICAgcHJvY2VkdXJlcy5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0IC0gYi5zdGFydCk7DQoNCiAgICAgICAgY29uc3QgbW9ybmluZ1N0YXJ0ID0gNyAqIDM2MDA7DQogICAgICAgIGNvbnN0IG1vcm5pbmdFbmQgPSAxMS41ICogMzYwMDsNCiAgICAgICAgY29uc3QgYWZ0ZXJub29uU3RhcnQgPSAxMy41ICogMzYwMDsNCiAgICAgICAgY29uc3QgYWZ0ZXJub29uRW5kID0gMTcgKiAzNjAwOw0KDQogICAgICAgIGNvbnN0IG1vcm5pbmdGcmVlID0gZ2V0RnJlZVNsb3RzKHByb2NlZHVyZXMsIG1vcm5pbmdTdGFydCwgbW9ybmluZ0VuZCk7DQogICAgICAgIGNvbnN0IGFmdGVybm9vbkZyZWUgPSBnZXRGcmVlU2xvdHMocHJvY2VkdXJlcywgYWZ0ZXJub29uU3RhcnQsIGFmdGVybm9vbkVuZCk7DQoNCiAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsNCiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoImhlcmItcm93Iik7DQogICAgICAgIHJvdy5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICA8dGQ+PGEgaHJlZj0iIyIgb25jbGljaz0ic2hvd1Byb2NlZHVyZXNGb3JPcGVyYXRvcihcYCR7b3BlcmF0b3J9XGAsIFxgJHtkYXRlfVxgKTtyZXR1cm4gZmFsc2U7IiBzdHlsZT0iY29sb3I6IzM0OThkYjtmb250LXdlaWdodDpib2xkIj4ke29wZXJhdG9yLnJlcGxhY2UoLywvZywgJycpfTwvYT48L3RkPg0KICAgICAgICAgICAgPHRkPiR7ZGF0ZX08L3RkPg0KICAgICAgICAgICAgPHRkPiR7bW9ybmluZ0ZyZWV9PC90ZD4NCiAgICAgICAgICAgIDx0ZD4ke2FmdGVybm9vbkZyZWV9PC90ZD4NCiAgICAgICAgYDsNCiAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQocm93KTsNCiAgICB9KTsNCn0NCg0KDQpmdW5jdGlvbiBnZXRGcmVlU2xvdHMocHJvY2VkdXJlcywgc3RhcnQsIGVuZCkgew0KICAgIGNvbnN0IGJ1c3kgPSBwcm9jZWR1cmVzLm1hcChwID0+ICh7DQogICAgICAgIHN0YXJ0OiBwLnN0YXJ0LA0KICAgICAgICBlbmQ6IHAuZW5kICsgKChwLnByb2NlZHVyZUluZm8/LmJ1ZmZlciB8fCAwKSAqIDYwKQ0KICAgIH0pKS5maWx0ZXIocCA9PiBwLmVuZCA+IHN0YXJ0ICYmIHAuc3RhcnQgPCBlbmQpOw0KDQogICAgYnVzeS5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0IC0gYi5zdGFydCk7DQoNCiAgICBjb25zdCBmcmVlID0gW107DQogICAgbGV0IGN1cnNvciA9IHN0YXJ0Ow0KDQogICAgZm9yIChjb25zdCBiIG9mIGJ1c3kpIHsNCiAgICAgICAgaWYgKGIuc3RhcnQgPiBjdXJzb3IgJiYgYi5zdGFydCA+IHN0YXJ0ICYmIGN1cnNvciA8IGVuZCkgew0KICAgICAgICAgICAgY29uc3QgZnJlZVN0YXJ0ID0gTWF0aC5tYXgoY3Vyc29yLCBzdGFydCk7DQogICAgICAgICAgICBjb25zdCBmcmVlRW5kID0gTWF0aC5taW4oYi5zdGFydCwgZW5kKTsNCiAgICAgICAgICAgIGlmIChmcmVlRW5kID4gZnJlZVN0YXJ0KSB7DQogICAgICAgICAgICAgICAgZnJlZS5wdXNoKGAke2Zvcm1hdFRpbWUoZnJlZVN0YXJ0KX0gLSAke2Zvcm1hdFRpbWUoZnJlZUVuZCl9YCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgY3Vyc29yID0gTWF0aC5tYXgoY3Vyc29yLCBiLmVuZCk7DQogICAgfQ0KDQogICAgaWYgKGN1cnNvciA8IGVuZCkgew0KICAgICAgICBmcmVlLnB1c2goYCR7Zm9ybWF0VGltZShjdXJzb3IpfSAtICR7Zm9ybWF0VGltZShlbmQpfWApOw0KICAgIH0NCg0KICAgIHJldHVybiBmcmVlLmxlbmd0aCA/IGZyZWUuam9pbignPGJyPicpIDogJzxpPktow7RuZyBjw7JuIHRy4buRbmc8L2k+JzsNCn0NCg0KZnVuY3Rpb24gZm9ybWF0VGltZShzZWMpIHsNCiAgICBjb25zdCBoID0gTWF0aC5mbG9vcihzZWMgLyAzNjAwKTsNCiAgICBjb25zdCBtID0gTWF0aC5mbG9vcigoc2VjICUgMzYwMCkgLyA2MCk7DQogICAgcmV0dXJuIGgudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpICsgJ2gnICsgbS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7DQp9DQoNCmZ1bmN0aW9uIHNob3dQcm9jZWR1cmVzRm9yT3BlcmF0b3Iob3BlcmF0b3IsIGRhdGUpIHsNCiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2NlZHVyZU92ZXJsYXknKTsNCiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwQ29udGVudCcpOw0KICAgIGNvbnN0IGxpc3QgPSBhbGxQcm9jZWR1cmVzLmZpbHRlcihwID0+IHAub3BlcmF0b3IgPT09IG9wZXJhdG9yICYmIHAuZGF0ZSA9PT0gZGF0ZSk7DQoNCiAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHsNCiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAiPGk+S2jDtG5nIHTDrG0gdGjhuqV5IHRo4bunIHRodeG6rXQ8L2k+IjsNCiAgICB9IGVsc2Ugew0KICAgICAgICBsaXN0LnNvcnQoKGEsIGIpID0+IGEuc3RhcnQgLSBiLnN0YXJ0KTsNCiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAiPGI+TmfGsOG7nWkgdGjhu7FjIGhp4buHbjo8L2I+ICIgKyBvcGVyYXRvciArICI8YnI+PGI+TmfDoHk6PC9iPiAiICsgZGF0ZSArICI8YnI+PGJyPiIgKw0KICAgICAgICAgICAgIjx1bCBzdHlsZT0ncGFkZGluZy1sZWZ0OjIwcHgnPiIgKyBsaXN0Lm1hcChwID0+IA0KICAgICAgICAgICAgICAgICI8bGk+PGI+IiArIHAucGF0aWVudE5hbWUgKyAiPC9iPiAtICIgKyBwLnByb2NlZHVyZSArICIgKCIgKyBwLmRpc3BsYXlTdGFydCArICIg4oaSICIgKyBwLmRpc3BsYXlFbmQgKyAiKTwvbGk+Ig0KICAgICAgICAgICAgKS5qb2luKCcnKSArICI8L3VsPiI7DQogICAgfQ0KDQogICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCn0NCg0KZnVuY3Rpb24gY2xvc2VQcm9jZWR1cmVQb3B1cCgpIHsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvY2VkdXJlT3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQp9DQo8L3NjcmlwdD4NCjwhLS0gUG9wdXAgdGjhu6cgdGh14bqtdCBjaGkgdGnhur90IHbhu5tpIG92ZXJsYXkgLS0+DQo8ZGl2IGlkPSJwcm9jZWR1cmVPdmVybGF5IiBzdHlsZT0iZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjQpO3otaW5kZXg6MTAwMDAiIG9uY2xpY2s9ImNsb3NlUHJvY2VkdXJlUG9wdXAoKSI+DQogIDxkaXYgaWQ9InByb2NlZHVyZVBvcHVwIiBvbmNsaWNrPSJldmVudC5zdG9wUHJvcGFnYXRpb24oKSIgc3R5bGU9InBvc2l0aW9uOnJlbGF0aXZlO3RvcDoxMCU7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7YmFja2dyb3VuZDojZmZmO2NvbG9yOiMwMDA7Ym9yZGVyOjJweCBzb2xpZCAjMzQ5OGRiO3BhZGRpbmc6MjBweDtib3JkZXItcmFkaXVzOjhweDtib3gtc2hhZG93OjAgNXB4IDIwcHggcmdiYSgwLDAsMCwwLjMpO21heC1oZWlnaHQ6NzB2aDtvdmVyZmxvdzphdXRvO2ZvbnQtZmFtaWx5OkludGVyLHNhbnMtc2VyaWY7bWF4LXdpZHRoOjYwMHB4Ij4NCiAgICA8aDM+Q2hpIHRp4bq/dCB0aOG7pyB0aHXhuq10PC9oMz4NCiAgICA8ZGl2IGlkPSJwb3B1cENvbnRlbnQiPjwvZGl2Pg0KICAgIDxici8+DQogICAgPGJ1dHRvbiBjbGFzcz0iYnRuIiBvbmNsaWNrPSJjbG9zZVByb2NlZHVyZVBvcHVwKCkiPsSQw7NuZzwvYnV0dG9uPg0KICA8L2Rpdj4NCjwvZGl2Pg0KDQoNCg0KDQoNCjxzY3JpcHQ+DQpmdW5jdGlvbiByZW5kZXJIZXJiTGlzdCgpIHsNCiAgICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiVGFibGVCb2R5Jyk7DQogICAgdGJvZHkuaW5uZXJIVE1MID0gJyc7DQoNCiAgICBjb25zdCBoZXJicyA9IHdpbmRvdy5hbGxIZXJiUHJvY2VkdXJlcyB8fCBbXTsNCiAgICBjb25zdCBkYXRlRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJEYXRlRmlsdGVyJyk7DQogICAgY29uc3QgZG9jdG9yRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJEb2N0b3JGaWx0ZXInKTsNCg0KICAgIGlmICghZGF0ZUZpbHRlci5kYXRhc2V0LmluaXRpYWxpemVkKSB7DQogICAgICAgIGNvbnN0IHVuaXF1ZURhdGVzID0gWy4uLm5ldyBTZXQoaGVyYnMubWFwKGggPT4gaC5kYXRlKSldLnNvcnQoKGEsIGIpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IFtkYSwgbWEsIHlhXSA9IGEuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTsNCiAgICAgICAgICAgIGNvbnN0IFtkYiwgbWIsIHliXSA9IGIuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh5YSwgbWEgLSAxLCBkYSkgLSBuZXcgRGF0ZSh5YiwgbWIgLSAxLCBkYik7DQogICAgICAgIH0pOw0KDQogICAgICAgIGNvbnN0IHVuaXF1ZURvY3RvcnMgPSBbLi4ubmV3IFNldChoZXJicy5tYXAoaCA9PiBoLmRvY3RvciB8fCAnS2jDtG5nIGPDsycpKV0uc29ydCgpOw0KDQogICAgICAgIGRhdGVGaWx0ZXIuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9ImFsbCI+VOG6pXQgY+G6ozwvb3B0aW9uPicgKw0KICAgICAgICAgICAgdW5pcXVlRGF0ZXMubWFwKGQgPT4gYDxvcHRpb24gdmFsdWU9IiR7ZH0iPiR7ZH08L29wdGlvbj5gKS5qb2luKCcnKTsNCg0KICAgICAgICBkb2N0b3JGaWx0ZXIuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9ImFsbCI+VOG6pXQgY+G6oyBiw6FjIHPEqTwvb3B0aW9uPicgKw0KICAgICAgICAgICAgdW5pcXVlRG9jdG9ycy5tYXAoZCA9PiBgPG9wdGlvbiB2YWx1ZT0iJHtkfSI+JHtkfTwvb3B0aW9uPmApLmpvaW4oJycpOw0KDQogICAgICAgIGRhdGVGaWx0ZXIuZGF0YXNldC5pbml0aWFsaXplZCA9ICJ0cnVlIjsNCiAgICAgICAgZGF0ZUZpbHRlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCByZW5kZXJIZXJiTGlzdCk7DQogICAgICAgIGRvY3RvckZpbHRlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCByZW5kZXJIZXJiTGlzdCk7DQogICAgfQ0KDQogICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gZGF0ZUZpbHRlci52YWx1ZTsNCiAgICBjb25zdCBzZWxlY3RlZERvY3RvciA9IGRvY3RvckZpbHRlci52YWx1ZTsNCg0KICAgIGNvbnN0IGZpbHRlcmVkSGVyYnMgPSBoZXJicy5maWx0ZXIocCA9Pg0KICAgICAgICAoc2VsZWN0ZWREYXRlID09PSAnYWxsJyB8fCBwLmRhdGUgPT09IHNlbGVjdGVkRGF0ZSkgJiYNCiAgICAgICAgKHNlbGVjdGVkRG9jdG9yID09PSAnYWxsJyB8fCBwLmRvY3RvciA9PT0gc2VsZWN0ZWREb2N0b3IpDQogICAgKTsNCg0KICAgIGlmIChmaWx0ZXJlZEhlcmJzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOw0KICAgICAgICByb3cuY2xhc3NMaXN0LmFkZCgiaGVyYi1yb3ciKTsNCiAgICAgICAgcm93LmlubmVySFRNTCA9IGA8dGQgY29sc3Bhbj0iNSI+PGNlbnRlcj5LaMO0bmcgY8OzIGThu68gbGnhu4d1IHPhuq9jIHRodeG7kWMgdGhhbmc8L2NlbnRlcj48L3RkPmA7DQogICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHJvdyk7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBmaWx0ZXJlZEhlcmJzLmZvckVhY2gocCA9PiB7DQogICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7DQogICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCJoZXJiLXJvdyIpOw0KICAgICAgICByb3cuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgPHRkPiR7cC5wYXRpZW50TmFtZX08L3RkPg0KICAgICAgICAgICAgPHRkPiR7cC5wcm9jZWR1cmV9PC90ZD4NCiAgICAgICAgICAgIDx0ZD4ke3AuZGF0ZX08L3RkPg0KICAgICAgICAgICAgPHRkPiR7cC5kaXNwbGF5U3RhcnR9IOKGkiAke3AuZGlzcGxheUVuZH08L3RkPg0KICAgICAgICAgICAgPHRkPiR7cC5vcGVyYXRvci5yZXBsYWNlKC8sL2csICcnKX08L3RkPg0KICAgICAgICBgOw0KICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChyb3cpOw0KICAgIH0pOw0KfQ0KDQoNCmZ1bmN0aW9uIHRvZ2dsZUhlcmJMaXN0KCkgew0KICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJQcm9jZWR1cmVUYWJsZScpOw0KICAgIGlmICh0YWJsZS5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHsNCiAgICAgICAgdGFibGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgIHJlbmRlckhlcmJMaXN0KCk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgdGFibGUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICB9DQp9DQo8L3NjcmlwdD4NCg0KDQoNCjxzY3JpcHQ+DQooZnVuY3Rpb24oKXsNCiAgLyogPT09PSBUSeG7hk4gw41DSCBDSFXhuqhOIEhPw4EgVMOKTiA9PT09ICovDQogIGZ1bmN0aW9uIGNsZWFuRGlzcGxheShuYW1lKXsNCiAgICByZXR1cm4gKG5hbWV8fCcnKQ0KICAgICAgLnRvU3RyaW5nKCkNCiAgICAgIC5yZXBsYWNlKC9bLO+8jF0rXHMqJC8sJycpDQogICAgICAucmVwbGFjZSgvXHMrL2csJyAnKQ0KICAgICAgLnRyaW0oKTsNCiAgfQ0KICBmdW5jdGlvbiBub3JtKG5hbWUpew0KICAgIHJldHVybiBjbGVhbkRpc3BsYXkobmFtZSkudG9Mb3dlckNhc2UoKTsNCiAgfQ0KDQogIC8qID09PT0gVMONTkggxJBBIFPhu5AgVEhFTyBOR8OAWSA9PT09ICovDQogIGZ1bmN0aW9uIGNvbXB1dGVNYWpvcml0eUJ5RGF0ZShyb3dzKXsNCiAgICBjb25zdCBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpOw0KICAgIHJvd3MuZm9yRWFjaChyPT57DQogICAgICBjb25zdCBkID0gci5kYXRlOw0KICAgICAgY29uc3QgbiA9IG5vcm0oci5vcGVyYXRvcik7DQogICAgICBpZighbiB8fCBuID09PSAna2jDtG5nIGPDsycpIHJldHVybjsNCiAgICAgIChtYXBbZF18fChtYXBbZF09e30pKVtuXSA9IChtYXBbZF1bbl18fDApKzE7DQogICAgfSk7DQogICAgY29uc3Qgb3V0ID0ge307DQogICAgT2JqZWN0LmtleXMobWFwKS5mb3JFYWNoKGQ9PnsNCiAgICAgIGNvbnN0IGFyciA9IE9iamVjdC5lbnRyaWVzKG1hcFtkXSkuc29ydCgoYSxiKT0+YlsxXS1hWzFdKTsNCiAgICAgIGNvbnN0IHRvcCA9IGFyclswXSB8fCBbbnVsbCwwXTsNCiAgICAgIGNvbnN0IHNlY29uZCA9IGFyclsxXSB8fCBbbnVsbCwwXTsNCiAgICAgIG91dFtkXSA9IHsgdG9wTm9ybTp0b3BbMF0sIHRvcENvdW50OnRvcFsxXSwgc2Vjb25kQ291bnQ6c2Vjb25kWzFdIH07DQogICAgfSk7DQogICAgcmV0dXJuIG91dDsNCiAgfQ0KDQogIC8qID09PT0gVUkgUEjhu6Q6IFTDk00gVOG6rlQgKyBQT1BVUCA9PT09ICovDQogIGZ1bmN0aW9uIGVuc3VyZU91dGxpZXJVSSgpew0KICAgIGNvbnN0IHN1bW1hcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYk91dGxpZXJTdW1tYXJ5Jyk7DQogICAgY29uc3QgbW9kYWwgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiT3V0bGllck1vZGFsJyk7DQogICAgaWYoIXN1bW1hcnkpIGNvbnNvbGUud2FybignVGhp4bq/dSAjaGVyYk91dGxpZXJTdW1tYXJ5IHRyb25nIEhUTUwhJyk7DQogICAgaWYoIW1vZGFsKSAgIGNvbnNvbGUud2FybignVGhp4bq/dSAjaGVyYk91dGxpZXJNb2RhbCB0cm9uZyBIVE1MIScpOw0KICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiT3V0bGllckNsb3NlQnRuJyk7DQogICAgY29uc3QgYmFja2Ryb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYk91dGxpZXJCYWNrZHJvcCcpOw0KICAgIGlmKGJ0bikgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9Pm1vZGFsLnN0eWxlLmRpc3BsYXk9J25vbmUnKTsNCiAgICBpZihiYWNrZHJvcCkgYmFja2Ryb3AuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+bW9kYWwuc3R5bGUuZGlzcGxheT0nbm9uZScpOw0KICB9DQogIGVuc3VyZU91dGxpZXJVSSgpOw0KDQogIC8qID09PT0gR0hJIMSQw4ggSMOATSBSRU5ERVIgPT09PSAqLw0KICB3aW5kb3cucmVuZGVySGVyYkxpc3QgPSBmdW5jdGlvbigpew0KICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJUYWJsZUJvZHknKTsNCiAgICBjb25zdCBkYXRlRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJEYXRlRmlsdGVyJyk7DQogICAgY29uc3QgZG9jdG9yRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJEb2N0b3JGaWx0ZXInKTsNCiAgICBjb25zdCBzdW1tYXJ5RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJPdXRsaWVyU3VtbWFyeScpOw0KICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJPdXRsaWVyTW9kYWwnKTsNCiAgICBjb25zdCBtb2RhbEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYk91dGxpZXJNb2RhbEJvZHknKTsNCiAgICBjb25zdCBtb2RhbEluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYk91dGxpZXJNb2RhbEluZm8nKTsNCg0KICAgIHRib2R5LmlubmVySFRNTCA9ICcnOw0KDQogICAgY29uc3QgaGVyYnNSYXcgPSB3aW5kb3cuYWxsSGVyYlByb2NlZHVyZXMgfHwgW107DQogICAgY29uc3QgaGVyYnMgPSBoZXJic1Jhdy5tYXAoaD0+KHsNCiAgICAgIC4uLmgsDQogICAgICBvcENsZWFuOiBjbGVhbkRpc3BsYXkoaC5vcGVyYXRvciksDQogICAgICBvcE5vcm06IG5vcm0oaC5vcGVyYXRvcikNCiAgICB9KSk7DQoNCiAgICBpZighZGF0ZUZpbHRlci5kYXRhc2V0LmluaXRpYWxpemVkKXsNCiAgICAgIGNvbnN0IHVuaXF1ZURhdGVzID0gWy4uLm5ldyBTZXQoaGVyYnMubWFwKGg9PmguZGF0ZSkpXS5zb3J0KChhLGIpPT57DQogICAgICAgIGNvbnN0IFtkYSxtYSx5YV0gPSBhLnNwbGl0KCcvJykubWFwKE51bWJlcik7DQogICAgICAgIGNvbnN0IFtkYixtYix5Yl0gPSBiLnNwbGl0KCcvJykubWFwKE51bWJlcik7DQogICAgICAgIHJldHVybiBuZXcgRGF0ZSh5YSxtYS0xLGRhKSAtIG5ldyBEYXRlKHliLG1iLTEsZGIpOw0KICAgICAgfSk7DQogICAgICBjb25zdCB1bmlxdWVEb2N0b3JzID0gWy4uLm5ldyBTZXQoaGVyYnMubWFwKGg9PmguZG9jdG9yfHwnS2jDtG5nIGPDsycpKV0uc29ydCgpOw0KICAgICAgZGF0ZUZpbHRlci5pbm5lckhUTUwgPQ0KICAgICAgICAnPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjPC9vcHRpb24+JyArDQogICAgICAgIHVuaXF1ZURhdGVzLm1hcChkPT5gPG9wdGlvbiB2YWx1ZT0iJHtkfSI+JHtkfTwvb3B0aW9uPmApLmpvaW4oJycpOw0KICAgICAgZG9jdG9yRmlsdGVyLmlubmVySFRNTCA9DQogICAgICAgICc8b3B0aW9uIHZhbHVlPSJhbGwiPlThuqV0IGPhuqMgYsOhYyBzxKk8L29wdGlvbj4nICsNCiAgICAgICAgdW5pcXVlRG9jdG9ycy5tYXAoZD0+YDxvcHRpb24gdmFsdWU9IiR7ZH0iPiR7ZH08L29wdGlvbj5gKS5qb2luKCcnKTsNCiAgICAgIGRhdGVGaWx0ZXIuZGF0YXNldC5pbml0aWFsaXplZCA9ICd0cnVlJzsNCiAgICAgIGRhdGVGaWx0ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgd2luZG93LnJlbmRlckhlcmJMaXN0KTsNCiAgICAgIGRvY3RvckZpbHRlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB3aW5kb3cucmVuZGVySGVyYkxpc3QpOw0KICAgIH0NCg0KICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IGRhdGVGaWx0ZXIudmFsdWU7DQogICAgY29uc3Qgc2VsZWN0ZWREb2N0b3IgPSBkb2N0b3JGaWx0ZXIudmFsdWU7DQoNCiAgICBjb25zdCBmaWx0ZXJlZCA9IGhlcmJzLmZpbHRlcihwID0+DQogICAgICAoc2VsZWN0ZWREYXRlID09PSAnYWxsJyB8fCBwLmRhdGUgPT09IHNlbGVjdGVkRGF0ZSkgJiYNCiAgICAgIChzZWxlY3RlZERvY3RvciA9PT0gJ2FsbCcgfHwgcC5kb2N0b3IgPT09IHNlbGVjdGVkRG9jdG9yKQ0KICAgICk7DQoNCiAgICBpZihmaWx0ZXJlZC5sZW5ndGggPT09IDApew0KICAgICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOw0KICAgICAgdHIuY2xhc3NOYW1lID0gJ2hlcmItcm93JzsNCiAgICAgIHRyLmlubmVySFRNTCA9ICc8dGQgY29sc3Bhbj0iNSI+PGNlbnRlcj5LaMO0bmcgY8OzIGThu68gbGnhu4d1IHPhuq9jIHRodeG7kWMgdGhhbmc8L2NlbnRlcj48L3RkPic7DQogICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7DQogICAgICBpZihzdW1tYXJ5RGl2KSBzdW1tYXJ5RGl2LnN0eWxlLmRpc3BsYXk9J25vbmUnOw0KICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGNvbnN0IG1ham9yaXR5ID0gY29tcHV0ZU1ham9yaXR5QnlEYXRlKGhlcmJzKTsNCiAgICBjb25zdCBvdXRsaWVyc0luVmlldyA9IFtdOw0KDQogICAgZmlsdGVyZWQuZm9yRWFjaChwPT57DQogICAgICBjb25zdCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7DQogICAgICB0ci5jbGFzc05hbWUgPSAnaGVyYi1yb3cnOw0KICAgICAgY29uc3QgbSA9IG1ham9yaXR5W3AuZGF0ZV07DQogICAgICBjb25zdCBoYXNNYWpvcml0eSA9IG0gJiYgbS50b3BOb3JtICYmIG0udG9wQ291bnQgPiBtLnNlY29uZENvdW50Ow0KICAgICAgaWYoaGFzTWFqb3JpdHkgJiYgcC5vcE5vcm0gIT09IG0udG9wTm9ybSl7DQogICAgICAgIHRyLmNsYXNzTGlzdC5hZGQoJ2hlcmItb3V0bGllcicpOw0KICAgICAgICBvdXRsaWVyc0luVmlldy5wdXNoKHApOw0KICAgICAgfQ0KICAgICAgdHIuaW5uZXJIVE1MID0gYA0KICAgICAgICA8dGQ+JHtwLnBhdGllbnROYW1lfTwvdGQ+DQogICAgICAgIDx0ZD4ke3AucHJvY2VkdXJlfTwvdGQ+DQogICAgICAgIDx0ZD4ke3AuZGF0ZX08L3RkPg0KICAgICAgICA8dGQ+JHtwLmRpc3BsYXlTdGFydH0gJnJhcnI7ICR7cC5kaXNwbGF5RW5kfTwvdGQ+DQogICAgICAgIDx0ZD4ke3Aub3BDbGVhbn08L3RkPg0KICAgICAgYDsNCiAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTsNCiAgICB9KTsNCg0KICAgIGlmKHN1bW1hcnlEaXYpew0KICAgICAgaWYob3V0bGllcnNJblZpZXcubGVuZ3RoKXsNCiAgICAgICAgc3VtbWFyeURpdi5zdHlsZS5kaXNwbGF5PSdibG9jayc7DQogICAgICAgIHN1bW1hcnlEaXYuaW5uZXJIVE1MID0NCiAgICAgICAgICBgPGEgaHJlZj0iIyIgaWQ9ImhlcmJPdXRsaWVyQ291bnRMaW5rIj5Dw7MgJHtvdXRsaWVyc0luVmlldy5sZW5ndGh9IGNhIGPDsyB24bqlbiDEkeG7gSB0cm9uZyBkYW5oIHPDoWNoIG7DoHkuPC9hPmA7DQogICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYk91dGxpZXJDb3VudExpbmsnKTsNCiAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KXsNCiAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgIGlmKG1vZGFsQm9keSl7DQogICAgICAgICAgICBtb2RhbEJvZHkuaW5uZXJIVE1MID0gJyc7DQogICAgICAgICAgICBvdXRsaWVyc0luVmlldy5mb3JFYWNoKHA9PnsNCiAgICAgICAgICAgICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOw0KICAgICAgICAgICAgICB0ci5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgPHRkPiR7cC5wYXRpZW50TmFtZX08L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4ke3AucHJvY2VkdXJlfTwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPiR7cC5kYXRlfTwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPiR7cC5kaXNwbGF5U3RhcnR9ICZyYXJyOyAke3AuZGlzcGxheUVuZH08L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4ke3Aub3BDbGVhbn08L3RkPg0KICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgICBtb2RhbEJvZHkuYXBwZW5kQ2hpbGQodHIpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmKG1vZGFsSW5mbyl7DQogICAgICAgICAgICBjb25zdCBub3RlRGF0ZSA9IChzZWxlY3RlZERhdGU9PT0nYWxsJykgPyAnbmhp4buBdSBuZ8OgeScgOiBzZWxlY3RlZERhdGU7DQogICAgICAgICAgICBtb2RhbEluZm8udGV4dENvbnRlbnQgPSBgVOG7lW5nICR7b3V0bGllcnNJblZpZXcubGVuZ3RofSBjYSBraMOhYyDEkWEgc+G7kSAoJHtub3RlRGF0ZX0pLmA7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmKG1vZGFsKSBtb2RhbC5zdHlsZS5kaXNwbGF5PSdibG9jayc7DQogICAgICAgIH0sIHtvbmNlOnRydWV9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHN1bW1hcnlEaXYuc3R5bGUuZGlzcGxheT0nbm9uZSc7DQogICAgICAgIHN1bW1hcnlEaXYuaW5uZXJIVE1MPScnOw0KICAgICAgfQ0KICAgIH0NCiAgfTsNCg0KICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCk9PnsNCiAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiUHJvY2VkdXJlVGFibGUnKTsNCiAgICBpZih0YWJsZSAmJiB0YWJsZS5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScpew0KICAgICAgd2luZG93LnJlbmRlckhlcmJMaXN0KCk7DQogICAgfQ0KICB9KTsNCn0pKCk7DQoNCg0KDQoNCjwvc2NyaXB0Pg0KPHNjcmlwdD4NCiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGZ1bmN0aW9uICgpIHsNCiAgICBjb25zdCBmaWxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZUlucHV0Jyk7DQogICAgY29uc3QgYW5hbHl6ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbmFseXplQnRuJyk7DQogICAgaWYgKGZpbGVJbnB1dCAmJiBhbmFseXplQnRuKSB7DQogICAgICBmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKCkgew0KICAgICAgICBhbmFseXplQnRuLmNsaWNrKCk7DQogICAgICB9KTsNCiAgICB9DQogIH0pOw0KPC9zY3JpcHQ+DQoNCg0KPCEtLSBUSEVNRSBQSUNLRVIgU0NSSVBUIC0tPg0KPHNjcmlwdD4NCihmdW5jdGlvbigpew0KICBjb25zdCBUSEVNRV9LRVkgPSAndWlBY2NlbnRUaGVtZSc7DQogIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5Ow0KICBjb25zdCBwaWNrZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhlbWVQaWNrZXInKTsNCiAgaWYoIXBpY2tlcikgcmV0dXJuOw0KICBmdW5jdGlvbiBhcHBseVRoZW1lKHQpew0KICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgndGhlbWUtZGVmYXVsdCcsJ3RoZW1lLW9yYW5nZScsJ3RoZW1lLXJlZCcsJ3RoZW1lLWdyZWVuJyk7DQogICAgaWYodCAmJiB0ICE9PSAnZGVmYXVsdCcpew0KICAgICAgYm9keS5jbGFzc0xpc3QuYWRkKCd0aGVtZS0nK3QpOw0KICAgIH0gZWxzZSB7DQogICAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ3RoZW1lLWRlZmF1bHQnKTsgLy8gZXhwbGljaXQgxJHhu4MgYWN0aXZlIHJpbmcNCiAgICB9DQogICAgcGlja2VyLnF1ZXJ5U2VsZWN0b3JBbGwoJy50aGVtZS1zd2F0Y2gnKS5mb3JFYWNoKGJ0bj0+ew0KICAgICAgYnRuLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScsIGJ0bi5kYXRhc2V0LnRoZW1lPT09dCB8fCAodD09PScnICYmIGJ0bi5kYXRhc2V0LnRoZW1lPT09J2RlZmF1bHQnKSk7DQogICAgfSk7DQogICAgdHJ5eyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShUSEVNRV9LRVksdHx8J2RlZmF1bHQnKTsgfWNhdGNoKGUpe30NCiAgfQ0KICBjb25zdCBzYXZlZCA9IChmdW5jdGlvbigpe3RyeXtyZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVEhFTUVfS0VZKSB8fCAnZGVmYXVsdCc7fWNhdGNoKGUpe3JldHVybiAnZGVmYXVsdCc7fX0pKCk7DQogIGFwcGx5VGhlbWUoc2F2ZWQpOw0KICBwaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGU9PnsNCiAgICBjb25zdCBidG4gPSBlLnRhcmdldC5jbG9zZXN0KCcudGhlbWUtc3dhdGNoJyk7DQogICAgaWYoIWJ0bikgcmV0dXJuOw0KICAgIGFwcGx5VGhlbWUoYnRuLmRhdGFzZXQudGhlbWUpOw0KICB9KTsNCn0pKCk7DQo8L3NjcmlwdD4NCg0KPHNjcmlwdD4NCmZ1bmN0aW9uIHVwZGF0ZUhlcmJCdXR0b25XaXRoT3V0bGllckNvdW50KCkgew0KICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYlRvZ2dsZUJ0bicpOw0KICBpZiAoIWJ0biB8fCAhd2luZG93LmFsbEhlcmJQcm9jZWR1cmVzKSByZXR1cm47DQoNCiAgY29uc3QgaGVyYnMgPSB3aW5kb3cuYWxsSGVyYlByb2NlZHVyZXM7DQogIGNvbnN0IGNvdW50cyA9IHt9Ow0KDQogIGhlcmJzLmZvckVhY2goaCA9PiB7DQogICAgY29uc3QgZGF0ZSA9IGguZGF0ZTsNCiAgICBjb25zdCBrZXkgPSBkYXRlOw0KICAgIGlmICghY291bnRzW2tleV0pIGNvdW50c1trZXldID0ge307DQogICAgY29uc3QgbmFtZSA9IChoLm9wZXJhdG9yIHx8ICdLaMO0bmcgY8OzJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7DQogICAgY291bnRzW2tleV1bbmFtZV0gPSAoY291bnRzW2tleV1bbmFtZV0gfHwgMCkgKyAxOw0KICB9KTsNCg0KICBsZXQgb3V0bGllckNvdW50ID0gMDsNCg0KICBPYmplY3Qua2V5cyhjb3VudHMpLmZvckVhY2goZGF0ZSA9PiB7DQogICAgY29uc3Qgb3BzID0gY291bnRzW2RhdGVdOw0KICAgIGNvbnN0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyhvcHMpLnNvcnQoKGEsIGIpID0+IGJbMV0gLSBhWzFdKTsNCiAgICBjb25zdCB0b3AgPSBlbnRyaWVzWzBdOw0KICAgIGlmICghdG9wKSByZXR1cm47DQoNCiAgICBjb25zdCB0b3BOYW1lID0gdG9wWzBdOw0KICAgIGNvbnN0IHRvcENvdW50ID0gdG9wWzFdOw0KDQogICAgZm9yIChjb25zdCBbbmFtZSwgY291bnRdIG9mIGVudHJpZXMpIHsNCiAgICAgIGlmIChuYW1lICE9PSB0b3BOYW1lICYmIGNvdW50ID4gMCkgew0KICAgICAgICBvdXRsaWVyQ291bnQgKz0gY291bnQ7DQogICAgICB9DQogICAgfQ0KICB9KTsNCg0KYnRuLmlubmVySFRNTCA9IGBT4bqvYyB0aHXhu5FjIHRoYW5nIDxpIGNsYXNzPSJmYS1zb2xpZCBmYS10cmlhbmdsZS1leGNsYW1hdGlvbiIgc3R5bGU9ImNvbG9yOnllbGxvdyI+PC9pPiA8c3BhbiBzdHlsZT0iY29sb3I6eWVsbG93OyBmb250LXdlaWdodDpib2xkIj4oJHtvdXRsaWVyQ291bnR9KTwvc3Bhbj5gOw0KDQoNCn0NCjwvc2NyaXB0Pg0KPGRpdiBpZD0iZHJvcGJveFBhbmVsIiBzdHlsZT0iZGlzcGxheTpub25lOyBwb3NpdGlvbjpmaXhlZDsgaW5zZXQ6MDsgYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSk7IHotaW5kZXg6OTk5OTsiPg0KICA8ZGl2IHN0eWxlPSJtYXJnaW46NSUgYXV0bzsgYmFja2dyb3VuZDojZmZmOyBwYWRkaW5nOjIwcHg7IG1heC13aWR0aDo5MCU7IGJvcmRlci1yYWRpdXM6MTBweDsgbWF4LWhlaWdodDo4MHZoOyBvdmVyZmxvdzphdXRvIj4NCiAgICA8aDM+8J+TgiBEYW5oIHPDoWNoIEtob2EgxJHDoyBz4butIGThu6VuZyBwaOG6p24gbeG7gW08L2gzPg0KICAgIDx0YWJsZSBib3JkZXI9IjEiIGNlbGxwYWRkaW5nPSI4IiBzdHlsZT0id2lkdGg6MTAwJTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyBmb250LXNpemU6MTRweCI+DQogICAgICA8dGhlYWQ+DQogICAgICAgIDx0cj4NCiAgICAgICAgICA8dGg+U1RUPC90aD4NCiAgICAgICAgICA8dGg+VMOqbiBraG9hPC90aD4NCiAgICAgICAgICA8dGg+TmfDoHk8L3RoPg0KICAgICAgICAgIA0KICAgICAgICAgIDx0aD5Uw6puIG3DoXkgdMOtbmg8L3RoPg0KICAgICAgICAgIDx0aD5UaOG7nWkgZ2lhbiB1cGxvYWQ8L3RoPg0KCQkgIDx0aD5MaW5rPC90aD4NCiAgICAgICAgPC90cj4NCiAgICAgIDwvdGhlYWQ+DQogICAgICA8dGJvZHkgaWQ9ImRyb3Bib3hGaWxlTGlzdCI+PC90Ym9keT4NCiAgICA8L3RhYmxlPg0KICAgIDxici8+PGNlbnRlcj48YnV0dG9uIGNsYXNzPSJidG4iIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcm9wYm94UGFuZWwnKS5zdHlsZS5kaXNwbGF5PSdub25lJyI+xJDDs25nPC9idXR0b24+PC9jZW50ZXI+DQogIDwvZGl2Pg0KPC9kaXY+PHNjcmlwdD4NCmFzeW5jIGZ1bmN0aW9uIHNob3dEcm9wYm94UGFuZWwoKSB7DQogICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCBnZXRBY2Nlc3NUb2tlbigpOw0KICAgIGNvbnN0IGRieCA9IG5ldyBEcm9wYm94LkRyb3Bib3goeyBhY2Nlc3NUb2tlbiB9KTsNCg0KICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZGJ4LmZpbGVzRG93bmxvYWQoeyBwYXRoOiAnL3RodXRodWF0L2xvZy5qc29uJyB9KTsNCiAgIGNvbnN0IGJsb2IgPSByZXNwb25zZS5yZXN1bHQuZmlsZUJsb2I7IAkgLy8gS0jDlE5HIGfhu41pICgpLCB2w6wgbsOzIGzDoCBwcm9wZXJ0eSBjaOG7qSBraMO0bmcgcGjhuqNpIGjDoG0NCg0KICAgIGNvbnN0IHRleHQgPSBhd2FpdCBibG9iLnRleHQoKTsNCiAgICBjb25zdCBsb2dzID0gSlNPTi5wYXJzZSh0ZXh0KTsNCg0KICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Ryb3Bib3hGaWxlTGlzdCcpOw0KICAgIHRib2R5LmlubmVySFRNTCA9IGxvZ3MubWFwKChpdGVtLCBpKSA9PiBgDQogICAgICAgIDx0cj4NCiAgICAgICAgICA8dGQ+JHtpICsgMX08L3RkPg0KICAgICAgICAgIDx0ZD4ke2l0ZW0ua2hvYX08L3RkPg0KICAgICAgICAgIDx0ZD4ke2l0ZW0ubmdheX08L3RkPg0KICAgICAgDQogICAgICAgICAgPHRkPiR7aXRlbS5wY308L3RkPg0KICAgICAgICAgIDx0ZD4ke2l0ZW0udGltZX08L3RkPg0KCQkgICA8dGQ+PGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBvbmNsaWNrPSJ2ZXJpZnlBbmRPcGVuTGluaygnJHtpdGVtLmxpbmt9JykiPlhlbTwvYT48L3RkPg0KICAgICAgICA8L3RyPg0KICAgIGApLmpvaW4oJycpOw0KDQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Ryb3Bib3hQYW5lbCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KfQ0KPC9zY3JpcHQ+DQo8c2NyaXB0Pg0KZnVuY3Rpb24gdmVyaWZ5QW5kT3BlbkxpbmsodXJsKSB7DQogIC8vIE92ZXJsYXkgdOG7kWkgKGNsaWNrIHbDoG8gc+G6vSB04bqvdCkNCiAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICBPYmplY3QuYXNzaWduKG92ZXJsYXkuc3R5bGUsIHsNCiAgICBwb3NpdGlvbjogJ2ZpeGVkJywgaW5zZXQ6ICcwJywgYmFja2dyb3VuZDogJ3JnYmEoMCwwLDAsMC41KScsDQogICAgZGlzcGxheTogJ2ZsZXgnLCBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsIGFsaWduSXRlbXM6ICdjZW50ZXInLA0KICAgIHpJbmRleDogJzEwMDAwJw0KICB9KTsNCg0KICAvLyBLaHVuZyBwb3B1cA0KICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgT2JqZWN0LmFzc2lnbihib3guc3R5bGUsIHsNCiAgICBiYWNrZ3JvdW5kOiAnI2ZmZicsIHBhZGRpbmc6ICcyNHB4JywgYm9yZGVyUmFkaXVzOiAnMTBweCcsDQogICAgbWF4V2lkdGg6ICc0MjBweCcsIHdpZHRoOiAnOTAlJywgYm94U2hhZG93OiAnMCA0cHggMTBweCByZ2JhKDAsMCwwLDAuMyknLA0KICAgIGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcxMnB4Jw0KICB9KTsNCg0KICAvLyBUacOqdSDEkeG7gSBuZ+G6r24gZ+G7jW4gKGtow7RuZyBjw7MgaWNvbi9n4butaSBk4buvIGxp4buHdSkNCiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgdGl0bGUudGV4dENvbnRlbnQgPSAnTmjhuq1wIG3huq10IGto4bqpdSDEkeG7gyBt4bufIGxpbmsnOw0KICB0aXRsZS5zdHlsZS5mb250V2VpZ2h0ID0gJzYwMCc7DQoNCiAgLy8gw5Qgbmjhuq1wIG3huq10IGto4bqpdQ0KICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7DQogIE9iamVjdC5hc3NpZ24oaW5wdXQsIHsgdHlwZTogJ3Bhc3N3b3JkJywgcGxhY2Vob2xkZXI6ICdN4bqtdCBraOG6qXUnIH0pOw0KICBPYmplY3QuYXNzaWduKGlucHV0LnN0eWxlLCB7DQogICAgcGFkZGluZzogJzEwcHgnLCB3aWR0aDogJzEwMCUnLCBib3JkZXI6ICcxcHggc29saWQgI2RkZCcsIGJvcmRlclJhZGl1czogJzZweCcNCiAgfSk7DQoNCiAgLy8gVGjDtG5nIGLDoW8gbOG7l2kgKOG6qW4gbeG6t2MgxJHhu4tuaCkNCiAgY29uc3QgZXJyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogIGVyci50ZXh0Q29udGVudCA9ICfinYwgU2FpIG3huq10IGto4bqpdSEnOw0KICBPYmplY3QuYXNzaWduKGVyci5zdHlsZSwgeyBjb2xvcjogJ3JlZCcsIGZvbnRTaXplOiAnMTRweCcsIGRpc3BsYXk6ICdub25lJyB9KTsNCg0KICAvLyBOw7p0IHjDoWMgbmjhuq1uDQogIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOw0KICBidG4udGV4dENvbnRlbnQgPSAnWMOhYyBuaOG6rW4nOw0KICBPYmplY3QuYXNzaWduKGJ0bi5zdHlsZSwgew0KICAgIHBhZGRpbmc6ICcxMHB4IDE2cHgnLCBiYWNrZ3JvdW5kOiAnIzM0OThkYicsIGNvbG9yOiAnI2ZmZicsDQogICAgYm9yZGVyOiAnbm9uZScsIGJvcmRlclJhZGl1czogJzZweCcsIGN1cnNvcjogJ3BvaW50ZXInDQogIH0pOw0KDQogIC8vIFByb2dyZXNzIGJhciAoxJHhurd0IETGr+G7mkkgQ8OZTkcpDQogIGNvbnN0IGJhcldyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgT2JqZWN0LmFzc2lnbihiYXJXcmFwLnN0eWxlLCB7DQogICAgd2lkdGg6ICcxMDAlJywgYmFja2dyb3VuZDogJyNkZGQnLCBoZWlnaHQ6ICc2cHgnLA0KICAgIGJvcmRlclJhZGl1czogJzNweCcsIG1hcmdpblRvcDogJzEycHgnDQogIH0pOw0KICBjb25zdCBiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgT2JqZWN0LmFzc2lnbihiYXIuc3R5bGUsIHsgd2lkdGg6ICcwJScsIGhlaWdodDogJzEwMCUnLCBiYWNrZ3JvdW5kOiAnIzM0OThkYicgfSk7DQogIGJhcldyYXAuYXBwZW5kQ2hpbGQoYmFyKTsNCg0KICAvLyBH4bqvbiB2w6BvIERPTQ0KICBib3guYXBwZW5kQ2hpbGQodGl0bGUpOw0KICBib3guYXBwZW5kQ2hpbGQoaW5wdXQpOw0KICBib3guYXBwZW5kQ2hpbGQoZXJyKTsNCiAgYm94LmFwcGVuZENoaWxkKGJ0bik7DQogIGJveC5hcHBlbmRDaGlsZChiYXJXcmFwKTsNCiAgb3ZlcmxheS5hcHBlbmRDaGlsZChib3gpOw0KICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpOw0KDQogIC8vIENo4bq3biBjbGljayBiw6puIHRyb25nIGtow7RuZyDEkcOzbmcNCiAgYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTsNCiAgLy8gQ2xpY2sgcmEgbmdvw6BpIMSR4buDIHThuq90DQogIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdmVybGF5KTsNCiAgfSk7DQoNCiAgLy8gWOG7rSBsw70geMOhYyBuaOG6rW4NCiAgYXN5bmMgZnVuY3Rpb24gc3VibWl0KCkgew0KICAgIC8vIMSQ4buVaSBt4bqtdCBraOG6qXUg4bufIMSRw6J5DQogICAgY29uc3QgT0sgPSBpbnB1dC52YWx1ZSA9PT0gJzEhJzsNCg0KICAgIGlmICghT0spIHsNCiAgICAgIGVyci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgZXJyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgYnRuLmRpc2FibGVkID0gdHJ1ZTsNCiAgICBpbnB1dC5kaXNhYmxlZCA9IHRydWU7DQoNCiAgICAvLyBBbmltYXRlIHByb2dyZXNzIG5oYW5oIGzDqm4gMTAwJQ0KICAgIGJhci5zdHlsZS50cmFuc2l0aW9uID0gJ3dpZHRoIDAuNnMgZWFzZSc7DQogICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IChiYXIuc3R5bGUud2lkdGggPSAnMTAwJScpKTsNCiAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgIHdpbmRvdy5vcGVuKHVybCwgJ19ibGFuaycpOw0KICAgICAgaWYgKG92ZXJsYXkucGFyZW50Tm9kZSkgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdmVybGF5KTsNCiAgICB9LCA2NTApOw0KICB9DQoNCiAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3VibWl0KTsNCiAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7DQogICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSBzdWJtaXQoKTsNCiAgfSk7DQoNCiAgLy8gRm9jdXMgbmdheSDDtCBt4bqtdCBraOG6qXUNCiAgc2V0VGltZW91dCgoKSA9PiBpbnB1dC5mb2N1cygpLCAwKTsNCn0NCg0KDQo8L3NjcmlwdD4NCg0KPC9ib2R5Pg0KDQo8L2h0bWw+";
  const binary = atob(base64);
  const bytes = new Uint8Array([...binary].map(c => c.charCodeAt(0)));
  const decoded = new TextDecoder("utf-8").decode(bytes);
  document.write(decoded);
</script>


</body>
</html>
